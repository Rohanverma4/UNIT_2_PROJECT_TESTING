!function (a) { var g, b = this || eval("this"), c = b.document, d = b.navigator, e = b.jQuery, f = b.JSON; e || "undefined" == typeof jQuery || (e = jQuery), g = function (t, u) { function n(e, t) { return (null === e || typeof e in j) && e === t } function i(e, t) { var n; return function () { n = n || _.a.setTimeout(function () { n = a, e() }, t) } } function o(e, t) { var n; return function () { clearTimeout(n), n = _.a.setTimeout(e, t) } } function s(e, t) { t && "change" !== t ? "beforeChange" === t ? this.pc(e) : this.gb(e, t) : this.qc(e) } function r(e, t) { null !== t && t.s && t.s() } function l(e, t) { var n = this.qd, a = n[V]; a.ra || (this.Qb && this.mb[t] ? (n.uc(t, e, this.mb[t]), this.mb[t] = null, --this.Qb) : a.I[t] || n.uc(t, e, a.J ? { da: e } : n.$c(e)), e.Ja && e.gd()) } var p, h, v, g, m, y, w, x, C, E, k, T, N, _ = void 0 !== t ? t : {}; function S() { if (k) for (var e, t = k, n = 0; N < k;)if (e = E[N++]) { if (t < N) { if (5e3 <= ++n) { N = k, _.a.Gc(Error("'Too much recursion' after processing " + n + " task groups.")); break } t = k } try { e() } catch (e) { _.a.Gc(e) } } } function D() { S(), N = k = E.length = 0 } _.b = function (e, t) { for (var n = e.split("."), a = _, r = 0; r < n.length - 1; r++)a = a[n[r]]; a[n[n.length - 1]] = t }, _.L = function (e, t, n) { e[t] = n }, _.version = "3.5.1", _.b("version", _.version), _.options = { deferUpdates: !1, useOnlyNativeEvents: !1, foreachHidesDestroyed: !1 }, _.a = function () { function p(e, t) { for (var n in e) i.call(e, n) && t(n, e[n]) } function t(e, t) { if (t) for (var n in t) i.call(t, n) && (e[n] = t[n]); return e } function n(e, t) { return e.__proto__ = t, e } function r(e, t, n, a) { var r = e[t].match(m) || []; _.a.D(n.match(m), function (e) { _.a.Na(r, e, a) }), e[t] = r.join(" ") } var i = Object.prototype.hasOwnProperty, o = { __proto__: [] } instanceof Array, u = "function" == typeof Symbol, s = {}, l = {}; s[d && /Firefox\/2/i.test(d.userAgent) ? "KeyboardEvent" : "UIEvents"] = ["keyup", "keydown", "keypress"], s.MouseEvents = "click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "), p(s, function (e, t) { if (t.length) for (var n = 0, a = t.length; n < a; n++)l[t[n]] = e }); var h, v = { propertychange: !0 }, g = c && function () { for (var e = 3, t = c.createElement("div"), n = t.getElementsByTagName("i"); t.innerHTML = "\x3c!--[if gt IE " + ++e + "]><i></i><![endif]--\x3e", n[0];); return 4 < e ? e : a }(), m = /\S+/g; return { Jc: ["authenticity_token", /^__RequestVerificationToken(_.*)?$/], D: function (e, t, n) { for (var a = 0, r = e.length; a < r; a++)t.call(n, e[a], a, e) }, A: "function" == typeof Array.prototype.indexOf ? function (e, t) { return Array.prototype.indexOf.call(e, t) } : function (e, t) { for (var n = 0, a = e.length; n < a; n++)if (e[n] === t) return n; return -1 }, Lb: function (e, t, n) { for (var r = 0, i = e.length; r < i; r++)if (t.call(n, e[r], r, e)) return e[r]; return a }, Pa: function (e, t) { var n = _.a.A(e, t); 0 < n ? e.splice(n, 1) : 0 === n && e.shift() }, wc: function (e) { var t = []; return e && _.a.D(e, function (e) { _.a.A(t, e) < 0 && t.push(e) }), t }, Mb: function (e, t, n) { var a = []; if (e) for (var r = 0, i = e.length; r < i; r++)a.push(t.call(n, e[r], r)); return a }, jb: function (e, t, n) { var a = []; if (e) for (var r = 0, i = e.length; r < i; r++)t.call(n, e[r], r) && a.push(e[r]); return a }, Nb: function (e, t) { if (t instanceof Array) e.push.apply(e, t); else for (var n = 0, a = t.length; n < a; n++)e.push(t[n]); return e }, Na: function (e, t, n) { var a = _.a.A(_.a.bc(e), t); a < 0 ? n && e.push(t) : n || e.splice(a, 1) }, Ba: o, extend: t, setPrototypeOf: n, Ab: o ? n : t, P: p, Ga: function (e, t, n) { if (!e) return e; var a, r = {}; for (a in e) i.call(e, a) && (r[a] = t.call(n, e[a], a, e)); return r }, Tb: function (e) { for (; e.firstChild;)_.removeNode(e.firstChild) }, Yb: function (e) { for (var t = ((e = _.a.la(e))[0] && e[0].ownerDocument || c).createElement("div"), n = 0, a = e.length; n < a; n++)t.appendChild(_.oa(e[n])); return t }, Ca: function (e, t) { for (var n = 0, a = e.length, r = []; n < a; n++) { var i = e[n].cloneNode(!0); r.push(t ? _.oa(i) : i) } return r }, va: function (e, t) { if (_.a.Tb(e), t) for (var n = 0, a = t.length; n < a; n++)e.appendChild(t[n]) }, Xc: function (e, t) { var n = e.nodeType ? [e] : e; if (0 < n.length) { for (var a = n[0], r = a.parentNode, i = 0, o = t.length; i < o; i++)r.insertBefore(t[i], a); for (i = 0, o = n.length; i < o; i++)_.removeNode(n[i]) } }, Ua: function (e, t) { if (e.length) { for (t = 8 === t.nodeType && t.parentNode || t; e.length && e[0].parentNode !== t;)e.splice(0, 1); for (; 1 < e.length && e[e.length - 1].parentNode !== t;)e.length--; if (1 < e.length) { var n = e[0], a = e[e.length - 1]; for (e.length = 0; n !== a;)e.push(n), n = n.nextSibling; e.push(a) } } return e }, Zc: function (e, t) { g < 7 ? e.setAttribute("selected", t) : e.selected = t }, Db: function (e) { return null === e || e === a ? "" : e.trim ? e.trim() : e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g, "") }, Ud: function (e, t) { return e = e || "", !(t.length > e.length) && e.substring(0, t.length) === t }, vd: function (e, t) { if (e === t) return !0; if (11 === e.nodeType) return !1; if (t.contains) return t.contains(1 !== e.nodeType ? e.parentNode : e); if (t.compareDocumentPosition) return 16 == (16 & t.compareDocumentPosition(e)); for (; e && e != t;)e = e.parentNode; return !!e }, Sb: function (e) { return _.a.vd(e, e.ownerDocument.documentElement) }, kd: function (e) { return !!_.a.Lb(e, _.a.Sb) }, R: function (e) { return e && e.tagName && e.tagName.toLowerCase() }, Ac: function (e) { return _.onError ? function () { try { return e.apply(this, arguments) } catch (e) { throw _.onError && _.onError(e), e } } : e }, setTimeout: function (e, t) { return setTimeout(_.a.Ac(e), t) }, Gc: function (e) { setTimeout(function () { throw _.onError && _.onError(e), e }, 0) }, B: function (t, n, a) { var r = _.a.Ac(a); if (a = v[n], _.options.useOnlyNativeEvents || a || !e) if (a || "function" != typeof t.addEventListener) { if (void 0 === t.attachEvent) throw Error("Browser doesn't support addEventListener or attachEvent"); function i(e) { r.call(t, e) } var o = "on" + n; t.attachEvent(o, i), _.a.K.za(t, function () { t.detachEvent(o, i) }) } else t.addEventListener(n, r, !1); else h = h || ("function" == typeof e(t).on ? "on" : "bind"), e(t)[h](n, r) }, Fb: function (t, n) { if (!t || !t.nodeType) throw Error("element must be a DOM node when calling triggerEvent"); var a; if (a = !("input" !== _.a.R(t) || !t.type || "click" != n.toLowerCase()) && ("checkbox" == (a = t.type) || "radio" == a), _.options.useOnlyNativeEvents || !e || a) if ("function" == typeof c.createEvent) { if ("function" != typeof t.dispatchEvent) throw Error("The supplied element doesn't support dispatchEvent"); (a = c.createEvent(l[n] || "HTMLEvents")).initEvent(n, !0, !0, b, 0, 0, 0, 0, 0, !1, !1, !1, !1, 0, t), t.dispatchEvent(a) } else if (a && t.click) t.click(); else { if (void 0 === t.fireEvent) throw Error("Browser doesn't support triggering events"); t.fireEvent("on" + n) } else e(t).trigger(n) }, f: function (e) { return _.O(e) ? e() : e }, bc: function (e) { return _.O(e) ? e.v() : e }, Eb: function (t, e, n) { var a; e && ("object" == typeof t.classList ? (a = t.classList[n ? "add" : "remove"], _.a.D(e.match(m), function (e) { a.call(t.classList, e) })) : "string" == typeof t.className.baseVal ? r(t.className, "baseVal", e, n) : r(t, "className", e, n)) }, Bb: function (e, t) { var n = _.a.f(t); null !== n && n !== a || (n = ""); var r = _.h.firstChild(e); !r || 3 != r.nodeType || _.h.nextSibling(r) ? _.h.va(e, [e.ownerDocument.createTextNode(n)]) : r.data = n, _.a.Ad(e) }, Yc: function (e, t) { if (e.name = t, g <= 7) try { var n = e.name.replace(/[&<>'"]/g, function (e) { return "&#" + e.charCodeAt(0) + ";" }); e.mergeAttributes(c.createElement("<input name='" + n + "'/>"), !1) } catch (e) { } }, Ad: function (e) { 9 <= g && ((e = 1 == e.nodeType ? e : e.parentNode).style && (e.style.zoom = e.style.zoom)) }, wd: function (e) { if (g) { var t = e.style.width; e.style.width = 0, e.style.width = t } }, Pd: function (e, t) { e = _.a.f(e), t = _.a.f(t); for (var n = [], a = e; a <= t; a++)n.push(a); return n }, la: function (e) { for (var t = [], n = 0, a = e.length; n < a; n++)t.push(e[n]); return t }, Da: function (e) { return u ? Symbol(e) : e }, Zd: 6 === g, $d: 7 === g, W: g, Lc: function (e, t) { for (var n = _.a.la(e.getElementsByTagName("input")).concat(_.a.la(e.getElementsByTagName("textarea"))), a = "string" == typeof t ? function (e) { return e.name === t } : function (e) { return t.test(e.name) }, r = [], i = n.length - 1; 0 <= i; i--)a(n[i]) && r.push(n[i]); return r }, Nd: function (e) { return "string" == typeof e && (e = _.a.Db(e)) ? f && f.parse ? f.parse(e) : new Function("return " + e)() : null }, hc: function (e, t, n) { if (!f || !f.stringify) throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js"); return f.stringify(_.a.f(e), t, n) }, Od: function (e, t, n) { var a = (n = n || {}).params || {}, r = n.includeFields || this.Jc, i = e; if ("object" == typeof e && "form" === _.a.R(e)) { i = e.action; for (var o = r.length - 1; 0 <= o; o--)for (var u = _.a.Lc(e, r[o]), s = u.length - 1; 0 <= s; s--)a[u[s].name] = u[s].value } t = _.a.f(t); var l = c.createElement("form"); for (var f in l.style.display = "none", l.action = i, l.method = "post", t) (e = c.createElement("input")).type = "hidden", e.name = f, e.value = _.a.hc(_.a.f(t[f])), l.appendChild(e); p(a, function (e, t) { var n = c.createElement("input"); n.type = "hidden", n.name = e, n.value = t, l.appendChild(n) }), c.body.appendChild(l), n.submitter ? n.submitter(l) : l.submit(), setTimeout(function () { l.parentNode.removeChild(l) }, 0) } } }(), _.b("utils", _.a), _.b("utils.arrayForEach", _.a.D), _.b("utils.arrayFirst", _.a.Lb), _.b("utils.arrayFilter", _.a.jb), _.b("utils.arrayGetDistinctValues", _.a.wc), _.b("utils.arrayIndexOf", _.a.A), _.b("utils.arrayMap", _.a.Mb), _.b("utils.arrayPushAll", _.a.Nb), _.b("utils.arrayRemoveItem", _.a.Pa), _.b("utils.cloneNodes", _.a.Ca), _.b("utils.createSymbolOrString", _.a.Da), _.b("utils.extend", _.a.extend), _.b("utils.fieldsIncludedWithJsonPost", _.a.Jc), _.b("utils.getFormFields", _.a.Lc), _.b("utils.objectMap", _.a.Ga), _.b("utils.peekObservable", _.a.bc), _.b("utils.postJson", _.a.Od), _.b("utils.parseJson", _.a.Nd), _.b("utils.registerEventHandler", _.a.B), _.b("utils.stringifyJson", _.a.hc), _.b("utils.range", _.a.Pd), _.b("utils.toggleDomNodeCssClass", _.a.Eb), _.b("utils.triggerEvent", _.a.Fb), _.b("utils.unwrapObservable", _.a.f), _.b("utils.objectForEach", _.a.P), _.b("utils.addOrRemoveItem", _.a.Na), _.b("utils.setTextContent", _.a.Bb), _.b("unwrap", _.a.f), Function.prototype.bind || (Function.prototype.bind = function (t) { var n = this; if (1 === arguments.length) return function () { return n.apply(t, arguments) }; var a = Array.prototype.slice.call(arguments, 1); return function () { var e = a.slice(0); return e.push.apply(e, arguments), n.apply(t, e) } }), _.a.g = new function () { var r, i = 0, o = "__ko__" + (new Date).getTime(), u = {}; return { get: function (e, t) { var n = r(e, !1); return n && n[t] }, set: function (e, t, n) { (e = r(e, n !== a)) && (e[t] = n) }, Ub: function (e, t, n) { return (e = r(e, !0))[t] || (e[t] = n) }, clear: _.a.W ? (r = function (e, t) { var n = e[o]; if (!n || "null" === n || !u[n]) { if (!t) return a; n = e[o] = "ko" + i++, u[n] = {} } return u[n] }, function (e) { var t = e[o]; return !!t && (delete u[t], !(e[o] = null)) }) : (r = function (e, t) { var n = e[o]; return !n && t && (n = e[o] = {}), n }, function (e) { return !!e[o] && (delete e[o], !0) }), Z: function () { return i++ + o } } }, _.b("utils.domData", _.a.g), _.b("utils.domData.clear", _.a.g.clear), _.a.K = new function () { function r(e, t) { var n = _.a.g.get(e, u); return n === a && t && (n = [], _.a.g.set(e, u, n)), n } function i(e) { if (t = r(e, !1)) for (var t = t.slice(0), n = 0; n < t.length; n++)t[n](e); _.a.g.clear(e), _.a.K.cleanExternalData(e), c[e.nodeType] && o(e.childNodes, !0) } function o(e, t) { for (var n, a = [], r = 0; r < e.length; r++)if ((!t || 8 === e[r].nodeType) && (i(a[a.length] = n = e[r]), e[r] !== n)) for (; r-- && -1 == _.a.A(a, e[r]);); } var u = _.a.g.Z(), t = { 1: !0, 8: !0, 9: !0 }, c = { 1: !0, 9: !0 }; return { za: function (e, t) { if ("function" != typeof t) throw Error("Callback must be a function"); r(e, !0).push(t) }, yb: function (e, t) { var n = r(e, !1); n && (_.a.Pa(n, t), 0 == n.length && _.a.g.set(e, u, a)) }, oa: function (e) { return _.u.G(function () { t[e.nodeType] && (i(e), c[e.nodeType] && o(e.getElementsByTagName("*"))) }), e }, removeNode: function (e) { _.oa(e), e.parentNode && e.parentNode.removeChild(e) }, cleanExternalData: function (t) { e && "function" == typeof e.cleanData && e.cleanData([t]) } } }, _.oa = _.a.K.oa, _.removeNode = _.a.K.removeNode, _.b("cleanNode", _.oa), _.b("removeNode", _.removeNode), _.b("utils.domNodeDisposal", _.a.K), _.b("utils.domNodeDisposal.addDisposeCallback", _.a.K.za), _.b("utils.domNodeDisposal.removeDisposeCallback", _.a.K.yb), p = [0, "", ""], m = { thead: h = [1, "<table>", "</table>"], tbody: h, tfoot: h, tr: [2, "<table><tbody>", "</tbody></table>"], td: v = [3, "<table><tbody><tr>", "</tr></tbody></table>"], th: v, option: g = [1, "<select multiple='multiple'>", "</select>"], optgroup: g }, y = _.a.W <= 8, _.a.ua = function (t, n) { var a; if (e) { if (e.parseHTML) a = e.parseHTML(t, n) || []; else if ((a = e.clean([t], n)) && a[0]) { for (var r = a[0]; r.parentNode && 11 !== r.parentNode.nodeType;)r = r.parentNode; r.parentNode && r.parentNode.removeChild(r) } } else { (a = n) || (a = c); r = a.parentWindow || a.defaultView || b; var i, o = _.a.Db(t).toLowerCase(), u = a.createElement("div"); for (o = (i = (o = o.match(/^(?:\x3c!--.*?--\x3e\s*?)*?<([a-z]+)[\s>]/)) && m[o[1]] || p)[0], i = "ignored<div>" + i[1] + t + i[2] + "</div>", "function" == typeof r.innerShiv ? u.appendChild(r.innerShiv(i)) : (y && a.body.appendChild(u), u.innerHTML = i, y && u.parentNode.removeChild(u)); o--;)u = u.lastChild; a = _.a.la(u.lastChild.childNodes) } return a }, _.a.Md = function (e, t) { var n = _.a.ua(e, t); return n.length && n[0].parentElement || _.a.Yb(n) }, _.a.fc = function (t, n) { if (_.a.Tb(t), null !== (n = _.a.f(n)) && n !== a) if ("string" != typeof n && (n = n.toString()), e) e(t).html(n); else for (var r = _.a.ua(n, t.ownerDocument), i = 0; i < r.length; i++)t.appendChild(r[i]) }, _.b("utils.parseHtmlFragment", _.a.ua), _.b("utils.setHtml", _.a.fc), _.aa = (w = {}, { Xb: function (e) { if ("function" != typeof e) throw Error("You can only pass a function to ko.memoization.memoize()"); var t = (4294967296 * (1 + Math.random()) | 0).toString(16).substring(1) + (4294967296 * (1 + Math.random()) | 0).toString(16).substring(1); return w[t] = e, "\x3c!--[ko_memo:" + t + "]--\x3e" }, bd: function (e, t) { var n = w[e]; if (n === a) throw Error("Couldn't find any memo with ID " + e + ". Perhaps it's already been unmemoized."); try { return n.apply(null, t || []), !0 } finally { delete w[e] } }, cd: function (e, t) { var n = []; !function e(t, n) { if (t) if (8 == t.nodeType) null != (a = _.aa.Uc(t.nodeValue)) && n.push({ ud: t, Kd: a }); else if (1 == t.nodeType) for (var a = 0, r = t.childNodes, i = r.length; a < i; a++)e(r[a], n) }(e, n); for (var a = 0, r = n.length; a < r; a++) { var i = n[a].ud, o = [i]; t && _.a.Nb(o, t), _.aa.bd(n[a].Kd, o), i.nodeValue = "", i.parentNode && i.parentNode.removeChild(i) } }, Uc: function (e) { return (e = e.match(/^\[ko_memo\:(.*?)\]$/)) ? e[1] : null } }), _.b("memoization", _.aa), _.b("memoization.memoize", _.aa.Xb), _.b("memoization.unmemoize", _.aa.bd), _.b("memoization.parseMemoText", _.aa.Uc), _.b("memoization.unmemoizeDomNodeAndDescendants", _.aa.cd), _.na = (E = [], T = 1, N = k = 0, { scheduler: b.MutationObserver ? (x = D, C = c.createElement("div"), new MutationObserver(x).observe(C, { attributes: !0 }), function () { C.classList.toggle("foo") }) : c && "onreadystatechange" in c.createElement("script") ? function (e) { var t = c.createElement("script"); t.onreadystatechange = function () { t.onreadystatechange = null, c.documentElement.removeChild(t), t = null, e() }, c.documentElement.appendChild(t) } : function (e) { setTimeout(e, 0) }, zb: function (e) { return k || _.na.scheduler(D), E[k++] = e, T++ }, cancel: function (e) { N <= (e -= T - k) && e < k && (E[e] = null) }, resetForTesting: function () { var e = k - N; return N = k = E.length = 0, e }, Sd: S }), _.b("tasks", _.na), _.b("tasks.schedule", _.na.zb), _.b("tasks.runEarly", _.na.Sd), _.Ta = { throttle: function (t, n) { t.throttleEvaluation = n; var a = null; return _.$({ read: t, write: function (e) { clearTimeout(a), a = _.a.setTimeout(function () { t(e) }, n) } }) }, rateLimit: function (e, t) { var n, a, r; "number" == typeof t ? n = t : (n = t.timeout, a = t.method), e.Hb = !1, r = "function" == typeof a ? a : "notifyWhenChangesStop" == a ? o : i, e.ub(function (e) { return r(e, n, t) }) }, deferred: function (r, e) { if (!0 !== e) throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled."); r.Hb || (r.Hb = !0, r.ub(function (e) { var t, n = !1; return function () { if (!n) { _.na.cancel(t), t = _.na.zb(e); try { n = !0, r.notifySubscribers(a, "dirty") } finally { n = !1 } } } })) }, notify: function (e, t) { e.equalityComparer = "always" == t ? null : n } }; var j = { undefined: 1, boolean: 1, number: 1, string: 1 }; _.b("extenders", _.Ta), _.ic = function (e, t, n) { this.da = e, this.lc = t, this.mc = n, this.Ib = !1, this.fb = this.Jb = null, _.L(this, "dispose", this.s), _.L(this, "disposeWhenNodeIsRemoved", this.l) }, _.ic.prototype.s = function () { this.Ib || (this.fb && _.a.K.yb(this.Jb, this.fb), this.Ib = !0, this.mc(), this.da = this.lc = this.mc = this.Jb = this.fb = null) }, _.ic.prototype.l = function (e) { this.Jb = e, _.a.K.za(e, this.fb = this.s.bind(this)) }, _.T = function () { _.a.Ab(this, M), M.qb(this) }; var A, O, B, M = { qb: function (e) { e.U = { change: [] }, e.sc = 1 }, subscribe: function (e, t, n) { var a = this; n = n || "change"; var r = new _.ic(a, t ? e.bind(t) : e, function () { _.a.Pa(a.U[n], r), a.hb && a.hb(n) }); return a.Qa && a.Qa(n), a.U[n] || (a.U[n] = []), a.U[n].push(r), r }, notifySubscribers: function (e, t) { if ("change" === (t = t || "change") && this.Gb(), this.Wa(t)) { var n = "change" === t && this.ed || this.U[t].slice(0); try { _.u.xc(); for (var a, r = 0; a = n[r]; ++r)a.Ib || a.lc(e) } finally { _.u.end() } } }, ob: function () { return this.sc }, Dd: function (e) { return this.ob() !== e }, Gb: function () { ++this.sc }, ub: function (e) { var n, t, a, r, i, o = this, u = _.O(o); o.gb || (o.gb = o.notifySubscribers, o.notifySubscribers = s); var c = e(function () { o.Ja = !1, u && r === o && (r = o.nc ? o.nc() : o()); var e = t || i && o.sb(a, r); i = t = n = !1, e && o.gb(a = r) }); o.qc = function (e, t) { t && o.Ja || (i = !t), o.ed = o.U.change.slice(0), o.Ja = n = !0, r = e, c() }, o.pc = function (e) { n || (a = e, o.gb(e, "beforeChange")) }, o.rc = function () { i = !0 }, o.gd = function () { o.sb(a, o.v(!0)) && (t = !0) } }, Wa: function (e) { return this.U[e] && this.U[e].length }, Bd: function (e) { if (e) return this.U[e] && this.U[e].length || 0; var n = 0; return _.a.P(this.U, function (e, t) { "dirty" !== e && (n += t.length) }), n }, sb: function (e, t) { return !this.equalityComparer || !this.equalityComparer(e, t) }, toString: function () { return "[object Object]" }, extend: function (e) { var a = this; return e && _.a.P(e, function (e, t) { var n = _.Ta[e]; "function" == typeof n && (a = n(a, t) || a) }), a } }; function $(e) { O.push(A), A = e } function I() { A = O.pop() } _.L(M, "init", M.qb), _.L(M, "subscribe", M.subscribe), _.L(M, "extend", M.extend), _.L(M, "getSubscriptionsCount", M.Bd), _.a.Ba && _.a.setPrototypeOf(M, Function.prototype), _.T.fn = M, _.Qc = function (e) { return null != e && "function" == typeof e.subscribe && "function" == typeof e.notifySubscribers }, _.b("subscribable", _.T), _.b("isSubscribable", _.Qc), _.S = _.u = (O = [], B = 0, { xc: $, end: I, cc: function (e) { if (A) { if (!_.Qc(e)) throw Error("Only subscribable things can act as dependencies"); A.od.call(A.pd, e, e.fd || (e.fd = ++B)) } }, G: function (e, t, n) { try { return $(), e.apply(t, n || []) } finally { I() } }, qa: function () { if (A) return A.o.qa() }, Va: function () { if (A) return A.o.Va() }, Ya: function () { if (A) return A.Ya }, o: function () { if (A) return A.o } }), _.b("computedContext", _.S), _.b("computedContext.getDependenciesCount", _.S.qa), _.b("computedContext.getDependencies", _.S.Va), _.b("computedContext.isInitial", _.S.Ya), _.b("computedContext.registerDependency", _.S.cc), _.b("ignoreDependencies", _.Yd = _.u.G); var R = _.a.Da("_latestValue"); _.ta = function (e) { function t() { return 0 < arguments.length ? (t.sb(t[R], arguments[0]) && (t.ya(), t[R] = arguments[0], t.xa()), this) : (_.u.cc(t), t[R]) } return t[R] = e, _.a.Ba || _.a.extend(t, _.T.fn), _.T.fn.qb(t), _.a.Ab(t, F), _.options.deferUpdates && _.Ta.deferred(t, !0), t }; var F = { equalityComparer: n, v: function () { return this[R] }, xa: function () { this.notifySubscribers(this[R], "spectate"), this.notifySubscribers(this[R]) }, ya: function () { this.notifySubscribers(this[R], "beforeChange") } }; _.a.Ba && _.a.setPrototypeOf(F, _.T.fn); var L = _.ta.Ma = "__ko_proto__"; F[L] = _.ta, _.O = function (e) { if ((e = "function" == typeof e && e[L]) && e !== F[L] && e !== _.o.fn[L]) throw Error("Invalid object that looks like an observable; possibly from another Knockout instance"); return !!e }, _.Za = function (e) { return "function" == typeof e && (e[L] === F[L] || e[L] === _.o.fn[L] && e.Nc) }, _.b("observable", _.ta), _.b("isObservable", _.O), _.b("isWriteableObservable", _.Za), _.b("isWritableObservable", _.Za), _.b("observable.fn", F), _.L(F, "peek", F.v), _.L(F, "valueHasMutated", F.xa), _.L(F, "valueWillMutate", F.ya), _.Ha = function (e) { if ("object" != typeof (e = e || []) || !("length" in e)) throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined."); return e = _.ta(e), _.a.Ab(e, _.Ha.fn), e.extend({ trackArrayChanges: !0 }) }, _.Ha.fn = { remove: function (t) { for (var e = this.v(), n = [], a = "function" != typeof t || _.O(t) ? function (e) { return e === t } : t, r = 0; r < e.length; r++) { var i = e[r]; if (a(i)) { if (0 === n.length && this.ya(), e[r] !== i) throw Error("Array modified during remove; cannot remove item"); n.push(i), e.splice(r, 1), r-- } } return n.length && this.xa(), n }, removeAll: function (t) { if (t !== a) return t ? this.remove(function (e) { return 0 <= _.a.A(t, e) }) : []; var e = this.v(), n = e.slice(0); return this.ya(), e.splice(0, e.length), this.xa(), n }, destroy: function (t) { var e = this.v(), n = "function" != typeof t || _.O(t) ? function (e) { return e === t } : t; this.ya(); for (var a = e.length - 1; 0 <= a; a--) { var r = e[a]; n(r) && (r._destroy = !0) } this.xa() }, destroyAll: function (t) { return t === a ? this.destroy(function () { return !0 }) : t ? this.destroy(function (e) { return 0 <= _.a.A(t, e) }) : [] }, indexOf: function (e) { var t = this(); return _.a.A(t, e) }, replace: function (e, t) { var n = this.indexOf(e); 0 <= n && (this.ya(), this.v()[n] = t, this.xa()) }, sorted: function (e) { var t = this().slice(0); return e ? t.sort(e) : t.sort() }, reversed: function () { return this().slice(0).reverse() } }, _.a.Ba && _.a.setPrototypeOf(_.Ha.fn, _.ta.fn), _.a.D("pop push reverse shift sort splice unshift".split(" "), function (n) { _.Ha.fn[n] = function () { var e = this.v(); this.ya(), this.zc(e, n, arguments); var t = e[n].apply(e, arguments); return this.xa(), t === e ? this : t } }), _.a.D(["slice"], function (t) { _.Ha.fn[t] = function () { var e = this(); return e[t].apply(e, arguments) } }), _.Pc = function (e) { return _.O(e) && "function" == typeof e.remove && "function" == typeof e.push }, _.b("observableArray", _.Ha), _.b("isObservableArray", _.Pc), _.Ta.trackArrayChanges = function (n, e) { if (n.Ob = {}, e && "object" == typeof e && _.a.extend(n.Ob, e), n.Ob.sparse = !0, !n.zc) { var r, i, o, f = !1, d = null, p = 0, u = n.Qa, t = n.hb; n.Qa = function (e) { function t() { if (p) { var e, t = [].concat(n.v() || []); n.Wa("arrayChange") && ((!d || 1 < p) && (d = _.a.Pb(o, t, n.Ob)), e = d), o = t, d = null, p = 0, e && e.length && n.notifySubscribers(e, "arrayChange") } } u && u.call(n, e), "arrayChange" === e && (f ? t() : (f = !0, i = n.subscribe(function () { ++p }, null, "spectate"), o = [].concat(n.v() || []), d = null, r = n.subscribe(t))) }, n.hb = function (e) { t && t.call(n, e), "arrayChange" !== e || n.Wa("arrayChange") || (r && r.s(), i && i.s(), i = r = null, f = !1, o = a) }, n.zc = function (e, t, n) { function a(e, t, n) { return r[r.length] = { status: e, value: t, index: n } } if (f && !p) { var r = [], i = e.length, o = n.length, u = 0; switch (t) { case "push": u = i; case "unshift": for (t = 0; t < o; t++)a("added", n[t], u + t); break; case "pop": u = i - 1; case "shift": i && a("deleted", e[u], u); break; case "splice": t = Math.min(Math.max(0, n[0] < 0 ? i + n[0] : n[0]), i); i = 1 === o ? i : Math.min(t + (n[1] || 0), i), o = t + o - 2, u = Math.max(i, o); for (var c = [], s = [], l = 2; t < u; ++t, ++l)t < i && s.push(a("deleted", e[t], t)), t < o && c.push(a("added", n[l], t)); _.a.Kc(s, c); break; default: return }d = r } } } }; var V = _.a.Da("_state"); _.o = _.$ = function (e, t, n) { function r() { if (0 < arguments.length) { if ("function" != typeof i) throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters."); return i.apply(o.nb, arguments), this } return o.ra || _.u.cc(r), (o.ka || o.J && r.Xa()) && r.ha(), o.X } if ("object" == typeof e ? n = e : (n = n || {}, e && (n.read = e)), "function" != typeof n.read) throw Error("Pass a function that returns the value of the ko.computed"); var i = n.write, o = { X: a, sa: !0, ka: !0, rb: !1, jc: !1, ra: !1, wb: !1, J: !1, Wc: n.read, nb: t || n.owner, l: n.disposeWhenNodeIsRemoved || n.l || null, Sa: n.disposeWhen || n.Sa, Rb: null, I: {}, V: 0, Ic: null }; return r[V] = o, r.Nc = "function" == typeof i, _.a.Ba || _.a.extend(r, _.T.fn), _.T.fn.qb(r), _.a.Ab(r, P), n.pure ? (o.wb = !0, o.J = !0, _.a.extend(r, H)) : n.deferEvaluation && _.a.extend(r, U), _.options.deferUpdates && _.Ta.deferred(r, !0), o.l && (o.jc = !0, o.l.nodeType || (o.l = null)), o.J || n.deferEvaluation || r.ha(), o.l && r.ja() && _.a.K.za(o.l, o.Rb = function () { r.s() }), r }; var P = { equalityComparer: n, qa: function () { return this[V].V }, Va: function () { var n = []; return _.a.P(this[V].I, function (e, t) { n[t.Ka] = t.da }), n }, Vb: function (t) { if (!this[V].V) return !1; var e = this.Va(); return -1 !== _.a.A(e, t) || !!_.a.Lb(e, function (e) { return e.Vb && e.Vb(t) }) }, uc: function (e, t, n) { if (this[V].wb && t === this) throw Error("A 'pure' computed must not be called recursively"); (this[V].I[e] = n).Ka = this[V].V++, n.La = t.ob() }, Xa: function () { var e, t, n = this[V].I; for (e in n) if (Object.prototype.hasOwnProperty.call(n, e) && (t = n[e], this.Ia && t.da.Ja || t.da.Dd(t.La))) return !0 }, Jd: function () { this.Ia && !this[V].rb && this.Ia(!1) }, ja: function () { var e = this[V]; return e.ka || 0 < e.V }, Rd: function () { this.Ja ? this[V].ka && (this[V].sa = !0) : this.Hc() }, $c: function (e) { if (e.Hb) { var t = e.subscribe(this.Jd, this, "dirty"), n = e.subscribe(this.Rd, this); return { da: e, s: function () { t.s(), n.s() } } } return e.subscribe(this.Hc, this) }, Hc: function () { var e = this, t = e.throttleEvaluation; t && 0 <= t ? (clearTimeout(this[V].Ic), this[V].Ic = _.a.setTimeout(function () { e.ha(!0) }, t)) : e.Ia ? e.Ia(!0) : e.ha(!0) }, ha: function (e) { var t = this[V], n = t.Sa, a = !1; if (!t.rb && !t.ra) { if (t.l && !_.a.Sb(t.l) || n && n()) { if (!t.jc) return void this.s() } else t.jc = !1; t.rb = !0; try { a = this.zd(e) } finally { t.rb = !1 } return a } }, zd: function (e) { var t = this[V], n = !1, r = t.wb ? a : !t.V; n = { qd: this, mb: t.I, Qb: t.V }; _.u.xc({ pd: n, od: l, o: this, Ya: r }), t.I = {}, t.V = 0; var i = this.yd(t, n); return (n = t.V ? this.sb(t.X, i) : (this.s(), !0)) && (t.J ? this.Gb() : this.notifySubscribers(t.X, "beforeChange"), t.X = i, this.notifySubscribers(t.X, "spectate"), !t.J && e && this.notifySubscribers(t.X), this.rc && this.rc()), r && this.notifySubscribers(t.X, "awake"), n }, yd: function (e, t) { try { var n = e.Wc; return e.nb ? n.call(e.nb) : n() } finally { _.u.end(), t.Qb && !e.J && _.a.P(t.mb, r), e.sa = e.ka = !1 } }, v: function (e) { var t = this[V]; return (t.ka && (e || !t.V) || t.J && this.Xa()) && this.ha(), t.X }, ub: function (e) { _.T.fn.ub.call(this, e), this.nc = function () { return this[V].J || (this[V].sa ? this.ha() : this[V].ka = !1), this[V].X }, this.Ia = function (e) { this.pc(this[V].X), this[V].ka = !0, e && (this[V].sa = !0), this.qc(this, !e) } }, s: function () { var e = this[V]; !e.J && e.I && _.a.P(e.I, function (e, t) { t.s && t.s() }), e.l && e.Rb && _.a.K.yb(e.l, e.Rb), e.I = a, e.V = 0, e.ra = !0, e.sa = !1, e.ka = !1, e.J = !1, e.l = a, e.Sa = a, e.Wc = a, this.Nc || (e.nb = a) } }, H = { Qa: function (e) { var r = this, i = r[V]; if (!i.ra && i.J && "change" == e) { if (i.J = !1, i.sa || r.Xa()) i.I = null, i.V = 0, r.ha() && r.Gb(); else { var n = []; _.a.P(i.I, function (e, t) { n[t.Ka] = e }), _.a.D(n, function (e, t) { var n = i.I[e], a = r.$c(n.da); a.Ka = t, a.La = n.La, i.I[e] = a }), r.Xa() && r.ha() && r.Gb() } i.ra || r.notifySubscribers(i.X, "awake") } }, hb: function (e) { var n = this[V]; n.ra || "change" != e || this.Wa("change") || (_.a.P(n.I, function (e, t) { t.s && (n.I[e] = { da: t.da, Ka: t.Ka, La: t.La }, t.s()) }), n.J = !0, this.notifySubscribers(a, "asleep")) }, ob: function () { var e = this[V]; return e.J && (e.sa || this.Xa()) && this.ha(), _.T.fn.ob.call(this) } }, U = { Qa: function (e) { "change" != e && "beforeChange" != e || this.v() } }; _.a.Ba && _.a.setPrototypeOf(P, _.T.fn); var J, z, W, q, G, K, Y, Z, X, Q, ee, te, ne, ae, re, ie = _.ta.Ma; function oe(r, i, o) { if (o = o || new ue, "object" != typeof (r = i(r)) || null === r || r === a || r instanceof RegExp || r instanceof Date || r instanceof String || r instanceof Number || r instanceof Boolean) return r; var u = r instanceof Array ? [] : {}; return o.save(r, u), function (e, t) { if (e instanceof Array) { for (var n = 0; n < e.length; n++)t(n); "function" == typeof e.toJSON && t("toJSON") } else for (n in e) t(n) }(r, function (e) { var t = i(r[e]); switch (typeof t) { case "boolean": case "number": case "string": case "function": u[e] = t; break; case "object": case "undefined": var n = o.get(t); u[e] = n !== a ? n : oe(t, i, o) } }), u } function ue() { this.keys = [], this.values = [] } function ce(e) { 123 === (e = _.a.Db(e)).charCodeAt(0) && (e = e.slice(1, -1)); var t, n = [], a = (e += "\n,").match(W), r = [], i = 0; if (1 < a.length) { for (var o, u = 0; o = a[u]; ++u) { var c = o.charCodeAt(0); if (44 === c) { if (i <= 0) { n.push(t && r.length ? { key: t, value: r.join("") } : { unknown: t || r.join("") }), t = i = 0, r = []; continue } } else if (58 === c) { if (!i && !t && 1 === r.length) { t = r.pop(); continue } } else { if (47 === c && 1 < o.length && (47 === o.charCodeAt(1) || 42 === o.charCodeAt(1))) continue; 47 === c && u && 1 < o.length ? (c = a[u - 1].match(q)) && !G[c[0]] && (a = (e = e.substr(e.indexOf(o) + 1)).match(W), u = -1, o = "/") : 40 === c || 123 === c || 91 === c ? ++i : 41 === c || 125 === c || 93 === c ? --i : t || r.length || 34 !== c && 39 !== c || (o = o.slice(1, -1)) } r.push(o) } if (0 < i) throw Error("Unbalanced parentheses, braces, or brackets") } return n } function se(e) { return 8 == e.nodeType && Z.test(Y ? e.text : e.nodeValue) } function le(e) { return 8 == e.nodeType && X.test(Y ? e.text : e.nodeValue) } function fe(e, t) { for (var n = e, a = 1, r = []; n = n.nextSibling;) { if (le(n) && (_.a.g.set(n, ee, !0), 0 === --a)) return r; r.push(n), se(n) && a++ } if (!t) throw Error("Cannot find closing comment tag to match: " + e.nodeValue); return null } function de(e, t) { var n = fe(e, t); return n ? 0 < n.length ? n[n.length - 1].nextSibling : e.nextSibling : null } function pe(a, e) { var r, n, i, o = Object.prototype.hasOwnProperty.call(ne, a) ? ne[a] : te; o ? o.subscribe(e) : ((o = ne[a] = new _.T).subscribe(e), i = function (e, t) { var n = !(!t || !t.synchronous); ae[a] = { definition: e, Gd: n }, delete ne[a], r || n ? o.notifySubscribers(e) : _.na.zb(function () { o.notifySubscribers(e) }) }, he("getConfig", [n = a], function (t) { t ? he("loadComponent", [n, t], function (e) { i(e, t) }) : i(null, null) }), r = !0) } function he(t, n, a, r) { var e = (r = r || _.j.loaders.slice(0)).shift(); if (e) { var i = e[t]; if (i) { var o = !1; if (i.apply(e, n.concat(function (e) { o ? a(null) : null !== e ? a(e) : he(t, n, a, r) })) !== te && (o = !0, !e.suppressLoaderExceptions)) throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.") } else he(t, n, a, r) } else a(null) } P[ie] = _.o, _.Oc = function (e) { return "function" == typeof e && e[ie] === P[ie] }, _.Fd = function (e) { return _.Oc(e) && e[V] && e[V].wb }, _.b("computed", _.o), _.b("dependentObservable", _.o), _.b("isComputed", _.Oc), _.b("isPureComputed", _.Fd), _.b("computed.fn", P), _.L(P, "peek", P.v), _.L(P, "dispose", P.s), _.L(P, "isActive", P.ja), _.L(P, "getDependenciesCount", P.qa), _.L(P, "getDependencies", P.Va), _.xb = function (e, t) { return "function" == typeof e ? _.o(e, t, { pure: !0 }) : ((e = _.a.extend({}, e)).pure = !0, _.o(e, t)) }, _.b("pureComputed", _.xb), _.ad = function (e) { if (0 == arguments.length) throw Error("When calling ko.toJS, pass the object you want to convert."); return oe(e, function (e) { for (var t = 0; _.O(e) && t < 10; t++)e = e(); return e }) }, _.toJSON = function (e, t, n) { return e = _.ad(e), _.a.hc(e, t, n) }, ue.prototype = { constructor: ue, save: function (e, t) { var n = _.a.A(this.keys, e); 0 <= n ? this.values[n] = t : (this.keys.push(e), this.values.push(t)) }, get: function (e) { return 0 <= (e = _.a.A(this.keys, e)) ? this.values[e] : a } }, _.b("toJS", _.ad), _.b("toJSON", _.toJSON), _.Wd = function (a, e, r) { function t(t) { var e = _.xb(a, r).extend({ ma: "always" }), n = e.subscribe(function (e) { e && (n.s(), t(e)) }); return e.notifySubscribers(e.v()), n } return "function" != typeof Promise || e ? t(e.bind(r)) : new Promise(t) }, _.b("when", _.Wd), _.w = { M: function (e) { switch (_.a.R(e)) { case "option": return !0 === e.__ko__hasDomDataOptionValue__ ? _.a.g.get(e, _.c.options.$b) : _.a.W <= 7 ? e.getAttributeNode("value") && e.getAttributeNode("value").specified ? e.value : e.text : e.value; case "select": return 0 <= e.selectedIndex ? _.w.M(e.options[e.selectedIndex]) : a; default: return e.value } }, cb: function (e, t, n) { switch (_.a.R(e)) { case "option": "string" == typeof t ? (_.a.g.set(e, _.c.options.$b, a), "__ko__hasDomDataOptionValue__" in e && delete e.__ko__hasDomDataOptionValue__, e.value = t) : (_.a.g.set(e, _.c.options.$b, t), e.__ko__hasDomDataOptionValue__ = !0, e.value = "number" == typeof t ? t : ""); break; case "select": "" !== t && null !== t || (t = a); for (var r, i = -1, o = 0, u = e.options.length; o < u; ++o)if ((r = _.w.M(e.options[o])) == t || "" === r && t === a) { i = o; break } (n || 0 <= i || t === a && 1 < e.size) && (e.selectedIndex = i, 6 === _.a.W && _.a.setTimeout(function () { e.selectedIndex = i }, 0)); break; default: null !== t && t !== a || (t = ""), e.value = t } } }, _.b("selectExtensions", _.w), _.b("selectExtensions.readValue", _.w.M), _.b("selectExtensions.writeValue", _.w.cb), _.m = (J = ["true", "false", "null", "undefined"], z = /^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i, W = RegExp("\"(?:\\\\.|[^\"])*\"|'(?:\\\\.|[^'])*'|`(?:\\\\.|[^`])*`|/\\*(?:[^*]|\\*+[^*/])*\\*+/|//.*\n|/(?:\\\\.|[^/])+/w*|[^\\s:,/][^,\"'`{}()/:[\\]]*[^\\s,\"'`{}()/:[\\]]|[^\\s]", "g"), q = /[\])"'A-Za-z0-9_$]+$/, G = { in: 1, return: 1, typeof: 1 }, { Ra: [], wa: K = {}, ac: ce, vb: function (e, t) { function r(e, t) { var n; if (!c) { var a = _.getBindingHandler(e); if (a && a.preprocess && !(t = a.preprocess(t, e, r))) return; (a = K[e]) && (n = t, a = n = !(0 <= _.a.A(J, n)) && null !== (a = n.match(z)) && (a[1] ? "Object(" + a[1] + ")" + a[2] : n)), a && o.push("'" + ("string" == typeof K[e] ? K[e] : e) + "':function(_z){" + n + "=_z}") } u && (t = "function(){return " + t + " }"), i.push("'" + e + "':" + t) } var i = [], o = [], u = (t = t || {}).valueAccessors, c = t.bindingParams, n = "string" == typeof e ? ce(e) : e; return _.a.D(n, function (e) { r(e.key || e.unknown, e.value) }), o.length && r("_ko_property_writers", "{" + o.join(",") + " }"), i.join(",") }, Id: function (e, t) { for (var n = 0; n < e.length; n++)if (e[n].key == t) return !0; return !1 }, eb: function (e, t, n, a, r) { e && _.O(e) ? !_.Za(e) || r && e.v() === a || e(a) : (e = t.get("_ko_property_writers")) && e[n] && e[n](a) } }), _.b("expressionRewriting", _.m), _.b("expressionRewriting.bindingRewriteValidators", _.m.Ra), _.b("expressionRewriting.parseObjectLiteral", _.m.ac), _.b("expressionRewriting.preProcessBindings", _.m.vb), _.b("expressionRewriting._twoWayBindings", _.m.wa), _.b("jsonExpressionRewriting", _.m), _.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson", _.m.vb), Y = c && "\x3c!--test--\x3e" === c.createComment("test").text, Z = Y ? /^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/ : /^\s*ko(?:\s+([\s\S]+))?\s*$/, X = Y ? /^\x3c!--\s*\/ko\s*--\x3e$/ : /^\s*\/ko\s*$/, Q = { ul: !0, ol: !0 }, ee = "__ko_matchedEndComment__", _.h = { ea: {}, childNodes: function (e) { return se(e) ? fe(e) : e.childNodes }, Ea: function (e) { if (se(e)) for (var t = 0, n = (e = _.h.childNodes(e)).length; t < n; t++)_.removeNode(e[t]); else _.a.Tb(e) }, va: function (e, t) { if (se(e)) { _.h.Ea(e); for (var n = e.nextSibling, a = 0, r = t.length; a < r; a++)n.parentNode.insertBefore(t[a], n) } else _.a.va(e, t) }, Vc: function (e, t) { var n; se(e) ? (n = e.nextSibling, e = e.parentNode) : n = e.firstChild, n ? t !== n && e.insertBefore(t, n) : e.appendChild(t) }, Wb: function (e, t, n) { n ? (n = n.nextSibling, se(e) && (e = e.parentNode), n ? t !== n && e.insertBefore(t, n) : e.appendChild(t)) : _.h.Vc(e, t) }, firstChild: function (e) { if (se(e)) return !e.nextSibling || le(e.nextSibling) ? null : e.nextSibling; if (e.firstChild && le(e.firstChild)) throw Error("Found invalid end comment, as the first child of " + e); return e.firstChild }, nextSibling: function (e) { if (se(e) && (e = de(e)), e.nextSibling && le(e.nextSibling)) { var t = e.nextSibling; if (le(t) && !_.a.g.get(t, ee)) throw Error("Found end comment without a matching opening comment, as child of " + e); return null } return e.nextSibling }, Cd: se, Vd: function (e) { return (e = (Y ? e.text : e.nodeValue).match(Z)) ? e[1] : null }, Sc: function (e) { if (Q[_.a.R(e)]) { var t = e.firstChild; if (t) do { if (1 === t.nodeType) { var n, a = null; if (n = t.firstChild) do { if (a) a.push(n); else if (se(n)) { var r = de(n, !0); r ? n = r : a = [n] } else le(n) && (a = [n]) } while (n = n.nextSibling); if (n = a) for (a = t.nextSibling, r = 0; r < n.length; r++)a ? e.insertBefore(n[r], a) : e.appendChild(n[r]) } } while (t = t.nextSibling) } } }, _.b("virtualElements", _.h), _.b("virtualElements.allowedBindings", _.h.ea), _.b("virtualElements.emptyNode", _.h.Ea), _.b("virtualElements.insertAfter", _.h.Wb), _.b("virtualElements.prepend", _.h.Vc), _.b("virtualElements.setDomNodeChildren", _.h.va), _.ga = function () { this.nd = {} }, _.a.extend(_.ga.prototype, { nodeHasBindings: function (e) { switch (e.nodeType) { case 1: return null != e.getAttribute("data-bind") || _.j.getComponentNameForNode(e); case 8: return _.h.Cd(e); default: return !1 } }, getBindings: function (e, t) { var n = (n = this.getBindingsString(e, t)) ? this.parseBindingsString(n, t, e) : null; return _.j.tc(n, e, t, !1) }, getBindingAccessors: function (e, t) { var n = (n = this.getBindingsString(e, t)) ? this.parseBindingsString(n, t, e, { valueAccessors: !0 }) : null; return _.j.tc(n, e, t, !0) }, getBindingsString: function (e) { switch (e.nodeType) { case 1: return e.getAttribute("data-bind"); case 8: return _.h.Vd(e); default: return null } }, parseBindingsString: function (t, e, n, a) { try { var r, i = this.nd, o = t + (a && a.valueAccessors || ""); if (!(r = i[o])) { var u, c = "with($context){with($data||{}){return{" + _.m.vb(t, a) + "}}}"; u = new Function("$context", "$element", c), r = i[o] = u } return r(e, n) } catch (e) { throw e.message = "Unable to parse bindings.\nBindings value: " + t + "\nMessage: " + e.message, e } } }), _.ga.instance = new _.ga, _.b("bindingProvider", _.ga), function () { function r(e) { var t = (e = _.a.g.get(e, C)) && e.N; t && (e.N = null, t.Tc()) } function i(e, t, n) { this.node = e, this.yc = t, this.kb = [], this.H = !1, t.N || _.a.K.za(e, r), n && n.N && (n.N.kb.push(e), this.Kb = n) } function o(e) { return function () { return e } } function m(e) { return e() } function u(n) { return _.a.Ga(_.u.G(n), function (e, t) { return function () { return n()[t] } }) } function y(e, t) { return u(this.getBindings.bind(this, e, t)) } function s(e, t) { var n = _.h.firstChild(t); if (n) { var a, r = _.ga.instance, i = r.preprocessNode; if (i) { for (; a = n;)n = _.h.nextSibling(a), i.call(r, a); n = _.h.firstChild(t) } for (; a = n;)n = _.h.nextSibling(a), l(e, a) } _.i.ma(t, _.i.H) } function l(e, t) { var n = e, a = 1 === t.nodeType; a && _.h.Sc(t), (a || _.ga.instance.nodeHasBindings(t)) && (n = f(t, null, e).bindingContextForDescendants), n && !h[_.a.R(t)] && s(n, t) } function f(i, e, t) { var o, n = _.a.g.Ub(i, C, {}), r = n.hd; if (!e) { if (r) throw Error("You cannot apply bindings multiple times to the same element."); n.hd = !0 } if (r || (n.context = t), n.Zb || (n.Zb = {}), e && "function" != typeof e) o = e; else { var u = _.ga.instance, c = u.getBindingAccessors || y, s = _.$(function () { return (o = e ? e(t, i) : c.call(u, i, t)) && (t[w] && t[w](), t[x] && t[x]()), o }, null, { l: i }); o && s.ja() || (s = null) } var l, f, d, p, h, b = t; if (o) { function v() { return _.a.Ga(s ? s() : o, m) } var g = s ? function (e) { return function () { return m(s()[e]) } } : function (e) { return o[e] }; v.get = function (e) { return o[e] && m(g(e)) }, v.has = function (e) { return e in o }, _.i.H in o && _.i.subscribe(i, _.i.H, function () { var e = (0, o[_.i.H])(); if (e) { var t = _.h.childNodes(i); t.length && e(t, _.Ec(t[0])) } }), _.i.pa in o && (b = _.i.Cb(i, t), _.i.subscribe(i, _.i.pa, function () { var e = (0, o[_.i.pa])(); e && _.h.firstChild(i) && e(i) })), f = o, d = [], p = {}, h = [], _.a.P(f, function t(e) { if (!p[e]) { var n = _.getBindingHandler(e); n && (n.after && (h.push(e), _.a.D(n.after, function (e) { if (f[e]) { if (-1 !== _.a.A(h, e)) throw Error("Cannot combine the following bindings, because they have a cyclic dependency: " + h.join(", ")); t(e) } }), h.length--), d.push({ key: e, Mc: n })), p[e] = !0 } }), n = d, _.a.D(n, function (e) { var t = e.Mc.init, n = e.Mc.update, r = e.key; if (8 === i.nodeType && !_.h.ea[r]) throw Error("The binding '" + r + "' cannot be used with virtual elements"); try { "function" == typeof t && _.u.G(function () { var e = t(i, g(r), v, b.$data, b); if (e && e.controlsDescendantBindings) { if (l !== a) throw Error("Multiple bindings (" + l + " and " + r + ") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element."); l = r } }), "function" == typeof n && _.$(function () { n(i, g(r), v, b.$data, b) }, null, { l: i }) } catch (e) { throw e.message = 'Unable to process binding "' + r + ": " + o[r] + '"\nMessage: ' + e.message, e } }) } return { shouldBindDescendants: n = l === a, bindingContextForDescendants: n && b } } function d(e, t) { return e && e instanceof _.fa ? e : new _.fa(e, a, a, t) } var w = _.a.Da("_subscribable"), p = _.a.Da("_ancestorBindingInfo"), x = _.a.Da("_dataDependency"); _.c = {}; var h = { script: !0, textarea: !0, template: !0 }; _.getBindingHandler = function (e) { return _.c[e] }; var v = {}; _.fa = function (e, n, r, i, t) { function o() { var e = f ? l() : l, t = _.a.f(e); return n ? (_.a.extend(c, n), p in n && (c[p] = n[p])) : (c.$parents = [], c.$root = t, c.ko = _), c[w] = u, s ? t = c.$data : (c.$rawData = e, c.$data = t), r && (c[r] = t), i && i(c, n, t), n && n[w] && !_.S.o().Vb(n[w]) && n[w](), d && (c[x] = d), c.$data } var u, c = this, s = e === v, l = s ? a : e, f = "function" == typeof l && !_.O(l), d = t && t.dataDependency; t && t.exportDependencies ? o() : ((u = _.xb(o)).v(), u.ja() ? u.equalityComparer = null : c[w] = a) }, _.fa.prototype.createChildContext = function (t, n, a, e) { if (!e && n && "object" == typeof n && (n = (e = n).as, a = e.extend), n && e && e.noChildContext) { var r = "function" == typeof t && !_.O(t); return new _.fa(v, this, null, function (e) { a && a(e), e[n] = r ? t() : t }, e) } return new _.fa(t, this, n, function (e, t) { e.$parentContext = t, e.$parent = t.$data, e.$parents = (t.$parents || []).slice(0), e.$parents.unshift(e.$parent), a && a(e) }, e) }, _.fa.prototype.extend = function (t, e) { return new _.fa(v, this, null, function (e) { _.a.extend(e, "function" == typeof t ? t(e) : t) }, e) }; var C = _.a.g.Z(); i.prototype.Tc = function () { this.Kb && this.Kb.N && this.Kb.N.sd(this.node) }, i.prototype.sd = function (e) { _.a.Pa(this.kb, e), !this.kb.length && this.H && this.Cc() }, i.prototype.Cc = function () { this.H = !0, this.yc.N && !this.kb.length && (this.yc.N = null, _.a.K.yb(this.node, r), _.i.ma(this.node, _.i.pa), this.Tc()) }, _.i = { H: "childrenComplete", pa: "descendantsComplete", subscribe: function (e, t, n, a, r) { var i = _.a.g.Ub(e, C, {}); return i.Fa || (i.Fa = new _.T), r && r.notifyImmediately && i.Zb[t] && _.u.G(n, a, [e]), i.Fa.subscribe(n, a, t) }, ma: function (e, t) { var n = _.a.g.get(e, C); if (n && (n.Zb[t] = !0, n.Fa && n.Fa.notifySubscribers(e, t), t == _.i.H)) if (n.N) n.N.Cc(); else if (n.N === a && n.Fa && n.Fa.Wa(_.i.pa)) throw Error("descendantsComplete event not supported for bindings on this node") }, Cb: function (e, t) { var n = _.a.g.Ub(e, C, {}); return n.N || (n.N = new i(e, n, t[p])), t[p] == n ? t : t.extend(function (e) { e[p] = n }) } }, _.Td = function (e) { return (e = _.a.g.get(e, C)) && e.context }, _.ib = function (e, t, n) { return 1 === e.nodeType && _.h.Sc(e), f(e, t, d(n)) }, _.ld = function (e, t, n) { return n = d(n), _.ib(e, (r = n, i = e, "function" == typeof (a = t) ? u(a.bind(null, r, i)) : _.a.Ga(a, o)), n); var a, r, i }, _.Oa = function (e, t) { 1 !== t.nodeType && 8 !== t.nodeType || s(d(e), t) }, _.vc = function (t, n, a) { if (!e && b.jQuery && (e = b.jQuery), arguments.length < 2) { if (!(n = c.body)) throw Error("ko.applyBindings: could not find document.body; has the document been loaded?") } else if (!n || 1 !== n.nodeType && 8 !== n.nodeType) throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node"); l(d(t, a), n) }, _.Dc = function (e) { return !e || 1 !== e.nodeType && 8 !== e.nodeType ? a : _.Td(e) }, _.Ec = function (e) { return (e = _.Dc(e)) ? e.$data : a }, _.b("bindingHandlers", _.c), _.b("bindingEvent", _.i), _.b("bindingEvent.subscribe", _.i.subscribe), _.b("bindingEvent.startPossiblyAsyncContentBinding", _.i.Cb), _.b("applyBindings", _.vc), _.b("applyBindingsToDescendants", _.Oa), _.b("applyBindingAccessorsToNode", _.ib), _.b("applyBindingsToNode", _.ld), _.b("contextFor", _.Dc), _.b("dataFor", _.Ec) }(), ne = {}, ae = {}, _.j = { get: function (e, t) { var n = Object.prototype.hasOwnProperty.call(ae, e) ? ae[e] : te; n ? n.Gd ? _.u.G(function () { t(n.definition) }) : _.na.zb(function () { t(n.definition) }) : pe(e, t) }, Bc: function (e) { delete ae[e] }, oc: he }, _.j.loaders = [], _.b("components", _.j), _.b("components.get", _.j.get), _.b("components.clearCachedDefinition", _.j.Bc), function () { function r(e) { switch (_.a.R(e)) { case "script": return _.a.ua(e.text); case "textarea": return _.a.ua(e.value); case "template": if (i(e.content)) return _.a.Ca(e.content.childNodes) }return _.a.Ca(e.childNodes) } function i(e) { return b.DocumentFragment ? e instanceof DocumentFragment : e && 11 === e.nodeType } function d(e, t, n) { "string" == typeof t.require ? u || b.require ? (u || b.require)([t.require], function (e) { e && "object" == typeof e && e.Xd && e.default && (e = e.default), n(e) }) : e("Uses require, but no AMD loader is present") : n(t) } function o(t) { return function (e) { throw Error("Component '" + t + "': " + e) } } var n = {}; _.j.register = function (e, t) { if (!t) throw Error("Invalid configuration for " + e); if (_.j.tb(e)) throw Error("Component " + e + " is already registered"); n[e] = t }, _.j.tb = function (e) { return Object.prototype.hasOwnProperty.call(n, e) }, _.j.unregister = function (e) { delete n[e], _.j.Bc(e) }, _.j.Fc = { getConfig: function (e, t) { t(_.j.tb(e) ? n[e] : null) }, loadComponent: function (s, e, l) { var f = o(s); d(f, e, function (e) { function t() { 0 == --u && i(o) } var n, a, r, i, o, u, c; n = s, a = f, i = l, o = {}, u = 2, c = (r = e).template, r = r.viewModel, c ? d(a, c, function (e) { _.j.oc("loadTemplate", [n, e], function (e) { o.template = e, t() }) }) : t(), r ? d(a, r, function (e) { _.j.oc("loadViewModel", [n, e], function (e) { o[p] = e, t() }) }) : t() }) }, loadTemplate: function (e, t, n) { if (e = o(e), "string" == typeof t) n(_.a.ua(t)); else if (t instanceof Array) n(t); else if (i(t)) n(_.a.la(t.childNodes)); else if (t.element) if (t = t.element, b.HTMLElement ? t instanceof HTMLElement : t && t.tagName && 1 === t.nodeType) n(r(t)); else if ("string" == typeof t) { var a = c.getElementById(t); a ? n(r(a)) : e("Cannot find element with ID " + t) } else e("Unknown element type: " + t); else e("Unknown template value: " + t) }, loadViewModel: function (e, t, n) { !function e(t, n, a) { if ("function" == typeof n) a(function (e) { return new n(e) }); else if ("function" == typeof n[p]) a(n[p]); else if ("instance" in n) { var r = n.instance; a(function () { return r }) } else "viewModel" in n ? e(t, n.viewModel, a) : t("Unknown viewModel value: " + n) }(o(e), t, n) } }; var p = "createViewModel"; _.b("components.register", _.j.register), _.b("components.isRegistered", _.j.tb), _.b("components.unregister", _.j.unregister), _.b("components.defaultLoader", _.j.Fc), _.j.loaders.push(_.j.Fc), _.j.dd = n }(), function () { _.j.getComponentNameForNode = function (e) { var t = _.a.R(e); if (_.j.tb(t) && (-1 != t.indexOf("-") || "[object HTMLUnknownElement]" == "" + e || _.a.W <= 8 && e.tagName === t)) return t }, _.j.tc = function (e, t, n, a) { if (1 === t.nodeType) { var r = _.j.getComponentNameForNode(t); if (r) { if ((e = e || {}).component) throw Error('Cannot use the "component" binding on a custom element matching a component'); var i = { name: r, params: function (n, e) { if (t = n.getAttribute("params")) { var t = o.parseBindingsString(t, e, n, { valueAccessors: !0, bindingParams: !0 }), a = (t = _.a.Ga(t, function (e) { return _.o(e, null, { l: n }) }), _.a.Ga(t, function (t) { var e = t.v(); return t.ja() ? _.o({ read: function () { return _.a.f(t()) }, write: _.Za(e) && function (e) { t()(e) }, l: n }) : e })); return Object.prototype.hasOwnProperty.call(a, "$raw") || (a.$raw = t), a } return { $raw: {} } }(t, n) }; e.component = a ? function () { return i } : i } } return e }; var a, t, o = new _.ga; _.a.W < 9 && (_.j.register = (t = _.j.register, function (e) { return t.apply(this, arguments) }), c.createDocumentFragment = (a = c.createDocumentFragment, function () { var e, t = a(), n = _.j.dd; for (e in n); return t })) }(), re = 0, _.c.component = { init: function (l, t, e, n, a) { function f() { var e = d && d.dispose; "function" == typeof e && e.call(d), h && h.s(), p = d = h = null } var d, p, h, b = _.a.la(_.h.childNodes(l)); return _.h.Ea(l), _.a.K.za(l, f), _.o(function () { var o, u, e = _.a.f(t()); if ("string" == typeof e ? o = e : (o = _.a.f(e.name), u = _.a.f(e.params)), !o) throw Error("No component name specified"); var c = _.i.Cb(l, a), s = p = ++re; _.j.get(o, function (e) { if (p === s) { if (f(), !e) throw Error("Unknown component '" + o + "'"); !function (e, t, n) { if (!(t = t.template)) throw Error("Component '" + e + "' has no template"); e = _.a.Ca(t), _.h.va(n, e) }(o, e, l); var t = (a = u, r = { element: l, templateNodes: b }, (i = (n = e).createViewModel) ? i.call(n, a, r) : a); e = c.createChildContext(t, { extend: function (e) { e.$component = t, e.$componentTemplateNodes = b } }), t && t.koDescendantsComplete && (h = _.i.subscribe(l, _.i.pa, t.koDescendantsComplete, t)), d = t, _.Oa(e, l) } var n, a, r, i }) }, null, { l: l }), { controlsDescendantBindings: !0 } } }, _.h.ea.component = !0; var be = { class: "className", for: "htmlFor" }; function ve(e, p, h) { _.c[e] = { init: function (r, i, e, t, o) { var u, c, s, l, f, d = {}; if (p) { t = e.get("as"); var n = e.get("noChildContext"); d = { as: t, noChildContext: n, exportDependencies: f = !(t && n) } } return l = (s = "render" == e.get("completeOn")) || e.has(_.i.pa), _.o(function () { var e, t = _.a.f(i()), n = !h != !t, a = !c; !f && n === u || (l && (o = _.i.Cb(r, o)), n && (p && !f || (d.dataDependency = _.S.o()), e = p ? o.createChildContext("function" == typeof t ? t : i, d) : _.S.qa() ? o.extend(null, d) : o), a && _.S.qa() && (c = _.a.Ca(_.h.childNodes(r), !0)), n ? (a || _.h.va(r, _.a.Ca(c)), _.Oa(e, r)) : (_.h.Ea(r), s || _.i.ma(r, _.i.H)), u = n) }, null, { l: r }), { controlsDescendantBindings: !0 } } }, _.m.Ra[e] = !1, _.h.ea[e] = !0 } _.c.attr = { update: function (i, e) { var t = _.a.f(e()) || {}; _.a.P(t, function (e, t) { t = _.a.f(t); var n = e.indexOf(":"), r = (n = "lookupNamespaceURI" in i && 0 < n && i.lookupNamespaceURI(e.substr(0, n)), !1 === t || null === t || t === a); r ? n ? i.removeAttributeNS(n, e) : i.removeAttribute(e) : t = t.toString(), _.a.W <= 8 && e in be ? (e = be[e], r ? i.removeAttribute(e) : i[e] = t) : r || (n ? i.setAttributeNS(n, e, t) : i.setAttribute(e, t)), "name" === e && _.a.Yc(i, r ? "" : t) }) } }, _.c.checked = { after: ["value", "attr"], init: function (o, u, c) { function e() { var e = o.checked, t = s(); if (!_.S.Ya() && (e || !f && !_.S.qa())) { var n = _.u.G(u); if (d) { var r = p ? n.v() : n, i = h; i !== (h = t) ? e && (_.a.Na(r, t, !0), _.a.Na(r, i, !1)) : _.a.Na(r, t, e), p && _.Za(n) && n(r) } else l && (t === a ? t = e : e || (t = a)), _.m.eb(n, c, "checked", t, !0) } } var s = _.xb(function () { return c.has("checkedValue") ? _.a.f(c.get("checkedValue")) : n ? c.has("value") ? _.a.f(c.get("value")) : o.value : void 0 }), l = "checkbox" == o.type, f = "radio" == o.type; if (l || f) { var t = u(), d = l && _.a.f(t) instanceof Array, p = !(d && t.push && t.splice), n = f || d, h = d ? s() : a; f && !o.name && _.c.uniqueName.init(o, function () { return !0 }), _.o(e, null, { l: o }), _.a.B(o, "click", e), _.o(function () { var e = _.a.f(u()), t = s(); d ? (o.checked = 0 <= _.a.A(e, t), h = t) : o.checked = l && t === a ? !!e : s() === e }, null, { l: o }), t = a } } }, _.m.wa.checked = !0, _.c.checkedValue = { update: function (e, t) { e.value = _.a.f(t()) } }, _.c.class = { update: function (e, t) { var n = _.a.Db(_.a.f(t())); _.a.Eb(e, e.__ko__cssValue, !1), e.__ko__cssValue = n, _.a.Eb(e, n, !0) } }, _.c.css = { update: function (n, e) { var t = _.a.f(e()); null !== t && "object" == typeof t ? _.a.P(t, function (e, t) { t = _.a.f(t), _.a.Eb(n, e, t) }) : _.c.class.update(n, e) } }, _.c.enable = { update: function (e, t) { var n = _.a.f(t()); n && e.disabled ? e.removeAttribute("disabled") : n || e.disabled || (e.disabled = !0) } }, _.c.disable = { update: function (e, t) { _.c.enable.update(e, function () { return !_.a.f(t()) }) } }, _.c.event = { init: function (e, i, o, u, c) { var t = i() || {}; _.a.P(t, function (r) { "string" == typeof r && _.a.B(e, r, function (e) { var t, n = i()[r]; if (n) { try { var a = _.a.la(arguments); u = c.$data, a.unshift(u), t = n.apply(u, a) } finally { !0 !== t && (e.preventDefault ? e.preventDefault() : e.returnValue = !1) } !1 === o.get(r + "Bubble") && (e.cancelBubble = !0, e.stopPropagation && e.stopPropagation()) } }) }) } }, _.c.foreach = { Rc: function (n) { return function () { var e = n(), t = _.a.bc(e); return t && "number" != typeof t.length ? (_.a.f(e), { foreach: t.data, as: t.as, noChildContext: t.noChildContext, includeDestroyed: t.includeDestroyed, afterAdd: t.afterAdd, beforeRemove: t.beforeRemove, afterRender: t.afterRender, beforeMove: t.beforeMove, afterMove: t.afterMove, templateEngine: _.ba.Ma }) : { foreach: e, templateEngine: _.ba.Ma } } }, init: function (e, t) { return _.c.template.init(e, _.c.foreach.Rc(t)) }, update: function (e, t, n, a, r) { return _.c.template.update(e, _.c.foreach.Rc(t), n, a, r) } }, _.m.Ra.foreach = !1, _.h.ea.foreach = !0, _.c.hasfocus = { init: function (a, r, i) { function e(e) { a.__ko_hasfocusUpdating = !0; var t = a.ownerDocument; if ("activeElement" in t) { var n; try { n = t.activeElement } catch (e) { n = t.body } e = n === a } t = r(), _.m.eb(t, i, "hasfocus", e, !0), a.__ko_hasfocusLastValue = e, a.__ko_hasfocusUpdating = !1 } var t = e.bind(null, !0), n = e.bind(null, !1); _.a.B(a, "focus", t), _.a.B(a, "focusin", t), _.a.B(a, "blur", n), _.a.B(a, "focusout", n), a.__ko_hasfocusLastValue = !1 }, update: function (e, t) { var n = !!_.a.f(t()); e.__ko_hasfocusUpdating || e.__ko_hasfocusLastValue === n || (n ? e.focus() : e.blur(), !n && e.__ko_hasfocusLastValue && e.ownerDocument.body.focus(), _.u.G(_.a.Fb, null, [e, n ? "focusin" : "focusout"])) } }, _.m.wa.hasfocus = !0, _.c.hasFocus = _.c.hasfocus, _.m.wa.hasFocus = "hasfocus", _.c.html = { init: function () { return { controlsDescendantBindings: !0 } }, update: function (e, t) { _.a.fc(e, t()) } }, ve("if"), ve("ifnot", !1, !0), ve("with", !0), _.c.let = { init: function (e, t, n, a, r) { return t = r.extend(t), _.Oa(t, e), { controlsDescendantBindings: !0 } } }, _.h.ea.let = !0; var ge, me, ye, we, xe = {}; function Ce(e, t, n, a) { e = _.m.ac(e); for (var r = _.m.Ra, i = 0; i < e.length; i++) { var o = e[i].key; if (Object.prototype.hasOwnProperty.call(r, o)) { var u = r[o]; if ("function" == typeof u) { if (o = u(e[i].value)) throw Error(o) } else if (!u) throw Error("This template engine does not support the '" + o + "' binding within its templates") } } return n = "ko.__tr_ambtns(function($context,$element){return(function(){return{ " + _.m.vb(e, { valueAccessors: !0 }) + " } })()},'" + n.toLowerCase() + "')", a.createJavaScriptEvaluatorBlock(n) + t } function Ee(e, t, n, a, r) { var i, o, u, c, s, l = Math.min, f = Math.max, d = [], p = e.length, h = t.length, b = h - p || 1, v = p + h + 1; for (i = 0; i <= p; i++)for (c = u, d.push(u = []), s = l(h, i + b), o = f(0, i - 1); o <= s; o++)u[o] = o ? i ? e[i - 1] === t[o - 1] ? c[o - 1] : l(c[o] || v, u[o - 1] || v) + 1 : o + 1 : i + 1; for (l = [], f = [], b = [], i = p, o = h; i || o;)h = d[i][o] - 1, o && h === d[i][o - 1] ? f.push(l[l.length] = { status: n, value: t[--o], index: o }) : i && h === d[i - 1][o] ? b.push(l[l.length] = { status: a, value: e[--i], index: i }) : (--o, --i, r.sparse || l.push({ status: "retained", value: t[o] })); return _.a.Kc(b, f, !r.dontLimitMoves && 10 * p), l.reverse() } function ke(t, n, r, i, o) { var u = [], e = _.$(function () { var e = n(r, o, _.a.Ua(u, t)) || []; 0 < u.length && (_.a.Xc(u, e), i && _.u.G(i, null, [r, e, o])), u.length = 0, _.a.Nb(u, e) }, null, { l: t, Sa: function () { return !_.a.kd(u) } }); return { Y: u, $: e.ja() ? e : a } } _.c.options = { init: function (e) { if ("select" !== _.a.R(e)) throw Error("options binding applies only to SELECT elements"); for (; 0 < e.length;)e.remove(0); return { controlsDescendantBindings: !0 } }, update: function (r, e, i) { function t() { return _.a.jb(r.options, function (e) { return e.selected }) } function o(e, t, n) { var a = typeof t; return "function" == a ? t(e) : "string" == a ? e[t] : n } function n(e, t) { if (h && l) _.i.ma(r, _.i.H); else if (p.length) { var n = 0 <= _.a.A(p, _.w.M(t[0])); _.a.Zc(t[0], n), h && !n && _.u.G(_.a.Fb, null, [r, "change"]) } } var u = r.multiple, c = 0 != r.length && u ? r.scrollTop : null, s = _.a.f(e()), l = i.get("valueAllowUnset") && i.has("value"), f = i.get("optionsIncludeDestroyed"); e = {}; var d, p = []; l || (u ? p = _.a.Mb(t(), _.w.M) : 0 <= r.selectedIndex && p.push(_.w.M(r.options[r.selectedIndex]))), s && (void 0 === s.length && (s = [s]), d = _.a.jb(s, function (e) { return f || e === a || null === e || !_.a.f(e._destroy) }), !i.has("optionsCaption") || null !== (s = _.a.f(i.get("optionsCaption"))) && s !== a && d.unshift(xe)); var h = !1; e.beforeRemove = function (e) { r.removeChild(e) }, s = n, i.has("optionsAfterRender") && "function" == typeof i.get("optionsAfterRender") && (s = function (e, t) { n(0, t), _.u.G(i.get("optionsAfterRender"), null, [t[0], e !== xe ? e : a]) }), _.a.ec(r, d, function (e, t, n) { return n.length && (p = !l && n[0].selected ? [_.w.M(n[0])] : [], h = !0), t = r.ownerDocument.createElement("option"), e === xe ? (_.a.Bb(t, i.get("optionsCaption")), _.w.cb(t, a)) : (n = o(e, i.get("optionsValue"), e), _.w.cb(t, _.a.f(n)), e = o(e, i.get("optionsText"), n), _.a.Bb(t, e)), [t] }, e, s), l || (u ? p.length && t().length < p.length : p.length && 0 <= r.selectedIndex ? _.w.M(r.options[r.selectedIndex]) !== p[0] : p.length || 0 <= r.selectedIndex) && _.u.G(_.a.Fb, null, [r, "change"]); (l || _.S.Ya()) && _.i.ma(r, _.i.H), _.a.wd(r), c && 20 < Math.abs(c - r.scrollTop) && (r.scrollTop = c) } }, _.c.options.$b = _.a.g.Z(), _.c.selectedOptions = { init: function (a, r, n) { function e() { var e = r(), t = []; _.a.D(a.getElementsByTagName("option"), function (e) { e.selected && t.push(_.w.M(e)) }), _.m.eb(e, n, "selectedOptions", t) } function t() { var n = _.a.f(r()), e = a.scrollTop; n && "number" == typeof n.length && _.a.D(a.getElementsByTagName("option"), function (e) { var t = 0 <= _.a.A(n, _.w.M(e)); e.selected != t && _.a.Zc(e, t) }), a.scrollTop = e } if ("select" != _.a.R(a)) throw Error("selectedOptions binding applies only to SELECT elements"); var i; _.i.subscribe(a, _.i.H, function () { i ? e() : (_.a.B(a, "change", e), i = _.o(t, null, { l: a })) }, null, { notifyImmediately: !0 }) }, update: function () { } }, _.m.wa.selectedOptions = !0, _.c.style = { update: function (i, t) { var n = _.a.f(t() || {}); _.a.P(n, function (t, n) { if (null !== (n = _.a.f(n)) && n !== a && !1 !== n || (n = ""), e) e(i).css(t, n); else if (/^--/.test(t)) i.style.setProperty(t, n); else { t = t.replace(/-(\w)/g, function (e, t) { return t.toUpperCase() }); var r = i.style[t]; (i.style[t] = n) === r || i.style[t] != r || isNaN(n) || (i.style[t] = n + "px") } }) } }, _.c.submit = { init: function (a, r, e, t, i) { if ("function" != typeof r()) throw Error("The value for a submit binding must be a function"); _.a.B(a, "submit", function (e) { var t, n = r(); try { t = n.call(i.$data, a) } finally { !0 !== t && (e.preventDefault ? e.preventDefault() : e.returnValue = !1) } }) } }, _.c.text = { init: function () { return { controlsDescendantBindings: !0 } }, update: function (e, t) { _.a.Bb(e, t()) } }, _.h.ea.text = !0, function () { if (b && b.navigator) { function e(e) { if (e) return parseFloat(e[1]) } var d, p, h, v, g, t = b.navigator.userAgent; (d = b.opera && b.opera.version && parseInt(b.opera.version())) || (g = e(t.match(/Edge\/([^ ]+)$/))) || e(t.match(/Chrome\/([^ ]+)/)) || (p = e(t.match(/Version\/([^ ]+) Safari/))) || (h = e(t.match(/Firefox\/([^ ]+)/))) || (v = _.a.W || e(t.match(/MSIE ([^ ]+)/))) || (v = e(t.match(/rv:([^ )]+)/))) } if (8 <= v && v < 10) { function r(e) { var t = this.activeElement; (t = t && _.a.g.get(t, o)) && t(e) } var i = _.a.g.Z(), o = _.a.g.Z(), m = function (e, t) { var n = e.ownerDocument; _.a.g.get(n, i) || (_.a.g.set(n, i, !0), _.a.B(n, "selectionchange", r)), _.a.g.set(e, o, t) } } _.c.textInput = { init: function (n, r, t) { function e(e, t) { _.a.B(n, e, t) } function i() { u || (c = n.value, u = _.a.setTimeout(o, 4)) } function o() { clearTimeout(u), c = u = a; var e = n.value; s !== e && (s = e, _.m.eb(r(), t, "textInput", e)) } var u, c, s = n.value, l = 9 == _.a.W ? i : o, f = !1; v && e("keypress", o), v < 11 && e("propertychange", function (e) { f || "value" !== e.propertyName || l(e) }), 8 == v && (e("keyup", o), e("keydown", o)), m && (m(n, l), e("dragend", i)), (!v || 9 <= v) && e("input", l), p < 5 && "textarea" === _.a.R(n) ? (e("keydown", i), e("paste", i), e("cut", i)) : d < 11 ? e("keydown", i) : h < 4 ? (e("DOMAutoComplete", o), e("dragdrop", o), e("drop", o)) : g && "number" === n.type && e("keydown", i), e("change", o), e("blur", o), _.o(function e() { var t = _.a.f(r()); null !== t && t !== a || (t = ""), c !== a && t === c ? _.a.setTimeout(e, 4) : n.value !== t && (f = !0, n.value = t, f = !1, s = n.value) }, null, { l: n }) } }, _.m.wa.textInput = !0, _.c.textinput = { preprocess: function (e, t, n) { n("textInput", e) } } }(), _.c.uniqueName = { init: function (e, t) { if (t()) { var n = "ko_unique_" + ++_.c.uniqueName.rd; _.a.Yc(e, n) } } }, _.c.uniqueName.rd = 0, _.c.using = { init: function (e, t, n, a, r) { var i; return n.has("as") && (i = { as: n.get("as"), noChildContext: n.get("noChildContext") }), t = r.createChildContext(t, i), _.Oa(t, e), { controlsDescendantBindings: !0 } } }, _.h.ea.using = !0, _.c.value = { init: function (n, r, i) { var o = _.a.R(n), e = "input" == o; if (!e || "checkbox" != n.type && "radio" != n.type) { var t = [], u = i.get("valueUpdate"), c = !1, s = null; u && (t = "string" == typeof u ? [u] : _.a.wc(u), _.a.Pa(t, "change")); function l() { s = null, c = !1; var e = r(), t = _.w.M(n); _.m.eb(e, i, "value", t) } var f, d; if (!_.a.W || !e || "text" != n.type || "off" == n.autocomplete || n.form && "off" == n.form.autocomplete || -1 != _.a.A(t, "propertychange") || (_.a.B(n, "propertychange", function () { c = !0 }), _.a.B(n, "focus", function () { c = !1 }), _.a.B(n, "blur", function () { c && l() })), _.a.D(t, function (e) { var t = l; _.a.Ud(e, "after") && (t = function () { s = _.w.M(n), _.a.setTimeout(l, 0) }, e = e.substring(5)), _.a.B(n, e, t) }), f = e && "file" == n.type ? function () { var e = _.a.f(r()); null === e || e === a || "" === e ? n.value = "" : _.u.G(l) } : function () { var e = _.a.f(r()), t = _.w.M(n); null !== s && e === s ? _.a.setTimeout(f, 0) : e === t && t !== a || ("select" === o ? (t = i.get("valueAllowUnset"), _.w.cb(n, e, t), t || e === _.w.M(n) || _.u.G(l)) : _.w.cb(n, e)) }, "select" === o) _.i.subscribe(n, _.i.H, function () { d ? (i.get("valueAllowUnset") ? f : l)() : (_.a.B(n, "change", l), d = _.o(f, null, { l: n })) }, null, { notifyImmediately: !0 }); else _.a.B(n, "change", l), _.o(f, null, { l: n }) } else _.ib(n, { checkedValue: r }) }, update: function () { } }, _.m.wa.value = !0, _.c.visible = { update: function (e, t) { var n = _.a.f(t()), a = "none" != e.style.display; n && !a ? e.style.display = "" : !n && a && (e.style.display = "none") } }, _.c.hidden = { update: function (e, t) { _.c.visible.update(e, function () { return !_.a.f(t()) }) } }, _.c.click = { init: function (e, t, n, a, r) { return _.c.event.init.call(this, e, function () { var e = {}; return e.click = t(), e }, n, a, r) } }, _.ca = function () { }, _.ca.prototype.renderTemplateSource = function () { throw Error("Override renderTemplateSource") }, _.ca.prototype.createJavaScriptEvaluatorBlock = function () { throw Error("Override createJavaScriptEvaluatorBlock") }, _.ca.prototype.makeTemplateSource = function (e, t) { if ("string" == typeof e) { var n = (t = t || c).getElementById(e); if (!n) throw Error("Cannot find template with ID " + e); return new _.C.F(n) } if (1 == e.nodeType || 8 == e.nodeType) return new _.C.ia(e); throw Error("Unknown template type: " + e) }, _.ca.prototype.renderTemplate = function (e, t, n, a) { return e = this.makeTemplateSource(e, a), this.renderTemplateSource(e, t, n, a) }, _.ca.prototype.isTemplateRewritten = function (e, t) { return !1 === this.allowTemplateRewriting || this.makeTemplateSource(e, t).data("isRewritten") }, _.ca.prototype.rewriteTemplate = function (e, t, n) { t = t((e = this.makeTemplateSource(e, n)).text()), e.text(t), e.data("isRewritten", !0) }, _.b("templateEngine", _.ca), _.kc = (ge = /(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi, me = /\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g, { xd: function (e, t, n) { t.isTemplateRewritten(e, n) || t.rewriteTemplate(e, function (e) { return _.kc.Ld(e, t) }, n) }, Ld: function (e, i) { return e.replace(ge, function (e, t, n, a, r) { return Ce(r, t, n, i) }).replace(me, function (e, t) { return Ce(t, "\x3c!-- ko --\x3e", "#comment", i) }) }, md: function (a, r) { return _.aa.Xb(function (e, t) { var n = e.nextSibling; n && n.nodeName.toLowerCase() === r && _.ib(n, a, t) }) } }), _.b("__tr_ambtns", _.kc.md), function () { _.C = {}, _.C.F = function (e) { if (this.F = e) { var t = _.a.R(e); this.ab = "script" === t ? 1 : "textarea" === t ? 2 : "template" == t && e.content && 11 === e.content.nodeType ? 3 : 4 } }, _.C.F.prototype.text = function () { var e = 1 === this.ab ? "text" : 2 === this.ab ? "value" : "innerHTML"; if (0 == arguments.length) return this.F[e]; var t = arguments[0]; "innerHTML" == e ? _.a.fc(this.F, t) : this.F[e] = t }; var t = _.a.g.Z() + "_"; _.C.F.prototype.data = function (e) { if (1 === arguments.length) return _.a.g.get(this.F, t + e); _.a.g.set(this.F, t + e, arguments[1]) }; var i = _.a.g.Z(); _.C.F.prototype.nodes = function () { var e = this.F; if (0 == arguments.length) { var t = _.a.g.get(e, i) || {}, n = t.lb || (3 === this.ab ? e.content : 4 === this.ab ? e : a); if (!n || t.jd) { var r = this.text(); r && r !== t.bb && (n = _.a.Md(r, e.ownerDocument), _.a.g.set(e, i, { lb: n, bb: r, jd: !0 })) } return n } t = arguments[0], this.ab !== a && this.text(""), _.a.g.set(e, i, { lb: t }) }, _.C.ia = function (e) { this.F = e }, _.C.ia.prototype = new _.C.F, _.C.ia.prototype.constructor = _.C.ia, _.C.ia.prototype.text = function () { if (0 == arguments.length) { var e = _.a.g.get(this.F, i) || {}; return e.bb === a && e.lb && (e.bb = e.lb.innerHTML), e.bb } _.a.g.set(this.F, i, { bb: arguments[0] }) }, _.b("templateSources", _.C), _.b("templateSources.domElement", _.C.F), _.b("templateSources.anonymousTemplate", _.C.ia) }(), function () { function c(e, t, n) { var a; for (t = _.h.nextSibling(t); e && (a = e) !== t;)n(a, e = _.h.nextSibling(a)) } function p(e, t) { if (e.length) { var r = e[0], i = e[e.length - 1], n = r.parentNode, o = _.ga.instance, u = o.preprocessNode; if (u) { if (c(r, i, function (e, t) { var n = e.previousSibling, a = u.call(o, e); a && (e === r && (r = a[0] || t), e === i && (i = a[a.length - 1] || n)) }), e.length = 0, !r) return; r === i ? e.push(r) : (e.push(r, i), _.a.Ua(e, n)) } c(r, i, function (e) { 1 !== e.nodeType && 8 !== e.nodeType || _.vc(t, e) }), c(r, i, function (e) { 1 !== e.nodeType && 8 !== e.nodeType || _.aa.cd(e, [t]) }), _.a.Ua(e, n) } } function s(e) { return e.nodeType ? e : 0 < e.length ? e[0] : null } function h(e, t, n, a, r) { r = r || {}; var i = (e && s(e) || n || {}).ownerDocument, o = r.templateEngine || l; if (_.kc.xd(n, o, i), "number" != typeof (n = o.renderTemplate(n, a, r, i)).length || 0 < n.length && "number" != typeof n[0].nodeType) throw Error("Template engine must return an array of DOM nodes"); switch (i = !1, t) { case "replaceChildren": _.h.va(e, n), i = !0; break; case "replaceNode": _.a.Xc(e, n), i = !0; break; case "ignoreTargetNode": break; default: throw Error("Unknown renderMode: " + t) }return i && (p(n, a), r.afterRender && _.u.G(r.afterRender, null, [n, a[r.as || "$data"]]), "replaceChildren" == t && _.i.ma(e, _.i.H)), n } function b(e, t, n) { return _.O(e) ? e() : "function" == typeof e ? e(t, n) : e } var l; _.gc = function (e) { if (e != a && !(e instanceof _.ca)) throw Error("templateEngine must inherit from ko.templateEngine"); l = e }, _.dc = function (n, r, i, o, u) { if (((i = i || {}).templateEngine || l) == a) throw Error("Set a template engine before calling renderTemplate"); if (u = u || "replaceChildren", o) { var c = s(o); return _.$(function () { var e = r && r instanceof _.fa ? r : new _.fa(r, null, null, null, { exportDependencies: !0 }), t = b(n, e.$data, e); e = h(o, u, t, e, i); "replaceNode" == u && (c = s(o = e)) }, null, { Sa: function () { return !c || !_.a.Sb(c) }, l: c && "replaceNode" == u ? c.parentNode : c }) } return _.aa.Xb(function (e) { _.dc(n, r, i, e, "replaceNode") }) }, _.Qd = function (r, t, i, o, u) { function n(e, t) { _.u.G(_.a.ec, null, [o, e, s, i, c, t]), _.i.ma(o, _.i.H) } function c(e, t) { p(t, l), i.afterRender && i.afterRender(t, e), l = null } function s(e, t) { l = u.createChildContext(e, { as: f, noChildContext: i.noChildContext, extend: function (e) { e.$index = t, f && (e[f + "Index"] = t) } }); var n = b(r, e, l); return h(o, "ignoreTargetNode", n, l, i) } var l, f = i.as, d = !1 === i.includeDestroyed || _.options.foreachHidesDestroyed && !i.includeDestroyed; if (d || i.beforeRemove || !_.Pc(t)) return _.$(function () { var e = _.a.f(t) || []; void 0 === e.length && (e = [e]), d && (e = _.a.jb(e, function (e) { return e === a || null === e || !_.a.f(e._destroy) })), n(e) }, null, { l: o }); n(t.v()); var e = t.subscribe(function (e) { n(t(), e) }, null, "arrayChange"); return e.l(o), e }; var u = _.a.g.Z(), r = _.a.g.Z(); _.c.template = { init: function (e, t) { var n = _.a.f(t()); if ("string" == typeof n || "name" in n) _.h.Ea(e); else if ("nodes" in n) { if (n = n.nodes || [], _.O(n)) throw Error('The "nodes" option must be a plain, non-observable array.'); var a = n[0] && n[0].parentNode; a && _.a.g.get(a, r) || (a = _.a.Yb(n), _.a.g.set(a, r, !0)), new _.C.ia(e).nodes(a) } else { if (!(0 < (n = _.h.childNodes(e)).length)) throw Error("Anonymous template defined, but no template content was provided"); a = _.a.Yb(n), new _.C.ia(e).nodes(a) } return { controlsDescendantBindings: !0 } }, update: function (e, t, n, r, i) { var o = t(); n = !0, r = null, "string" == typeof (t = _.a.f(o)) ? t = {} : (o = "name" in t ? t.name : e, "if" in t && (n = _.a.f(t.if)), n && "ifnot" in t && (n = !_.a.f(t.ifnot)), n && !o && (n = !1)), "foreach" in t ? r = _.Qd(o, n && t.foreach || [], t, e, i) : n ? (n = i, "data" in t && (n = i.createChildContext(t.data, { as: t.as, noChildContext: t.noChildContext, exportDependencies: !0 })), r = _.dc(o, n, t, e)) : _.h.Ea(e), i = r, (t = _.a.g.get(e, u)) && "function" == typeof t.s && t.s(), _.a.g.set(e, u, !i || i.ja && !i.ja() ? a : i) } }, _.m.Ra.template = function (e) { return 1 == (e = _.m.ac(e)).length && e[0].unknown || _.m.Id(e, "name") ? null : "This template engine does not support anonymous templates nested within its templates" }, _.h.ea.template = !0 }(), _.b("setTemplateEngine", _.gc), _.b("renderTemplate", _.dc), _.a.Kc = function (e, t, n) { var a, r, i, o, u; if (e.length && t.length) for (a = r = 0; (!n || a < n) && (o = e[r]); ++r) { for (i = 0; u = t[i]; ++i)if (o.value === u.value) { o.moved = u.index, u.moved = o.index, t.splice(i, 1), a = i = 0; break } a += i } }, _.a.Pb = function (e, t, n) { return n = "boolean" == typeof n ? { dontLimitMoves: n } : n || {}, (e = e || []).length < (t = t || []).length ? Ee(e, t, "added", "deleted", n) : Ee(t, e, "deleted", "added", n) }, _.b("utils.compareArrays", _.a.Pb), ye = _.a.g.Z(), we = _.a.g.Z(), _.a.ec = function (t, e, n, r, i, o) { function u(e) { l = { Aa: e, pb: _.ta(m++) }, v.push(l), b || E.push(l) } function c(e) { l = h[e], m !== l.pb.v() && C.push(l), l.pb(m++), _.a.Ua(l.Y, t), v.push(l) } function s(t, n) { if (t) for (var a = 0, e = n.length; a < e; a++)_.a.D(n[a].Y, function (e) { t(e, a, n[a].Aa) }) } void 0 === (e = e || []).length && (e = [e]), r = r || {}; var l, f, d, p, h = _.a.g.get(t, ye), b = !h, v = [], g = 0, m = 0, y = [], w = [], x = [], C = [], E = [], k = 0; if (b) _.a.D(e, u); else { if (!o || h && h._countWaitingForRemove) { var T = _.a.Mb(h, function (e) { return e.Aa }); o = _.a.Pb(T, e, { dontLimitMoves: r.dontLimitMoves, sparse: !0 }) } var N, S, D; for (T = 0; N = o[T]; T++)switch (S = N.moved, D = N.index, N.status) { case "deleted": for (; g < D;)c(g++); S === a && ((l = h[g]).$ && (l.$.s(), l.$ = a), _.a.Ua(l.Y, t).length && (r.beforeRemove && (v.push(l), k++, l.Aa === we ? l = null : x.push(l)), l && y.push.apply(y, l.Y))), g++; break; case "added": for (; m < D;)c(g++); S !== a ? (w.push(v.length), c(S)) : u(N.value) }for (; m < e.length;)c(g++); v._countWaitingForRemove = k } _.a.g.set(t, ye, v), s(r.beforeMove, C), _.a.D(y, r.beforeRemove ? _.oa : _.removeNode); try { p = t.ownerDocument.activeElement } catch (e) { } if (w.length) for (; (T = w.shift()) != a;) { for (l = v[T], f = a; T;)if ((d = v[--T].Y) && d.length) { f = d[d.length - 1]; break } for (e = 0; g = l.Y[e]; f = g, e++)_.h.Wb(t, g, f) } for (T = 0; l = v[T]; T++) { for (l.Y || _.a.extend(l, ke(t, n, l.Aa, i, l.pb)), e = 0; g = l.Y[e]; f = g, e++)_.h.Wb(t, g, f); !l.Ed && i && (i(l.Aa, l.Y, l.pb), l.Ed = !0, f = l.Y[l.Y.length - 1]) } for (p && t.ownerDocument.activeElement != p && p.focus(), s(r.beforeRemove, x), T = 0; T < x.length; ++T)x[T].Aa = we; s(r.afterMove, C), s(r.afterAdd, E) }, _.b("utils.setDomNodeChildrenFromArrayMapping", _.a.ec), _.ba = function () { this.allowTemplateRewriting = !1 }, _.ba.prototype = new _.ca, _.ba.prototype.constructor = _.ba, _.ba.prototype.renderTemplateSource = function (e, t, n, a) { return (t = _.a.W < 9 || !e.nodes ? null : e.nodes()) ? _.a.la(t.cloneNode(!0).childNodes) : (e = e.text(), _.a.ua(e, a)) }, _.ba.Ma = new _.ba, _.gc(_.ba.Ma), _.b("nativeTemplateEngine", _.ba), function () { _.$a = function () { var o = this.Hd = function () { if (!e || !e.tmpl) return 0; try { if (0 <= e.tmpl.tag.tmpl.open.toString().indexOf("__")) return 2 } catch (e) { } return 1 }(); this.renderTemplateSource = function (t, n, a, r) { if (r = r || c, a = a || {}, o < 2) throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later."); var i = t.data("precompiled"); return i || (i = t.text() || "", i = e.template(null, "{{ko_with $item.koBindingContext}}" + i + "{{/ko_with}}"), t.data("precompiled", i)), t = [n.$data], n = e.extend({ koBindingContext: n }, a.templateOptions), (n = e.tmpl(i, t, n)).appendTo(r.createElement("div")), e.fragments = {}, n }, this.createJavaScriptEvaluatorBlock = function (e) { return "{{ko_code ((function() { return " + e + " })()) }}" }, this.addTemplate = function (e, t) { c.write("<script type='text/html' id='" + e + "'>" + t + "<\/script>") }, 0 < o && (e.tmpl.tag.ko_code = { open: "__.push($1 || '');" }, e.tmpl.tag.ko_with = { open: "with($1) {", close: "} " }) }, _.$a.prototype = new _.ca, _.$a.prototype.constructor = _.$a; var t = new _.$a; 0 < t.Hd && _.gc(t), _.b("jqueryTmplTemplateEngine", _.$a) }() }, "function" == typeof define && define.amd ? define(["exports", "require"], g) : "object" == typeof exports && "object" == typeof module ? g(module.exports || exports) : g(b.ko = {}) }();;
ko.bindingHandlers.stopBinding = {
    init: function () {
        return { controlsDescendantBindings: true };
    }
};
var selfHeaderManager;
function HeaderManagerModel() {
    selfHeaderManager = this;
    selfHeaderManager.SessionCartItemsCount = ko.observable($('#SessionCartItemsCount').val());
    selfHeaderManager.SessionCartRemainingProductsCount = ko.observable(0);
    selfHeaderManager.SessionCartValue = ko.observable(0);
    selfHeaderManager.SessionCartSummary = ko.observable('');
    selfHeaderManager.SessionDetectedLocation = ko.observable($('#SessionDetectedLocation').val());
    selfHeaderManager.SessionDetectedPinCode = ko.observable();

    selfHeaderManager.SessionDetectedPinCode.subscribe(function () {
        if (selfHeaderManager.SessionDetectedPinCode().length == 6) {
            selfHeaderManager.UpdateDetectedLocation();
        }
        else {
            selfHeaderManager.SetAvailabiltyImage(-2, '');
        }
    });
    
    selfHeaderManager.SessionCartValue.subscribe(function () {
        $('[data-toggle="popover"]').popover({ html: true });
        var summaryTotalPrice = selfHeaderManager.SessionCartValue();
        var itemCount = selfHeaderManager.SessionCartItemsCount();

        if (itemCount != 0)
            selfHeaderManager.SessionCartSummary('&#8377; ' + Math.round(summaryTotalPrice) + ' (' + itemCount + ((itemCount > 1) ? ' Items' : ' Item') + ')');
        else
            selfHeaderManager.SessionCartSummary('Waiting for order');
        selfHeaderManager.SessionCartSummary('<a class="invisible-hyperlink" href="/cart">' + selfHeaderManager.SessionCartSummary() + '</a>');
    });
    selfHeaderManager.SessionCartValue($('#SessionCartValue').val());
    selfHeaderManager.UpdateDetectedLocation = function () {
        selfHeaderManager.SetAvailabiltyImage(-3, '');
        $.ajax({
            url: "/Pulse/UpdateDetectedLocation",
            type: "POST",
            content: "application/json; charset=utf-8",
            async: true,
            dataType: "json",
            data: { Location: selfHeaderManager.SessionDetectedLocation(), PinCode: selfHeaderManager.SessionDetectedPinCode()},
            success: function (data) {
                selfHeaderManager.SessionDetectedLocation(data.Location);
                selfHeaderManager.SetAvailabiltyImage(data.DeliveryId, data.EstimatedDeliveryInfo);
            },
            error: function () {
                selfHeaderManager.SetAvailabiltyImage(-2, '');
            }
        });
    }
    
    selfHeaderManager.SetAvailabiltyImage = function (DeliveryId, EstimatedDeliveryInfo) {
        var imgNode = $(document.getElementById('imgDeliveryPincode'));
        if (imgNode == null)
            return;
        var imgPath = "/content/images/icons/";
        if (DeliveryId == 0 || DeliveryId == 1)
            imgPath = imgPath + "completed.png";
        else if (DeliveryId == -1) //error
            imgPath = imgPath + "declined.png";
        else if (DeliveryId == -3) //loading
            imgPath = imgPath + "loading.svg";
        else //-2 is UNKNOWN
            imgPath = "data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";
        imgNode.css('display', 'inline');
        imgNode.attr("src", imgPath);
        $("#lblDeliverySuggestion").text(EstimatedDeliveryInfo != '' ? EstimatedDeliveryInfo : '');
    }

    selfHeaderManager.LocationSearchText = ko.observable('');
    selfHeaderManager.AvailableLocations = ko.observableArray();
    var defaultLocations = ['New Delhi', 'Mumbai', 'Bengaluru', 'Kolkata', 'Chennai', 'Noida', 'Pune', 'Hyderabad'];
    selfHeaderManager.AvailableLocationsFiltered = ko.observableArray(defaultLocations);
    selfHeaderManager.CleanseAvailableLocationsFiltered = function () {
        if (selfHeaderManager.LocationSearchText().length != 0)
            return;
        selfHeaderManager.AvailableLocationsFiltered.remove(selfHeaderManager.SessionDetectedLocation());
        selfHeaderManager.AvailableLocationsFiltered.unshift(selfHeaderManager.SessionDetectedLocation());
    }
    selfHeaderManager.CleanseAvailableLocationsFiltered();

    selfHeaderManager.LoadAvailableLocations = function () {
        $.ajax({
            url: '../api/Location/AvailableLocations',
            method: 'GET',
            async: true,
            success: function (data) {
                selfHeaderManager.AvailableLocations([]);
                if (data != null && data.length != 0) {
                    $.each(data, function (index, item) {
                        selfHeaderManager.AvailableLocations.push(item);
                    });
                }
            }
        });
    }
    var stringStartsWith = function (string, startsWith) {
        string = string || "";
        if (startsWith.length > string.length)
            return false;
        return string.substring(0, startsWith.length) === startsWith;
    };
    selfHeaderManager.LocationSearchText.subscribe(function () {
        var filter = selfHeaderManager.LocationSearchText().toLowerCase();
        if (!filter) {
            selfHeaderManager.AvailableLocationsFiltered(defaultLocations);
        } else if (filter.length > 1) {
            selfHeaderManager.AvailableLocationsFiltered(ko.utils.arrayFilter(selfHeaderManager.AvailableLocations(), function (item) {
                return stringStartsWith(item.toLowerCase(), filter);
            }));
        }
        selfHeaderManager.CleanseAvailableLocationsFiltered();
    });
    selfHeaderManager.SessionDetectedPinCode($('#SessionDetectedPinCode').val());
}
var headerManager = new HeaderManagerModel();
ko.applyBindings(headerManager, document.getElementById('divHeaderCartArea'));


$(document).ready(function () {
    $("#modalLocationSelector").on('show.bs.modal', function () {
        if (selfHeaderManager.AvailableLocations.length < 10)
            selfHeaderManager.LoadAvailableLocations();
        selfHeaderManager.LocationSearchText('');
    });

    if (document.getElementById('divProfileRecommendsWidget')) {
        var profileRecommendationManagerModel = new ProfileRecommendationManagerModel();
        ko.applyBindings(profileRecommendationManagerModel, document.getElementById('divProfileRecommendsWidget'));
    }

    //if ('serviceWorker' in navigator) {
    //    navigator.serviceWorker
    //        .register('../service-worker.js')
    //        .then(function () { console.log('Service Worker Registered'); });
    //}
});
var selfProfileRecommendationManager;
function ProfileRecommendationManagerModel() {
    selfProfileRecommendationManager = this;
    selfProfileRecommendationManager.RecommendedItems = ko.observableArray();

    selfProfileRecommendationManager.LoadRecommendedItems = function () {
        $.ajax({
            url: "../Pulse/GetProfileRecommendedItems/" + (typeof SelectedProductModel != 'undefined' ? SelectedProductModel.ProductName[0] + ';' + SelectedProductModel.ProductCode : 0),
            method: 'GET',
            async: true,
            success: function (data) {
                selfProfileRecommendationManager.RecommendedItems([]);
                if (data != null && data.length != 0) {
                    $.each(data, function (index, item) {
                        var recommendedItem = new RecommendedItemModel();
                        recommendedItem.ItemCode(item.ItemCode);
                        recommendedItem.ItemName(item.ItemName);
                        recommendedItem.MRP(item.MRP);
                        recommendedItem.SalePrice(item.SalePrice);
                        recommendedItem.DiscountPercentage(item.DiscountPercentage);
                        recommendedItem.ShortDescription(item.ShortDescription);
                        recommendedItem.ItemLinkUrl(item.ItemLinkUrl);
                        recommendedItem.ProfilePictureUrl(item.ProfilePictureUrl);
                        selfProfileRecommendationManager.RecommendedItems.push(recommendedItem);
                    });

                    CallOwlCarousel($('#divProfReco'));
                }
            }
        });
    }
    selfProfileRecommendationManager.LoadRecommendedItems();
}

function RecommendedItemModel() {
    var self = this;
    self.ItemCode = ko.observable(0);
    self.ItemName = ko.observable('');
    self.MRP = ko.observable(0);
    self.SalePrice = ko.observable(0);
    self.DiscountPercentage = ko.observable(0);
    self.ShortDescription = ko.observable('');
    self.ItemLinkUrl = ko.observable('');
    self.ProfilePictureUrl = ko.observable('');

    self.GotoRecommendedItem = function () {
        if (selfCartManager.BindingCompleted() != 'undefined' && selfCartManager.BindingCompleted() == 1) {
            window.location = self.ItemLinkUrl;
        }
    }
};
/* 
  @package NOTY - Dependency-free notification library 
  @version version: 3.2.0-beta 
  @contributors https://github.com/needim/noty/graphs/contributors 
  @documentation Examples and Documentation - https://ned.im/noty 
  @license Licensed under the MIT licenses: http://www.opensource.org/licenses/mit-license.php 
*/

!function (t, e) { "object" == typeof exports && "object" == typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define("Noty", [], e) : "object" == typeof exports ? exports.Noty = e() : t.Noty = e() }(this, function () {
    return function (t) { function e(o) { if (n[o]) return n[o].exports; var i = n[o] = { i: o, l: !1, exports: {} }; return t[o].call(i.exports, i, i.exports, e), i.l = !0, i.exports } var n = {}; return e.m = t, e.c = n, e.i = function (t) { return t }, e.d = function (t, n, o) { e.o(t, n) || Object.defineProperty(t, n, { configurable: !1, enumerable: !0, get: o }) }, e.n = function (t) { var n = t && t.__esModule ? function () { return t.default } : function () { return t }; return e.d(n, "a", n), n }, e.o = function (t, e) { return Object.prototype.hasOwnProperty.call(t, e) }, e.p = "", e(e.s = 6) }([function (t, e, n) { "use strict"; function o(t, e, n) { var o = void 0; if (!n) { for (o in e) if (e.hasOwnProperty(o) && e[o] === t) return !0 } else for (o in e) if (e.hasOwnProperty(o) && e[o] === t) return !0; return !1 } function i(t) { t = t || window.event, void 0 !== t.stopPropagation ? t.stopPropagation() : t.cancelBubble = !0 } function r() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "", e = "noty_" + t + "_"; return e += "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (t) { var e = 16 * Math.random() | 0; return ("x" === t ? e : 3 & e | 8).toString(16) }) } function s(t) { var e = t.offsetHeight, n = window.getComputedStyle(t); return e += parseInt(n.marginTop) + parseInt(n.marginBottom) } function u(t, e, n) { var o = arguments.length > 3 && void 0 !== arguments[3] && arguments[3]; e = e.split(" "); for (var i = 0; i < e.length; i++)document.addEventListener ? t.addEventListener(e[i], n, o) : document.attachEvent && t.attachEvent("on" + e[i], n) } function a(t, e) { return ("string" == typeof t ? t : f(t)).indexOf(" " + e + " ") >= 0 } function c(t, e) { var n = f(t), o = n + e; a(n, e) || (t.className = o.substring(1)) } function l(t, e) { var n = f(t), o = void 0; a(t, e) && (o = n.replace(" " + e + " ", " "), t.className = o.substring(1, o.length - 1)) } function d(t) { t.parentNode && t.parentNode.removeChild(t) } function f(t) { return (" " + (t && t.className || "") + " ").replace(/\s+/gi, " ") } function h() { function t() { b.PageHidden = document[s], o() } function e() { b.PageHidden = !0, o() } function n() { b.PageHidden = !1, o() } function o() { b.PageHidden ? i() : r() } function i() { setTimeout(function () { Object.keys(b.Store).forEach(function (t) { b.Store.hasOwnProperty(t) && b.Store[t].options.visibilityControl && b.Store[t].stop() }) }, 100) } function r() { setTimeout(function () { Object.keys(b.Store).forEach(function (t) { b.Store.hasOwnProperty(t) && b.Store[t].options.visibilityControl && b.Store[t].resume() }), b.queueRenderAll() }, 100) } var s = void 0, a = void 0; void 0 !== document.hidden ? (s = "hidden", a = "visibilitychange") : void 0 !== document.msHidden ? (s = "msHidden", a = "msvisibilitychange") : void 0 !== document.webkitHidden && (s = "webkitHidden", a = "webkitvisibilitychange"), a && u(document, a, t), u(window, "blur", e), u(window, "focus", n) } function p(t) { if (t.hasSound) { var e = document.createElement("audio"); t.options.sounds.sources.forEach(function (t) { var n = document.createElement("source"); n.src = t, n.type = "audio/" + m(t), e.appendChild(n) }), t.barDom ? t.barDom.appendChild(e) : document.querySelector("body").appendChild(e), e.volume = t.options.sounds.volume, t.soundPlayed || (e.play(), t.soundPlayed = !0), e.onended = function () { d(e) } } } function m(t) { return t.match(/\.([^.]+)$/)[1] } Object.defineProperty(e, "__esModule", { value: !0 }), e.css = e.deepExtend = e.animationEndEvents = void 0; var v = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }; e.inArray = o, e.stopPropagation = i, e.generateID = r, e.outerHeight = s, e.addListener = u, e.hasClass = a, e.addClass = c, e.removeClass = l, e.remove = d, e.classList = f, e.visibilityChangeFlow = h, e.createAudioElements = p; var y = n(1), b = function (t) { if (t && t.__esModule) return t; var e = {}; if (null != t) for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]); return e.default = t, e }(y); e.animationEndEvents = "webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend", e.deepExtend = function t(e) { e = e || {}; for (var n = 1; n < arguments.length; n++) { var o = arguments[n]; if (o) for (var i in o) o.hasOwnProperty(i) && (Array.isArray(o[i]) ? e[i] = o[i] : "object" === v(o[i]) && null !== o[i] ? e[i] = t(e[i], o[i]) : e[i] = o[i]) } return e }, e.css = function () { function t(t) { return t.replace(/^-ms-/, "ms-").replace(/-([\da-z])/gi, function (t, e) { return e.toUpperCase() }) } function e(t) { var e = document.body.style; if (t in e) return t; for (var n = i.length, o = t.charAt(0).toUpperCase() + t.slice(1), r = void 0; n--;)if ((r = i[n] + o) in e) return r; return t } function n(n) { return n = t(n), r[n] || (r[n] = e(n)) } function o(t, e, o) { e = n(e), t.style[e] = o } var i = ["Webkit", "O", "Moz", "ms"], r = {}; return function (t, e) { var n = arguments, i = void 0, r = void 0; if (2 === n.length) for (i in e) e.hasOwnProperty(i) && void 0 !== (r = e[i]) && e.hasOwnProperty(i) && o(t, i, r); else o(t, n[1], n[2]) } }() }, function (t, e, n) { "use strict"; function o() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "global", e = 0, n = x; return E.hasOwnProperty(t) && (n = E[t].maxVisible, Object.keys(P).forEach(function (n) { P[n].options.queue !== t || P[n].closed || e++ })), { current: e, maxVisible: n } } function i(t) { E.hasOwnProperty(t.options.queue) || (E[t.options.queue] = { maxVisible: x, queue: [] }), E[t.options.queue].queue.push(t) } function r(t) { if (E.hasOwnProperty(t.options.queue)) { var e = []; Object.keys(E[t.options.queue].queue).forEach(function (n) { E[t.options.queue].queue[n].id !== t.id && e.push(E[t.options.queue].queue[n]) }), E[t.options.queue].queue = e } } function s() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "global"; if (E.hasOwnProperty(t)) { var e = E[t].queue.shift(); e && e.show() } } function u() { Object.keys(E).forEach(function (t) { s(t) }) } function a(t) { var e = k.generateID("ghost"), n = document.createElement("div"); n.setAttribute("id", e), k.css(n, { height: k.outerHeight(t.barDom) + "px" }), t.barDom.insertAdjacentHTML("afterend", n.outerHTML), k.remove(t.barDom), n = document.getElementById(e), k.addClass(n, "noty_fix_effects_height"), k.addListener(n, k.animationEndEvents, function () { k.remove(n) }) } function c(t) { m(t); var e = '<div class="noty_body">' + t.options.text + "</div>" + d(t) + '<div class="noty_progressbar"></div>'; t.barDom = document.createElement("div"), t.barDom.setAttribute("id", t.id), k.addClass(t.barDom, "noty_bar noty_type__" + t.options.type + " noty_theme__" + t.options.theme), t.barDom.innerHTML = e, b(t, "onTemplate") } function l(t) { return !(!t.options.buttons || !Object.keys(t.options.buttons).length) } function d(t) { if (l(t)) { var e = document.createElement("div"); return k.addClass(e, "noty_buttons"), Object.keys(t.options.buttons).forEach(function (n) { e.appendChild(t.options.buttons[n].dom) }), t.options.buttons.forEach(function (t) { e.appendChild(t.dom) }), e.outerHTML } return "" } function f(t) { t.options.modal && (0 === C && p(), e.DocModalCount = C += 1) } function h(t) { if (t.options.modal && C > 0 && (e.DocModalCount = C -= 1, C <= 0)) { var n = document.querySelector(".noty_modal"); n && (k.removeClass(n, "noty_modal_open"), k.addClass(n, "noty_modal_close"), k.addListener(n, k.animationEndEvents, function () { k.remove(n) })) } } function p() { var t = document.querySelector("body"), e = document.createElement("div"); k.addClass(e, "noty_modal"), t.insertBefore(e, t.firstChild), k.addClass(e, "noty_modal_open"), k.addListener(e, k.animationEndEvents, function () { k.removeClass(e, "noty_modal_open") }) } function m(t) { if (t.options.container) return void (t.layoutDom = document.querySelector(t.options.container)); var e = "noty_layout__" + t.options.layout; t.layoutDom = document.querySelector("div#" + e), t.layoutDom || (t.layoutDom = document.createElement("div"), t.layoutDom.setAttribute("id", e), t.layoutDom.setAttribute("role", "alert"), t.layoutDom.setAttribute("aria-live", "polite"), k.addClass(t.layoutDom, "noty_layout"), document.querySelector("body").appendChild(t.layoutDom)) } function v(t) { t.options.timeout && (t.options.progressBar && t.progressDom && k.css(t.progressDom, { transition: "width " + t.options.timeout + "ms linear", width: "0%" }), clearTimeout(t.closeTimer), t.closeTimer = setTimeout(function () { t.close() }, t.options.timeout)) } function y(t) { t.options.timeout && t.closeTimer && (clearTimeout(t.closeTimer), t.closeTimer = -1, t.options.progressBar && t.progressDom && k.css(t.progressDom, { transition: "width 0ms linear", width: "100%" })) } function b(t, e) { t.listeners.hasOwnProperty(e) && t.listeners[e].forEach(function (e) { "function" == typeof e && e.apply(t) }) } function w(t) { b(t, "afterShow"), v(t), k.addListener(t.barDom, "mouseenter", function () { y(t) }), k.addListener(t.barDom, "mouseleave", function () { v(t) }) } function g(t) { delete P[t.id], t.closing = !1, b(t, "afterClose"), k.remove(t.barDom), 0 !== t.layoutDom.querySelectorAll(".noty_bar").length || t.options.container || k.remove(t.layoutDom), (k.inArray("docVisible", t.options.titleCount.conditions) || k.inArray("docHidden", t.options.titleCount.conditions)) && D.decrement(), s(t.options.queue) } Object.defineProperty(e, "__esModule", { value: !0 }), e.Defaults = e.Store = e.Queues = e.DefaultMaxVisible = e.docTitle = e.DocModalCount = e.PageHidden = void 0, e.getQueueCounts = o, e.addToQueue = i, e.removeFromQueue = r, e.queueRender = s, e.queueRenderAll = u, e.ghostFix = a, e.build = c, e.hasButtons = l, e.handleModal = f, e.handleModalClose = h, e.queueClose = v, e.dequeueClose = y, e.fire = b, e.openFlow = w, e.closeFlow = g; var _ = n(0), k = function (t) { if (t && t.__esModule) return t; var e = {}; if (null != t) for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]); return e.default = t, e }(_), C = (e.PageHidden = !1, e.DocModalCount = 0), S = { originalTitle: null, count: 0, changed: !1, timer: -1 }, D = e.docTitle = { increment: function () { S.count++ , D._update() }, decrement: function () { if (--S.count <= 0) return void D._clear(); D._update() }, _update: function () { var t = document.title; S.changed ? document.title = "(" + S.count + ") " + S.originalTitle : (S.originalTitle = t, document.title = "(" + S.count + ") " + t, S.changed = !0) }, _clear: function () { S.changed && (S.count = 0, document.title = S.originalTitle, S.changed = !1) } }, x = e.DefaultMaxVisible = 5, E = e.Queues = { global: { maxVisible: x, queue: [] } }, P = e.Store = {}; e.Defaults = { type: "alert", layout: "topRight", theme: "mint", text: "", timeout: !1, progressBar: !0, closeWith: ["click"], animation: { open: "noty_effects_open", close: "noty_effects_close" }, id: !1, force: !1, killer: !1, queue: "global", container: !1, buttons: [], callbacks: { beforeShow: null, onShow: null, afterShow: null, onClose: null, afterClose: null, onClick: null, onHover: null, onTemplate: null }, sounds: { sources: [], volume: 1, conditions: [] }, titleCount: { conditions: [] }, modal: !1, visibilityControl: !1 } }, function (t, e, n) { "use strict"; function o(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(e, "__esModule", { value: !0 }), e.NotyButton = void 0; var i = n(0), r = function (t) { if (t && t.__esModule) return t; var e = {}; if (null != t) for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]); return e.default = t, e }(i); e.NotyButton = function t(e, n, i) { var s = this, u = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {}; return o(this, t), this.dom = document.createElement("button"), this.dom.innerHTML = e, this.id = u.id = u.id || r.generateID("button"), this.cb = i, Object.keys(u).forEach(function (t) { s.dom.setAttribute(t, u[t]) }), r.addClass(this.dom, n || "noty_btn"), this } }, function (t, e, n) { "use strict"; function o(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(e, "__esModule", { value: !0 }); var i = function () { function t(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } return function (e, n, o) { return n && t(e.prototype, n), o && t(e, o), e } }(); e.Push = function () { function t() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "/service-worker.js"; return o(this, t), this.subData = {}, this.workerPath = e, this.listeners = { onPermissionGranted: [], onPermissionDenied: [], onSubscriptionSuccess: [], onSubscriptionCancel: [], onWorkerError: [], onWorkerSuccess: [], onWorkerNotSupported: [] }, this } return i(t, [{ key: "on", value: function (t) { var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : function () { }; return "function" == typeof e && this.listeners.hasOwnProperty(t) && this.listeners[t].push(e), this } }, { key: "fire", value: function (t) { var e = this, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : []; this.listeners.hasOwnProperty(t) && this.listeners[t].forEach(function (t) { "function" == typeof t && t.apply(e, n) }) } }, { key: "create", value: function () { console.log("NOT IMPLEMENTED YET") } }, { key: "isSupported", value: function () { var t = !1; try { t = window.Notification || window.webkitNotifications || navigator.mozNotification || window.external && void 0 !== window.external.msIsSiteMode() } catch (t) { } return t } }, { key: "getPermissionStatus", value: function () { var t = "default"; if (window.Notification && window.Notification.permissionLevel) t = window.Notification.permissionLevel; else if (window.webkitNotifications && window.webkitNotifications.checkPermission) switch (window.webkitNotifications.checkPermission()) { case 1: t = "default"; break; case 0: t = "granted"; break; default: t = "denied" } else window.Notification && window.Notification.permission ? t = window.Notification.permission : navigator.mozNotification ? t = "granted" : window.external && void 0 !== window.external.msIsSiteMode() && (t = window.external.msIsSiteMode() ? "granted" : "default"); return t.toString().toLowerCase() } }, { key: "getEndpoint", value: function (t) { var e = t.endpoint, n = t.subscriptionId; return n && -1 === e.indexOf(n) && (e += "/" + n), e } }, { key: "isSWRegistered", value: function () { try { return "activated" === navigator.serviceWorker.controller.state } catch (t) { return !1 } } }, { key: "unregisterWorker", value: function () { var t = this; "serviceWorker" in navigator && navigator.serviceWorker.getRegistrations().then(function (e) { var n = !0, o = !1, i = void 0; try { for (var r, s = e[Symbol.iterator](); !(n = (r = s.next()).done); n = !0) { r.value.unregister(), t.fire("onSubscriptionCancel") } } catch (t) { o = !0, i = t } finally { try { !n && s.return && s.return() } finally { if (o) throw i } } }) } }, { key: "requestSubscription", value: function () { var t = this, e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0], n = this, o = this.getPermissionStatus(), i = function (o) { "granted" === o ? (t.fire("onPermissionGranted"), "serviceWorker" in navigator ? navigator.serviceWorker.register(t.workerPath).then(function () { navigator.serviceWorker.ready.then(function (t) { n.fire("onWorkerSuccess"), t.pushManager.subscribe({ userVisibleOnly: e }).then(function (t) { var e = t.getKey("p256dh"), o = t.getKey("auth"); n.subData = { endpoint: n.getEndpoint(t), p256dh: e ? window.btoa(String.fromCharCode.apply(null, new Uint8Array(e))) : null, auth: o ? window.btoa(String.fromCharCode.apply(null, new Uint8Array(o))) : null }, n.fire("onSubscriptionSuccess", [n.subData]) }).catch(function (t) { n.fire("onWorkerError", [t]) }) }) }) : n.fire("onWorkerNotSupported")) : "denied" === o && (t.fire("onPermissionDenied"), t.unregisterWorker()) }; "default" === o ? window.Notification && window.Notification.requestPermission ? window.Notification.requestPermission(i) : window.webkitNotifications && window.webkitNotifications.checkPermission && window.webkitNotifications.requestPermission(i) : i(o) } }]), t }() }, function (t, e, n) {
        (function (e, o) {/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   4.1.1
 */
            !function (e, n) { t.exports = n() }(0, function () { "use strict"; function t(t) { var e = typeof t; return null !== t && ("object" === e || "function" === e) } function i(t) { return "function" == typeof t } function r(t) { z = t } function s(t) { U = t } function u() { return void 0 !== R ? function () { R(c) } : a() } function a() { var t = setTimeout; return function () { return t(c, 1) } } function c() { for (var t = 0; t < I; t += 2) { (0, X[t])(X[t + 1]), X[t] = void 0, X[t + 1] = void 0 } I = 0 } function l(t, e) { var n = arguments, o = this, i = new this.constructor(f); void 0 === i[tt] && A(i); var r = o._state; return r ? function () { var t = n[r - 1]; U(function () { return P(r, i, t, o._result) }) }() : S(o, i, t, e), i } function d(t) { var e = this; if (t && "object" == typeof t && t.constructor === e) return t; var n = new e(f); return g(n, t), n } function f() { } function h() { return new TypeError("You cannot resolve a promise with itself") } function p() { return new TypeError("A promises callback cannot return that same promise.") } function m(t) { try { return t.then } catch (t) { return it.error = t, it } } function v(t, e, n, o) { try { t.call(e, n, o) } catch (t) { return t } } function y(t, e, n) { U(function (t) { var o = !1, i = v(n, e, function (n) { o || (o = !0, e !== n ? g(t, n) : k(t, n)) }, function (e) { o || (o = !0, C(t, e)) }, "Settle: " + (t._label || " unknown promise")); !o && i && (o = !0, C(t, i)) }, t) } function b(t, e) { e._state === nt ? k(t, e._result) : e._state === ot ? C(t, e._result) : S(e, void 0, function (e) { return g(t, e) }, function (e) { return C(t, e) }) } function w(t, e, n) { e.constructor === t.constructor && n === l && e.constructor.resolve === d ? b(t, e) : n === it ? (C(t, it.error), it.error = null) : void 0 === n ? k(t, e) : i(n) ? y(t, e, n) : k(t, e) } function g(e, n) { e === n ? C(e, h()) : t(n) ? w(e, n, m(n)) : k(e, n) } function _(t) { t._onerror && t._onerror(t._result), D(t) } function k(t, e) { t._state === et && (t._result = e, t._state = nt, 0 !== t._subscribers.length && U(D, t)) } function C(t, e) { t._state === et && (t._state = ot, t._result = e, U(_, t)) } function S(t, e, n, o) { var i = t._subscribers, r = i.length; t._onerror = null, i[r] = e, i[r + nt] = n, i[r + ot] = o, 0 === r && t._state && U(D, t) } function D(t) { var e = t._subscribers, n = t._state; if (0 !== e.length) { for (var o = void 0, i = void 0, r = t._result, s = 0; s < e.length; s += 3)o = e[s], i = e[s + n], o ? P(n, o, i, r) : i(r); t._subscribers.length = 0 } } function x() { this.error = null } function E(t, e) { try { return t(e) } catch (t) { return rt.error = t, rt } } function P(t, e, n, o) { var r = i(n), s = void 0, u = void 0, a = void 0, c = void 0; if (r) { if (s = E(n, o), s === rt ? (c = !0, u = s.error, s.error = null) : a = !0, e === s) return void C(e, p()) } else s = o, a = !0; e._state !== et || (r && a ? g(e, s) : c ? C(e, u) : t === nt ? k(e, s) : t === ot && C(e, s)) } function T(t, e) { try { e(function (e) { g(t, e) }, function (e) { C(t, e) }) } catch (e) { C(t, e) } } function O() { return st++ } function A(t) { t[tt] = st++ , t._state = void 0, t._result = void 0, t._subscribers = [] } function M(t, e) { this._instanceConstructor = t, this.promise = new t(f), this.promise[tt] || A(this.promise), F(e) ? (this.length = e.length, this._remaining = e.length, this._result = new Array(this.length), 0 === this.length ? k(this.promise, this._result) : (this.length = this.length || 0, this._enumerate(e), 0 === this._remaining && k(this.promise, this._result))) : C(this.promise, q()) } function q() { return new Error("Array Methods must be provided an Array") } function j(t) { return new M(this, t).promise } function N(t) { var e = this; return new e(F(t) ? function (n, o) { for (var i = t.length, r = 0; r < i; r++)e.resolve(t[r]).then(n, o) } : function (t, e) { return e(new TypeError("You must pass an array to race.")) }) } function L(t) { var e = this, n = new e(f); return C(n, t), n } function H() { throw new TypeError("You must pass a resolver function as the first argument to the promise constructor") } function W() { throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.") } function Q(t) { this[tt] = O(), this._result = this._state = void 0, this._subscribers = [], f !== t && ("function" != typeof t && H(), this instanceof Q ? T(this, t) : W()) } function V() { var t = void 0; if (void 0 !== o) t = o; else if ("undefined" != typeof self) t = self; else try { t = Function("return this")() } catch (t) { throw new Error("polyfill failed because global object is unavailable in this environment") } var e = t.Promise; if (e) { var n = null; try { n = Object.prototype.toString.call(e.resolve()) } catch (t) { } if ("[object Promise]" === n && !e.cast) return } t.Promise = Q } var B = void 0; B = Array.isArray ? Array.isArray : function (t) { return "[object Array]" === Object.prototype.toString.call(t) }; var F = B, I = 0, R = void 0, z = void 0, U = function (t, e) { X[I] = t, X[I + 1] = e, 2 === (I += 2) && (z ? z(c) : Z()) }, Y = "undefined" != typeof window ? window : void 0, K = Y || {}, G = K.MutationObserver || K.WebKitMutationObserver, $ = "undefined" == typeof self && void 0 !== e && "[object process]" === {}.toString.call(e), J = "undefined" != typeof Uint8ClampedArray && "undefined" != typeof importScripts && "undefined" != typeof MessageChannel, X = new Array(1e3), Z = void 0; Z = $ ? function () { return function () { return e.nextTick(c) } }() : G ? function () { var t = 0, e = new G(c), n = document.createTextNode(""); return e.observe(n, { characterData: !0 }), function () { n.data = t = ++t % 2 } }() : J ? function () { var t = new MessageChannel; return t.port1.onmessage = c, function () { return t.port2.postMessage(0) } }() : void 0 === Y ? function () { try { var t = n(9); return R = t.runOnLoop || t.runOnContext, u() } catch (t) { return a() } }() : a(); var tt = Math.random().toString(36).substring(16), et = void 0, nt = 1, ot = 2, it = new x, rt = new x, st = 0; return M.prototype._enumerate = function (t) { for (var e = 0; this._state === et && e < t.length; e++)this._eachEntry(t[e], e) }, M.prototype._eachEntry = function (t, e) { var n = this._instanceConstructor, o = n.resolve; if (o === d) { var i = m(t); if (i === l && t._state !== et) this._settledAt(t._state, e, t._result); else if ("function" != typeof i) this._remaining-- , this._result[e] = t; else if (n === Q) { var r = new n(f); w(r, t, i), this._willSettleAt(r, e) } else this._willSettleAt(new n(function (e) { return e(t) }), e) } else this._willSettleAt(o(t), e) }, M.prototype._settledAt = function (t, e, n) { var o = this.promise; o._state === et && (this._remaining-- , t === ot ? C(o, n) : this._result[e] = n), 0 === this._remaining && k(o, this._result) }, M.prototype._willSettleAt = function (t, e) { var n = this; S(t, void 0, function (t) { return n._settledAt(nt, e, t) }, function (t) { return n._settledAt(ot, e, t) }) }, Q.all = j, Q.race = N, Q.resolve = d, Q.reject = L, Q._setScheduler = r, Q._setAsap = s, Q._asap = U, Q.prototype = { constructor: Q, then: l, catch: function (t) { return this.then(null, t) } }, Q.polyfill = V, Q.Promise = Q, Q })
        }).call(e, n(7), n(8))
    }, function (t, e) { }, function (t, e, n) { "use strict"; function o(t) { if (t && t.__esModule) return t; var e = {}; if (null != t) for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]); return e.default = t, e } function i(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(e, "__esModule", { value: !0 }); var r = function () { function t(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } return function (e, n, o) { return n && t(e.prototype, n), o && t(e, o), e } }(); n(5); var s = n(4), u = function (t) { return t && t.__esModule ? t : { default: t } }(s), a = n(0), c = o(a), l = n(1), d = o(l), f = n(2), h = n(3), p = function () { function t() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; return i(this, t), this.options = c.deepExtend({}, d.Defaults, e), d.Store[this.options.id] ? d.Store[this.options.id] : (this.id = this.options.id || c.generateID("bar"), this.closeTimer = -1, this.barDom = null, this.layoutDom = null, this.progressDom = null, this.showing = !1, this.shown = !1, this.closed = !1, this.closing = !1, this.killable = this.options.timeout || this.options.closeWith.length > 0, this.hasSound = this.options.sounds.sources.length > 0, this.soundPlayed = !1, this.listeners = { beforeShow: [], onShow: [], afterShow: [], onClose: [], afterClose: [], onClick: [], onHover: [], onTemplate: [] }, this.promises = { show: null, close: null }, this.on("beforeShow", this.options.callbacks.beforeShow), this.on("onShow", this.options.callbacks.onShow), this.on("afterShow", this.options.callbacks.afterShow), this.on("onClose", this.options.callbacks.onClose), this.on("afterClose", this.options.callbacks.afterClose), this.on("onClick", this.options.callbacks.onClick), this.on("onHover", this.options.callbacks.onHover), this.on("onTemplate", this.options.callbacks.onTemplate), this) } return r(t, [{ key: "on", value: function (t) { var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : function () { }; return "function" == typeof e && this.listeners.hasOwnProperty(t) && this.listeners[t].push(e), this } }, { key: "show", value: function () { var e = this; if (this.showing || this.shown) return this; !0 === this.options.killer ? t.closeAll() : "string" == typeof this.options.killer && t.closeAll(this.options.killer); var n = d.getQueueCounts(this.options.queue); if (n.current >= n.maxVisible || d.PageHidden && this.options.visibilityControl) return d.addToQueue(this), d.PageHidden && this.hasSound && c.inArray("docHidden", this.options.sounds.conditions) && c.createAudioElements(this), d.PageHidden && c.inArray("docHidden", this.options.titleCount.conditions) && d.docTitle.increment(), this; if (d.Store[this.id] = this, d.fire(this, "beforeShow"), this.showing = !0, this.closing) return this.showing = !1, this; if (d.build(this), d.handleModal(this), this.options.force ? this.layoutDom.insertBefore(this.barDom, this.layoutDom.firstChild) : this.layoutDom.appendChild(this.barDom), this.hasSound && !this.soundPlayed && c.inArray("docVisible", this.options.sounds.conditions) && c.createAudioElements(this), c.inArray("docVisible", this.options.titleCount.conditions) && d.docTitle.increment(), this.shown = !0, this.closed = !1, d.hasButtons(this) && Object.keys(this.options.buttons).forEach(function (t) { var n = e.barDom.querySelector("#" + e.options.buttons[t].id); c.addListener(n, "click", function (n) { c.stopPropagation(n), e.options.buttons[t].cb(e) }) }), this.progressDom = this.barDom.querySelector(".noty_progressbar"), c.inArray("click", this.options.closeWith) && (c.addClass(this.barDom, "noty_close_with_click"), c.addListener(this.barDom, "click", function (t) { c.stopPropagation(t), d.fire(e, "onClick"), e.close() }, !1)), c.addListener(this.barDom, "mouseenter", function () { d.fire(e, "onHover") }, !1), this.options.timeout && c.addClass(this.barDom, "noty_has_timeout"), this.options.progressBar && c.addClass(this.barDom, "noty_has_progressbar"), c.inArray("button", this.options.closeWith)) { c.addClass(this.barDom, "noty_close_with_button"); var o = document.createElement("div"); c.addClass(o, "noty_close_button"), o.innerHTML = "", this.barDom.appendChild(o), c.addListener(o, "click", function (t) { c.stopPropagation(t), e.close() }, !1) } return d.fire(this, "onShow"), null === this.options.animation.open ? this.promises.show = new u.default(function (t) { t() }) : "function" == typeof this.options.animation.open ? this.promises.show = new u.default(this.options.animation.open.bind(this)) : (c.addClass(this.barDom, this.options.animation.open), this.promises.show = new u.default(function (t) { c.addListener(e.barDom, c.animationEndEvents, function () { c.removeClass(e.barDom, e.options.animation.open), t() }) })), this.promises.show.then(function () { var t = e; setTimeout(function () { d.openFlow(t) }, 100) }), this } }, { key: "stop", value: function () { return d.dequeueClose(this), this } }, { key: "resume", value: function () { return d.queueClose(this), this } }, { key: "setTimeout", value: function (t) { function e(e) { return t.apply(this, arguments) } return e.toString = function () { return t.toString() }, e }(function (t) { if (this.stop(), this.options.timeout = t, this.barDom) { this.options.timeout ? c.addClass(this.barDom, "noty_has_timeout") : c.removeClass(this.barDom, "noty_has_timeout"); var e = this; setTimeout(function () { e.resume() }, 100) } return this }) }, { key: "setText", value: function (t) { var e = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; return this.barDom && (this.barDom.querySelector(".noty_body").innerHTML = t), e && (this.options.text = t), this } }, { key: "setType", value: function (t) { var e = this, n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; if (this.barDom) { c.classList(this.barDom).split(" ").forEach(function (t) { "noty_type__" === t.substring(0, 11) && c.removeClass(e.barDom, t) }), c.addClass(this.barDom, "noty_type__" + t) } return n && (this.options.type = t), this } }, { key: "setTheme", value: function (t) { var e = this, n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; if (this.barDom) { c.classList(this.barDom).split(" ").forEach(function (t) { "noty_theme__" === t.substring(0, 12) && c.removeClass(e.barDom, t) }), c.addClass(this.barDom, "noty_theme__" + t) } return n && (this.options.theme = t), this } }, { key: "close", value: function () { var t = this; return this.closed ? this : this.shown ? (d.fire(this, "onClose"), this.closing = !0, null === this.options.animation.close || !1 === this.options.animation.close ? this.promises.close = new u.default(function (t) { t() }) : "function" == typeof this.options.animation.close ? this.promises.close = new u.default(this.options.animation.close.bind(this)) : (c.addClass(this.barDom, this.options.animation.close), this.promises.close = new u.default(function (e) { c.addListener(t.barDom, c.animationEndEvents, function () { t.options.force ? c.remove(t.barDom) : d.ghostFix(t), e() }) })), this.promises.close.then(function () { d.closeFlow(t), d.handleModalClose(t) }), this.closed = !0, this) : (d.removeFromQueue(this), this) } }], [{ key: "closeAll", value: function () { var t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; return Object.keys(d.Store).forEach(function (e) { t ? d.Store[e].options.queue === t && d.Store[e].killable && d.Store[e].close() : d.Store[e].killable && d.Store[e].close() }), this } }, { key: "clearQueue", value: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "global"; return d.Queues.hasOwnProperty(t) && (d.Queues[t].queue = []), this } }, { key: "overrideDefaults", value: function (t) { return d.Defaults = c.deepExtend({}, d.Defaults, t), this } }, { key: "setMaxVisible", value: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : d.DefaultMaxVisible, e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "global"; return d.Queues.hasOwnProperty(e) || (d.Queues[e] = { maxVisible: t, queue: [] }), d.Queues[e].maxVisible = t, this } }, { key: "button", value: function (t) { var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, n = arguments[2], o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {}; return new f.NotyButton(t, e, n, o) } }, { key: "version", value: function () { return "3.2.0-beta" } }, { key: "Push", value: function (t) { return new h.Push(t) } }, { key: "Queues", get: function () { return d.Queues } }, { key: "PageHidden", get: function () { return d.PageHidden } }]), t }(); e.default = p, "undefined" != typeof window && c.visibilityChangeFlow(), t.exports = e.default }, function (t, e) { function n() { throw new Error("setTimeout has not been defined") } function o() { throw new Error("clearTimeout has not been defined") } function i(t) { if (l === setTimeout) return setTimeout(t, 0); if ((l === n || !l) && setTimeout) return l = setTimeout, setTimeout(t, 0); try { return l(t, 0) } catch (e) { try { return l.call(null, t, 0) } catch (e) { return l.call(this, t, 0) } } } function r(t) { if (d === clearTimeout) return clearTimeout(t); if ((d === o || !d) && clearTimeout) return d = clearTimeout, clearTimeout(t); try { return d(t) } catch (e) { try { return d.call(null, t) } catch (e) { return d.call(this, t) } } } function s() { m && h && (m = !1, h.length ? p = h.concat(p) : v = -1, p.length && u()) } function u() { if (!m) { var t = i(s); m = !0; for (var e = p.length; e;) { for (h = p, p = []; ++v < e;)h && h[v].run(); v = -1, e = p.length } h = null, m = !1, r(t) } } function a(t, e) { this.fun = t, this.array = e } function c() { } var l, d, f = t.exports = {}; !function () { try { l = "function" == typeof setTimeout ? setTimeout : n } catch (t) { l = n } try { d = "function" == typeof clearTimeout ? clearTimeout : o } catch (t) { d = o } }(); var h, p = [], m = !1, v = -1; f.nextTick = function (t) { var e = new Array(arguments.length - 1); if (arguments.length > 1) for (var n = 1; n < arguments.length; n++)e[n - 1] = arguments[n]; p.push(new a(t, e)), 1 !== p.length || m || i(u) }, a.prototype.run = function () { this.fun.apply(null, this.array) }, f.title = "browser", f.browser = !0, f.env = {}, f.argv = [], f.version = "", f.versions = {}, f.on = c, f.addListener = c, f.once = c, f.off = c, f.removeListener = c, f.removeAllListeners = c, f.emit = c, f.prependListener = c, f.prependOnceListener = c, f.listeners = function (t) { return [] }, f.binding = function (t) { throw new Error("process.binding is not supported") }, f.cwd = function () { return "/" }, f.chdir = function (t) { throw new Error("process.chdir is not supported") }, f.umask = function () { return 0 } }, function (t, e) { var n; n = function () { return this }(); try { n = n || Function("return this")() || (0, eval)("this") } catch (t) { "object" == typeof window && (n = window) } t.exports = n }, function (t, e) { }])
});
//# sourceMappingURL=noty.min.js.map;

function ShowSystemNotification(message, notificationType) {
    notificationType = notificationType || 0;
    var messageStyle = 'error'; // error
    if (notificationType == 1)
        messageStyle = 'success'; // success

    new Noty({
        type: messageStyle,
        theme: 'sunset',
        timeout: 3000,
        text: message,
        layout: isMobile() ? 'topRight' : 'centerRight'
    }).show();
}

function Block(id, message) {
    message = message || 'Loading';
    message = message + '...';

    if ($('#' + id) != null && $('#' + id).length > 0) {
        $('#' + id).LoadingOverlay("show", {
            //background: 'whitesmoke',
            image:'',
            //text: message,
            fontawesome: "fas fa-circle-notch fa-spin fa-fw",
            fontawesomeColor: '#DCDCDC',
            //imageResizeFactor: 0.5,
            textResizeFactor: 0.3,
            direction: 'row',
            //textorder: 1,
            //imageOrder: 2
        });
    }
}

function UnBlock(id) {
    if ($('#' + id) != null && $('#' + id).length > 0) {
        $('#' + id).LoadingOverlay("hide");
        $('#' + id).LoadingOverlay("hide");
    }

}

function ChangeElementState(id, isDisable) {
    if (isDisable)
        $('#' + id).addClass('disabled');
    else
        $('#' + id).removeClass('disabled');
    $('#' + id).prop('disabled', isDisable);
}

function EnableLoading(id, content) {
    if ($('#' + id) != null && $('#' + id).length > 0) {
        if (typeof content !== "undefined") {
            $('#' + id).html(content)
        }
        var text = $('#' + id).html();
        $('#' + id).html(text + ' <img src="/content/images/icons/loading.gif" style="height:20px;width:20px;" />');
        ChangeElementState(id, true);
    }
}

function DisableLoading(id) {
    if ($('#' + id) != null && $('#' + id).length > 0) {
        var text = $('#' + id).html();
        ChangeElementState(id, false);
        var ua = window.navigator.userAgent;
        var msie = ua.indexOf("MSIE");
        if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\:11\./))      // If Internet Explorer || IE browser with EDGE mode
            $('#' + id).html(text.replace('<img style=\"width: 20px; height: 20px;\" src=\"/content/images/icons/loading.gif\">', ''));
        else                 // If another browser
            $('#' + id).html(text.replace('<img src="/content/images/icons/loading.gif" style="height:20px;width:20px;">', ''));
    }
}

function ValidateIsNumeric(key) {
    //getting key code of pressed key
    var keycode = (key.which) ? key.which : key.keyCode;
    //comparing pressed keycodes

    if (keycode > 31 && (keycode < 48 || keycode > 57)) {

        return false;
    }
    else
        return true;
}

function ConfigureTouchSpin(className, minimumValue, maximumValue, stepCount, buttonUpClassName, buttonDownClassName) {
    $("." + className).TouchSpin({
        min: minimumValue,
        max: maximumValue,
        step: stepCount,
        buttondown_class: buttonDownClassName,
        buttonup_class: buttonUpClassName
    });
}

function RedirectBookingConfirmation(bookingReferenceID) {
    window.location.href = "/Checkout/" + bookingReferenceID;
}

function RedirectBookingConfirmation2(bookingReferenceID) {
    window.location.href = "/partnerorder/" + bookingReferenceID;
}

function isMobile() {
    if ($(window).width() < 992) {
        return true;
    }
    return false;
}

function isAndroid() {
    return navigator.userAgent.toLowerCase().indexOf("android") > -1
}

function scrollToTop() {
    jQuery('html,body').animate({ scrollTop: 0 }, 0);
}

function goToByScroll(id, scrollForDesktop) {
    scrollForDesktop = scrollForDesktop || false;
    if (!isMobile() && scrollForDesktop === false) {
        return;
    }
    // Scroll
    $('html,body').animate({
        scrollTop: $("#" + id).offset().top - 90
    },
        'fast');
}

function SetCaretAtEnd(elem) {
    elem = $(elem).get(0);
    var elemLen = elem.value.length;
    if (elemLen == 0) {
        elem.focus();
        return;
    }
    // For IE Only
    if (document.selection) {
        // Set focus
        elem.focus();
        // Use IE Ranges
        var oSel = document.selection.createRange();
        // Reset position to 0 & then set at end
        oSel.moveStart('character', -elemLen);
        oSel.moveStart('character', elemLen);
        oSel.moveEnd('character', 0);
        oSel.select();
    }
    else if (elem.selectionStart || elem.selectionStart == '0') {
        // Firefox/Chrome
        elem.selectionStart = elemLen;
        elem.selectionEnd = elemLen;
        elem.focus();
    } // if
}

function FindBrowserName() {
    var nVer = navigator.appVersion;
    var nAgt = navigator.userAgent;
    var browserName = navigator.appName;
    var fullVersion = '' + parseFloat(navigator.appVersion);
    var majorVersion = parseInt(navigator.appVersion, 10);
    var nameOffset, verOffset, ix;

    // In Opera, the true version is after "Opera" or after "Version"
    if ((verOffset = nAgt.indexOf("Opera")) != -1) {
        browserName = "Opera";
        fullVersion = nAgt.substring(verOffset + 6);
        if ((verOffset = nAgt.indexOf("Version")) != -1)
            fullVersion = nAgt.substring(verOffset + 8);
    }
        // In MSIE, the true version is after "MSIE" in userAgent
    else if ((verOffset = nAgt.indexOf("MSIE")) != -1) {
        browserName = "Microsoft Internet Explorer";
        fullVersion = nAgt.substring(verOffset + 5);
    }
        // In Edge, the true version is after "Edge" 
    else if ((verOffset = nAgt.indexOf("Edge")) != -1) {
        browserName = "Edge";
        fullVersion = nAgt.substring(verOffset + 5);
    }
        // In Chrome, the true version is after "Chrome" 
    else if ((verOffset = nAgt.indexOf("Chrome")) != -1) {
        browserName = "Chrome";
        fullVersion = nAgt.substring(verOffset + 7);
    }
        // In Safari, the true version is after "Safari" or after "Version" 
    else if ((verOffset = nAgt.indexOf("Safari")) != -1) {
        browserName = "Safari";
        fullVersion = nAgt.substring(verOffset + 7);
        if ((verOffset = nAgt.indexOf("Version")) != -1)
            fullVersion = nAgt.substring(verOffset + 8);
    }
        // In Firefox, the true version is after "Firefox" 
    else if ((verOffset = nAgt.indexOf("Firefox")) != -1) {
        browserName = "Firefox";
        fullVersion = nAgt.substring(verOffset + 8);
    }

        //for IE 11
    else if ((verOffset = nAgt.indexOf("rv:")) != -1) {
        browserName = "Microsoft Internet Explorer";
        fullVersion = nAgt.substring(verOffset + 3);
    }
        // In most other browsers, "name/version" is at the end of userAgent 
    else if ((nameOffset = nAgt.lastIndexOf(' ') + 1) < (verOffset = nAgt.lastIndexOf('/'))) {
        browserName = nAgt.substring(nameOffset, verOffset);
        fullVersion = nAgt.substring(verOffset + 1);
        if (browserName.toLowerCase() == browserName.toUpperCase()) {
            browserName = navigator.appName;
        }
    }
    // trim the fullVersion string at semicolon/space if present
    if ((ix = fullVersion.indexOf(";")) != -1)
        fullVersion = fullVersion.substring(0, ix);
    if ((ix = fullVersion.indexOf(" ")) != -1)
        fullVersion = fullVersion.substring(0, ix);

    majorVersion = parseInt('' + fullVersion, 10);
    if (isNaN(majorVersion)) {
        fullVersion = '' + parseFloat(navigator.appVersion);
        majorVersion = parseInt(navigator.appVersion, 10);
    }

    return (browserName + ' ' + majorVersion + ' ' + nAgt);
}

function nospaces(t) {
    if (t.value.match(/\s/g)) {
        t.value = t.value.replace(/\s/g, '');
    }
}

function updateQueryStringParameter(uri,key, value) {
    var value = encodeURIComponent(value);
    var re = new RegExp("([?&])" + key + "=.*?(&|$)", "i");
    var separator = uri.indexOf('?') !== -1 ? "&" : "?";
    if (uri.match(re)) {
        return uri.replace(re, '$1' + key + "=" + value + '$2');
    }
    else {
        return uri + separator + key + "=" + value;
    }
}

function detectIE() {
    var ua = window.navigator.userAgent;

    var msie = ua.indexOf('MSIE ');
    if (msie > 0) {
        // IE 10 or older => return version number
        return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);
    }

    var trident = ua.indexOf('Trident/');
    if (trident > 0) {
        // IE 11 => return version number
        var rv = ua.indexOf('rv:');
        return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);
    }

    // other browser
    return false;
}
if (typeof ko !== 'undefined') {
    ko.bindingHandlers.currency = {
        update: function (element, valueAccessor, allBindingsAccessor) {
            return ko.bindingHandlers.text.update(element, function () {
                var value = +(ko.utils.unwrapObservable(valueAccessor()) || 0),
                    symbol = ko.utils.unwrapObservable(allBindingsAccessor().symbol === undefined
                        ? allBindingsAccessor().symbol
                        : ko.bindingHandlers.currency.symbol);
                return '' + value.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, "$1,");
            });
        }
    };

    ko.bindingHandlers.currencyround = {
        update: function (element, valueAccessor, allBindingsAccessor) {
            return ko.bindingHandlers.text.update(element, function () {
                var value = +(ko.utils.unwrapObservable(valueAccessor()) || 0),
                    symbol = ko.utils.unwrapObservable(allBindingsAccessor().symbol === undefined
                        ? allBindingsAccessor().symbol
                        : ko.bindingHandlers.currency.symbol);
                return '' + Math.round(value).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, "$1,").replace('.00', '');
            });
        }
    };
}

$(document).ready(function () {
    if (typeof $('.lazy').Lazy != 'undefined') {
        $('.lazy').Lazy({
            scrollDirection: 'vertical',
            effect: 'fadeIn',
            visibleOnly: true
        });
    }

    $('[data-toggle="slide-collapse"]').on('click', function () {
        $navMenuCont = $($(this).data('target'));
        $navMenuCont.animate({
            'width': 'toggle'
        }, 350);
        $(".menu-overlay").fadeIn(500);

    });
    $(".menu-overlay").click(function (event) {
        $(".navbar-toggle").trigger("click");
        $(".menu-overlay").fadeOut(500);
    });

    CallOwlCarousel($('#divDidYouTry'));
    CallOwlCarouselAutoPlay($('#divHomepageCoupons'), 5000);
});

function CallOwlCarousel(item) {
    if ($('> div', item).length > 0) {
        $(item).owlCarousel({
            margin: 10,
            loop: true,
            nav: true,
            autoWidth: true,
            navText: ['<i class="fa fa-angle-left" aria-hidden="true"></i>', '<i class="fa fa-angle-right" aria-hidden="true"></i>']
        }).trigger('refresh.owl.carousel');
    }
}

function CallOwlCarouselAutoPlay(item, interval) {
    if ($('> div', item).length > 0) {
        $(item).owlCarousel({
            margin: 10,
            loop: true,
            nav: true,
            autoWidth: true,
            autoplay: true,
            autoplayTimeout: interval,
            autoplayHoverPause: true,
            navText: ['<i class="fa fa-angle-left" aria-hidden="true"></i>', '<i class="fa fa-angle-right" aria-hidden="true"></i>']
        }).trigger('refresh.owl.carousel');
    }
}

if ('serviceWorker' in navigator) {
    window.addEventListener('load', function () {
        //navigator.serviceWorker.register('/sw1.js');
    });
}

if ($('#divBannerMessage').length) {
    window.addEventListener('load', function () {
        //Ask user to install app if device is android
        //if (navigator.userAgent.toLowerCase().indexOf("android") > -1 && $("#divBannerMessage").length >= 0) {
        if ($("#divBannerMessage").length >= 0) {
            var start = Date.parse(localStorage.isBannerMessageDismiss),
                end = new Date(),
                diff = new Date(end - start),
                days = diff / 1000 / 60 / 60 / 24;

            //Show popup only once a day
            if (isNaN(start) || days > 5) {
                $('#divBannerMessage').css('display', 'block');
                $('#divBody').css('padding-top', ($('#divBannerMessage').height() + 54) + 'px');
            }
        }
    });
};

$('#btnBannerMessageDismiss').click(function (event) {
    localStorage.isBannerMessageDismiss = new Date();
    $('#divBannerMessage').css('display', 'none');
    $('#divBody').css('padding-top', '54px');
});

$('#btnBannerMessage').click(function (event) {
    delete localStorage.isBannerMessageDismiss;
    triggerAppOpen();
});

var fallbackToStore = function () {
    window.location.replace('market://details?id=com.pulse.pulsepharmacy&referrer=utm_campaign%3Dweb_banner');
};
var openApp = function () {
    window.location.replace('pulsepharmacydroid://');
};
var triggerAppOpen = function () {
    openApp();
    setTimeout(fallbackToStore, 250);
};;
var delayTimerUpdateLoc;
var delayTimerUpdateSearch;
var fullSearch;


function doSearch(obj) {
    if (event.keyCode == 13) {
        clearTimeout(delayTimerUpdateLoc);
    }
}
function delaySearch(obj) {
    clearTimeout(delayTimerUpdateLoc);
    clearTimeout(delayTimerUpdateSearch);
    fullSearch = false;
    delayTimerUpdateSearch = window.setTimeout(function () {
        if (obj.value.toUpperCase() != selfSearchManager.SearchText())
            selfSearchManager.SearchText(obj.value.toUpperCase());
    }, 500);
}

$(document).ready(function () {
    if (!document.getElementById('searchManagerContainer')) {
        return;
    }
    var searchManager = new SearchManagerModel();
    ko.applyBindings(searchManager, document.getElementById('searchManagerContainer'));

    if (window.location.href.toUpperCase().indexOf("/SEARCH") >= 0)
        selfSearchManager.IsSearchScreen(true);
    $('.divFilteredProductsTable').css('position', selfSearchManager.IsSearchScreen() ? 'relative' : 'absolute');
    $('.divFilteredProductsTable').css('top', selfSearchManager.IsSearchScreen() ? '0px' : $('#spanSearchBtn').height());

    if ($('#hdnSearchText').val() == '-') {
        document.getElementById("hdnSearchText").value = "";
    }

    if ($('#hdnSearchText').val() != '' && $('#hdnSearchText').val() != undefined) {
        selfSearchManager.SearchText($('#hdnSearchText').val().toUpperCase());
    }

    if ($('#hdnSearchLength').val() != '' && $('#hdnSearchLength').val() != undefined && !isMobile()) {
        selfSearchManager.DefaultSearchLength($('#hdnSearchLength').val());
    }

    if (selfSearchManager.IsSearchScreen() == true) {
        $('#txtSearch').focus();
        SetCaretAtEnd('#txtSearch');
    }
    $(window).scroll(function () {
        if (document.getElementById('searchManagerContainer') && $(window).scrollTop() >= $(document).height() - $(window).height() - 1200) {
            if (fullSearch == true || selfSearchManager.FilteredProducts().length != selfSearchManager.DefaultSearchLength() || selfSearchManager.FilteredProducts().length == 4)
                return;
            fullSearch = true;
            selfSearchManager.LoadProducts(selfSearchManager.SearchText(), false);
        }
    });
});

var selfSearchManager;
function SearchManagerModel() {
    selfSearchManager = this;
    selfSearchManager.SearchText = ko.observable('');
    selfSearchManager.FilteredProducts = ko.observableArray([]);
    selfSearchManager.ProductsLoaded = ko.observable(false);

    selfSearchManager.SearchText.subscribe(function () {
        if ($('#txtSearch').val().length == 0) {
            $('#txtSearch').val(selfSearchManager.SearchText());
        }

        selfSearchManager.ProductsLoaded(false);
        if (selfSearchManager.SearchText() != null && selfSearchManager.SearchText().length >= 1) {
            selfSearchManager.LoadProducts(selfSearchManager.SearchText(), true);
            if (selfSearchManager.IsSearchScreen() == false && isMobile())
                $('#divMainContent').hide();

            CalcSearchDropdownHeight();
        }
        else {
            selfSearchManager.FilteredProducts([]);
            $('#divMainContent').show();
        }
    });

    selfSearchManager.DefaultSearchLength = ko.observable(15);
    selfSearchManager.IsSearchScreen = ko.observable(false);

    selfSearchManager.ProductsLoaded.subscribe(function () {
        if (selfSearchManager.ProductsLoaded() == false)
            return;
       
        delayTimerUpdateLoc = window.setTimeout(selfSearchManager.UploadAddress, 3000);

        $("#tblSearch").delegate('tbody tr', 'click', function (e) {
            var prodlink = $(this).attr('data-href');
            if (e.target.tagName == 'BUTTON' || e.target.innerText.indexOf('Checkout') >= 0 ||
                e.target.innerText.indexOf('Did you mean') > -1) {
                //do nothing
            } else {
                e.preventDefault();
                window.location.href = prodlink;
            }

        });
    });

    selfSearchManager.UploadAddress = function () {
        if (selfSearchManager.SearchText() != undefined && selfSearchManager.SearchText().length > 0) {
            var loc = (updateQueryStringParameter("", 'q', selfSearchManager.SearchText()));
            loc = "/search/" + loc;
            if (selfSearchManager.IsSearchScreen()) {
                window.history.pushState(null, null, loc);
            }
            ga('send', 'pageview', loc);
        }
    }

    selfSearchManager.LoadProducts = function (searchText, isScrollToTop) {
        var url = "/Pulse/SearchProduct";
        $("#imgLoadingSearch").show();
        $.ajax({
            url: url,
            method: 'GET',
            data: { searchText: searchText, searchLength: fullSearch ? 100 : selfSearchManager.DefaultSearchLength() },
            success: function (data) {
                selfSearchManager.FilteredProducts([]);
                if (data != null && data.length != 0) {
                    $.each(data, function (index, item) {
                        var medicalItem = new MedicalItemModel();
                        medicalItem.ProductCode(item.ProductCode);
                        medicalItem.ProductName(item.ProductName);
                        medicalItem.ProductLinkUrl(item.ProductLinkUrl);
                        medicalItem.MfgName(item.MfgName);
                        medicalItem.MRP(item.MRP);
                        medicalItem.SalePriceMax(item.SalePriceMax);
                        medicalItem.Quantity(item.Quantity);
                        medicalItem.IsAvailable(item.IsAvailable);
                        medicalItem.Packing(item.Packing);
                        medicalItem.PackingType(item.PackingType);
                        medicalItem.IsInCart(item.Quantity == 0 ? 0 : 1);

                        selfSearchManager.FilteredProducts.push(medicalItem);

                        medicalItem.Quantity.subscribe(function () {
                            medicalItem.IsInCart(medicalItem.Quantity() == 0 ? 0 : 1);
                            medicalItem.ShowCheckout(medicalItem.IsInCart());

                            //This is for updating quantity in product page
                            if (typeof selfProductManager !== 'undefined') {
                                    if (medicalItem.ProductCode() == SelectedProductModel.ProductCode)
                                        selfProductManager.Quantity(medicalItem.Quantity());
                            }

                            $.ajax({
                                url: "/Pulse/AddProductToCart",
                                type: "POST",
                                content: "application/json; charset=utf-8",
                                dataType: "json",
                                data: { ProductCode: medicalItem.ProductCode, Quantity: medicalItem.Quantity },
                                success: function (data) {
                                    headerManager.SessionCartItemsCount(data.SessionCartItemsCount);
                                    headerManager.SessionCartValue(data.SessionCartValue);
                                },
                                complete: function () {
                                }
                            });
                        });
                    });
                    if (selfSearchManager.FilteredProducts().length > 0 && isScrollToTop) {
                        goToByScroll("custom-search-input", true);
                    }

                    if (selfSearchManager.IsSearchScreen() == false)
                        $(".search-overlay").fadeIn(200);

                    ConfigureTouchSpin('touch-spinner', 0, 100, 1, 'btn btn-flat btn-primary', 'btn btn-flat btn-default active');
                }
            },
            complete: function () {
                $("#imgLoadingSearch").hide();
                selfSearchManager.ProductsLoaded(true);
            }
        });
    }
}


function MedicalItemModel() {
    var self = this;
    self.ProductCode = ko.observable(0);
    self.ProductName = ko.observable('');
    self.ProductLinkUrl = ko.observable('');
    self.MfgName = ko.observable('');
    self.MRP = ko.observable(0);
    self.Quantity = ko.observable(0);
    self.SalePriceMax = ko.observable(0);
    self.IsAvailable = ko.observable(0);
    self.Packing = ko.observable('');
    self.PackingType = ko.observable('');
    self.IsInCart = ko.observable(0);
    self.ShowCheckout = ko.observable(0);
    self.UpdateProductCart = function () {
        self.Quantity(1);
    }
    self.QuantityDisplay = ko.computed(function () {
        return self.Quantity() + ' ' + self.PackingType().toLowerCase() + (self.Quantity() > 1 ? 's' : '') + ' in cart';
    });
    self.CheckoutClick = function () {
        EnableLoading('btnCheckout' + self.ProductCode());
        window.location.href = '/cart';
    }
}

$(".search-overlay").click(function (event) {
    selfSearchManager.ProductsLoaded(false);
    selfSearchManager.FilteredProducts([]);
    $(".search-overlay").fadeOut(100);
    $('#divMainContent').show();
});

function CalcSearchDropdownHeight() {
    $('.navbar .divFilteredProductsTable').css('max-height', $(window).height() - $('.navbar').innerHeight());
}

$(window).resize(function () {
    CalcSearchDropdownHeight();
});;
$(document).ready(function () {
    if (!document.getElementById('searchLabManagerContainer')) {
        return;
    }
    var searchLabManager = new SearchLabManagerModel();
    ko.applyBindings(searchLabManager, document.getElementById('searchLabManagerContainer'));

    $('.divFilteredProductsTable').css('position', 'absolute');
    $('.divFilteredProductsTable').css('top', $('#spanSearchBtn').height());

    if ($('#hdnSearchLength').val() != '' && $('#hdnSearchLength').val() != undefined && !isMobile()) {
        selfSearchLabManager.DefaultSearchLength($('#hdnSearchLength').val());
    }

    if ($('#hdnSearchText').val() == '-') {
        document.getElementById("hdnSearchText").value = "";
    }

    if ($('#hdnSearchText').val() != '' && $('#hdnSearchText').val() != undefined) {
        selfSearchLabManager.SearchText($('#hdnSearchText').val().toUpperCase());
    }

    $(".search-overlay").click(function (event) {
        selfSearchLabManager.LabTestsLoaded(false);
        selfSearchLabManager.FilteredLabTests([]);
        $(".search-overlay").fadeOut(100);
        $('#divMainContent').show();
    });

    $(window).resize(function () {
        CalcSearchDropdownHeight();
    });
});

var selfSearchLabManager;
function SearchLabManagerModel() {
    selfSearchLabManager = this;
    selfSearchLabManager.SearchText = ko.observable('');
    selfSearchLabManager.FilteredLabTests = ko.observableArray([]);
    selfSearchLabManager.LabTestsLoaded = ko.observable(false);
    selfSearchLabManager.DefaultSearchLength = ko.observable(15);
    selfSearchLabManager.DelayTimerUpdateSearch = null;
    selfSearchLabManager.DelayTimerUpdateLoc = null;

    selfSearchLabManager.SearchText.subscribe(function () {
        clearTimeout(selfSearchLabManager.DelayTimerUpdateSearch);
        clearTimeout(selfSearchLabManager.DelayTimerUpdateLoc);
        selfSearchLabManager.LabTestsLoaded(false);
        if (selfSearchLabManager.SearchText() != null && selfSearchLabManager.SearchText().length >= 1) {
            selfSearchLabManager.DelayTimerUpdateSearch = window.setTimeout(function () {
                selfSearchLabManager.LoadLabTests();
            }, 500);
            CalcSearchDropdownHeight();
        }
        else {
            selfSearchLabManager.FilteredLabTests([]);
            $('#divMainContent').show();
        }
    });

    selfSearchLabManager.LabTestsLoaded.subscribe(function () {
        if (selfSearchLabManager.LabTestsLoaded() == false)
            return;

        selfSearchLabManager.DelayTimerUpdateLoc = window.setTimeout(selfSearchLabManager.UploadAddress, 3000);
        $("#tblSearch").delegate('tbody tr', 'click', function (e) {
            var labTestLink = $(this).attr('data-href');
            e.preventDefault();
            window.location.href = labTestLink;
        });
    });

    selfSearchLabManager.UploadAddress = function () {
        if (selfSearchLabManager.SearchText() != undefined && selfSearchLabManager.SearchText().length > 0) {
            var loc = (updateQueryStringParameter("", 'q', selfSearchLabManager.SearchText()));
            loc = "/labs/" + loc;
            window.history.pushState(null, null, loc);
            ga('send', 'pageview', loc);
        }
    }

    selfSearchLabManager.LoadLabTests = function () {
        var url = "/api/lab/SearchLabTest";
        $("#imgLoadingSearch").show();
        $.ajax({
            url: url,
            method: 'GET',
            data: { searchText: selfSearchLabManager.SearchText(), searchLength: selfSearchLabManager.DefaultSearchLength() },
            success: function (data) {
                selfSearchLabManager.FilteredLabTests([]);
                if (data != null && data.length != 0) {

                    $.each(data, function (index, item) {
                        var labTestItem = new LabTestItemModel();
                        labTestItem.LabTestCode(item.LabTestCode);
                        labTestItem.LabTestNameEncoded(item.LabTestNameEncoded);
                        labTestItem.LabTestName(item.LabTestName);
                        labTestItem.SalePrice(item.LowestOfferCalc);
                        labTestItem.ExtraInfo(item.ExtraInfo);
                        labTestItem.SpecialInstructions(item.SpecialInstructions);
                        selfSearchLabManager.FilteredLabTests.push(labTestItem);
                    });
                }
            },
            complete: function () {
                $("#imgLoadingSearch").hide();
                selfSearchLabManager.LabTestsLoaded(true);
            }
        });
    }
}


function LabTestItemModel() {
    var self = this;
    self.LabTestCode = ko.observable(0);
    self.LabTestName = ko.observable('');
    self.LabTestNameEncoded = ko.observable('');
    self.SalePrice = ko.observable(0);
    self.ExtraInfo = ko.observable('');
    self.SpecialInstructions = ko.observable('');
}



function CalcSearchDropdownHeight() {
    $('.navbar .divFilteredProductsTable').css('max-height', $(window).height() - $('.navbar').innerHeight());
}
;
/***************************************************************************************************
LoadingOverlay - A flexible loading overlay jQuery plugin
    Author          : Gaspare Sganga
    Version         : 2.1.7
    License         : MIT
    Documentation   : https://gasparesganga.com/labs/jquery-loading-overlay/
***************************************************************************************************/
!function (e) { "function" == typeof define && define.amd ? define(["jquery"], e) : "object" == typeof module && module.exports ? e(require("jquery")) : e(jQuery) }(function (g, a) { "use strict"; var t = { background: "rgba(255, 255, 255, 0.8)", backgroundClass: "", image: "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1000 1000'><circle r='80' cx='500' cy='90'/><circle r='80' cx='500' cy='910'/><circle r='80' cx='90' cy='500'/><circle r='80' cx='910' cy='500'/><circle r='80' cx='212' cy='212'/><circle r='80' cx='788' cy='212'/><circle r='80' cx='212' cy='788'/><circle r='80' cx='788' cy='788'/></svg>", imageAnimation: "2000ms rotate_right", imageAutoResize: !0, imageResizeFactor: 1, imageColor: "#202020", imageClass: "", imageOrder: 1, fontawesome: "", fontawesomeAnimation: "", fontawesomeAutoResize: !0, fontawesomeResizeFactor: 1, fontawesomeColor: "#202020", fontawesomeOrder: 2, custom: "", customAnimation: "", customAutoResize: !0, customResizeFactor: 1, customOrder: 3, text: "", textAnimation: "", textAutoResize: !0, textResizeFactor: .5, textColor: "#202020", textClass: "", textOrder: 4, progress: !1, progressAutoResize: !0, progressResizeFactor: .25, progressColor: "#a0a0a0", progressClass: "", progressOrder: 5, progressFixedPosition: "", progressSpeed: 200, progressMin: 0, progressMax: 100, size: 50, maxSize: 120, minSize: 20, direction: "column", fade: !0, resizeInterval: 50, zIndex: 2147483647 }, c = { overlay: { "box-sizing": "border-box", position: "relative", display: "flex", "flex-wrap": "nowrap", "align-items": "center", "justify-content": "space-around" }, element: { "box-sizing": "border-box", overflow: "visible", flex: "0 0 auto", display: "flex", "justify-content": "center", "align-items": "center" }, element_svg: { width: "100%", height: "100%" }, progress_fixed: { position: "absolute", left: "0", width: "100%" }, progress_wrapper: { position: "absolute", top: "0", left: "0", width: "100%", height: "100%" }, progress_bar: { position: "absolute", left: "0" } }, n = { count: 0, container: a, settings: a, wholePage: a, resizeIntervalId: a, text: a, progress: a }, s = { animations: ["rotate_right", "rotate_left", "fadein", "pulse"], progressPosition: ["top", "bottom"] }, d = { animations: { name: "rotate_right", time: "2000ms" }, fade: [400, 200] }; function o(e, s) { e = g(e), s.size = w(s.size), s.maxSize = parseInt(s.maxSize, 10) || 0, s.minSize = parseInt(s.minSize, 10) || 0, s.resizeInterval = parseInt(s.resizeInterval, 10) || 0; var t = p(e), a = u(e); if (!1 === a) { if ((a = g.extend({}, n)).container = e, a.wholePage = e.is("body"), t = g("<div>", { class: "loadingoverlay" }).css(c.overlay).css("flex-direction", "row" === s.direction.toLowerCase() ? "row" : "column"), s.backgroundClass ? t.addClass(s.backgroundClass) : t.css("background", s.background), a.wholePage && t.css({ position: "fixed", top: 0, left: 0, width: "100%", height: "100%" }), void 0 !== s.zIndex && t.css("z-index", s.zIndex), s.image) { g.isArray(s.imageColor) ? 0 === s.imageColor.length ? s.imageColor = !1 : 1 === s.imageColor.length ? s.imageColor = { fill: s.imageColor[0] } : s.imageColor = { fill: s.imageColor[0], stroke: s.imageColor[1] } : s.imageColor && (s.imageColor = { fill: s.imageColor }); var o = v(t, s.imageOrder, s.imageAutoResize, s.imageResizeFactor, s.imageAnimation); "<svg" === s.image.slice(0, 4).toLowerCase() && "</svg>" === s.image.slice(-6).toLowerCase() ? (o.append(s.image), o.children().css(c.element_svg), !s.imageClass && s.imageColor && o.find("*").css(s.imageColor)) : ".svg" === s.image.slice(-4).toLowerCase() || "data:image/svg" === s.image.slice(0, 14).toLowerCase() ? g.ajax({ url: s.image, type: "GET", dataType: "html", global: !1 }).done(function (e) { o.html(e), o.children().css(c.element_svg), !s.imageClass && s.imageColor && o.find("*").css(s.imageColor) }) : o.css({ "background-image": "url(/content/scripts/plugins/ + s.image +)", "background-position": "center", "background-repeat": "no-repeat", "background-size": "cover" }), s.imageClass && o.addClass(s.imageClass) } if (s.fontawesome) { o = v(t, s.fontawesomeOrder, s.fontawesomeAutoResize, s.fontawesomeResizeFactor, s.fontawesomeAnimation).addClass("loadingoverlay_fa"); g("<div>", { class: s.fontawesome }).appendTo(o), s.fontawesomeColor && o.css("color", s.fontawesomeColor) } if (s.custom) o = v(t, s.customOrder, s.customAutoResize, s.customResizeFactor, s.customAnimation).append(s.custom); if (s.text && (a.text = v(t, s.textOrder, s.textAutoResize, s.textResizeFactor, s.textAnimation).addClass("loadingoverlay_text").text(s.text), s.textClass ? a.text.addClass(s.textClass) : s.textColor && a.text.css("color", s.textColor)), s.progress) { o = v(t, s.progressOrder, s.progressAutoResize, s.progressResizeFactor, !1).addClass("loadingoverlay_progress"); var r = g("<div>").css(c.progress_wrapper).appendTo(o); a.progress = { bar: g("<div>").css(c.progress_bar).appendTo(r), fixed: !1, margin: 0, min: parseFloat(s.progressMin), max: parseFloat(s.progressMax), speed: parseInt(s.progressSpeed, 10) }; var i = (s.progressFixedPosition + "").replace(/\s\s+/g, " ").toLowerCase().split(" "); 2 === i.length && y(i[0]) ? (a.progress.fixed = i[0], a.progress.margin = w(i[1])) : 2 === i.length && y(i[1]) ? (a.progress.fixed = i[1], a.progress.margin = w(i[0])) : 1 === i.length && y(i[0]) && (a.progress.fixed = i[0], a.progress.margin = 0), "top" === a.progress.fixed ? o.css(c.progress_fixed).css("top", a.progress.margin ? a.progress.margin.value + (a.progress.margin.fixed ? a.progress.margin.units : "%") : 0) : "bottom" === a.progress.fixed && o.css(c.progress_fixed).css("top", "auto"), s.progressClass ? a.progress.bar.addClass(s.progressClass) : s.progressColor && a.progress.bar.css("background", s.progressColor) } s.fade ? !0 === s.fade ? s.fade = d.fade : "string" == typeof s.fade || "number" == typeof s.fade ? s.fade = [s.fade, s.fade] : g.isArray(s.fade) && s.fade.length < 2 && (s.fade = [s.fade[0], s.fade[0]]) : s.fade = [0, 0], s.fade = [parseInt(s.fade[0], 10), parseInt(s.fade[1], 10)], a.settings = s, t.data("loadingoverlay_data", a), e.data("loadingoverlay", t), t.fadeTo(0, .01).appendTo("body"), f(e, !0), 0 < s.resizeInterval && (a.resizeIntervalId = setInterval(function () { f(e, !1) }, s.resizeInterval)), t.fadeTo(s.fade[0], 1) } a.count++ } function r(e, s) { var t = p(e = g(e)), a = u(e); !1 !== a && (a.count--, (s || a.count <= 0) && t.animate({ opacity: 0 }, a.settings.fade[1], function () { a.resizeIntervalId && clearInterval(a.resizeIntervalId), g(this).remove(), e.removeData("loadingoverlay") })) } function i(e) { f(g(e), !0) } function l(e, s) { var t = u(e = g(e)); !1 !== t && t.text && (!1 === s ? t.text.hide() : t.text.show().text(s)) } function m(e, s) { var t = u(e = g(e)); if (!1 !== t && t.progress) if (!1 === s) t.progress.bar.hide(); else { var a = 100 * ((parseFloat(s) || 0) - t.progress.min) / (t.progress.max - t.progress.min); a < 0 && (a = 0), 100 < a && (a = 100), t.progress.bar.show().animate({ width: a + "%" }, t.progress.speed) } } function f(e, t) { var s = p(e), a = u(e); if (!1 !== a) { if (!a.wholePage) { var o = "fixed" === e.css("position"), r = o ? e[0].getBoundingClientRect() : e.offset(); s.css({ position: o ? "fixed" : "absolute", top: r.top + parseInt(e.css("border-top-width"), 10), left: r.left + parseInt(e.css("border-left-width"), 10), width: e.innerWidth(), height: e.innerHeight() }) } if (a.settings.size) { var i = a.wholePage ? g(window) : e, n = a.settings.size.value; a.settings.size.fixed || (n = Math.min(i.innerWidth(), i.innerHeight()) * n / 100, a.settings.maxSize && n > a.settings.maxSize && (n = a.settings.maxSize), a.settings.minSize && n < a.settings.minSize && (n = a.settings.minSize)), s.children(".loadingoverlay_element").each(function () { var e = g(this); if (t || e.data("loadingoverlay_autoresize")) { var s = e.data("loadingoverlay_resizefactor"); e.hasClass("loadingoverlay_fa") || e.hasClass("loadingoverlay_text") ? e.css("font-size", n * s + a.settings.size.units) : e.hasClass("loadingoverlay_progress") ? (a.progress.bar.css("height", n * s + a.settings.size.units), a.progress.fixed ? "bottom" === a.progress.fixed && e.css("bottom", a.progress.margin ? a.progress.margin.value + (a.progress.margin.fixed ? a.progress.margin.units : "%") : 0).css("bottom", "+=" + n * s + a.settings.size.units) : a.progress.bar.css("top", e.position().top).css("top", "-=" + n * s * .5 + a.settings.size.units)) : e.css({ width: n * s + a.settings.size.units, height: n * s + a.settings.size.units }) } }) } } } function p(e) { return e.data("loadingoverlay") } function u(e) { var s = p(e), t = void 0 === s ? a : s.data("loadingoverlay_data"); return void 0 === t ? (g(".loadingoverlay").each(function () { var e = g(this), s = e.data("loadingoverlay_data"); document.body.contains(s.container[0]) || (s.resizeIntervalId && clearInterval(s.resizeIntervalId), e.remove()) }), !1) : (s.toggle(e.is(":visible")), t) } function v(e, s, t, a, o) { var r = g("<div>", { class: "loadingoverlay_element", css: { order: s } }).css(c.element).data({ loadingoverlay_autoresize: t, loadingoverlay_resizefactor: a }).appendTo(e); if (!0 === o && (o = d.animations.time + " " + d.animations.name), "string" == typeof o) { var i, n, l = o.replace(/\s\s+/g, " ").toLowerCase().split(" "); 2 === l.length && x(l[0]) && h(l[1]) ? (i = l[1], n = l[0]) : 2 === l.length && x(l[1]) && h(l[0]) ? (i = l[0], n = l[1]) : 1 === l.length && x(l[0]) ? (i = d.animations.name, n = l[0]) : 1 === l.length && h(l[0]) && (i = l[0], n = d.animations.time), r.css({ "animation-name": "loadingoverlay_animation__" + i, "animation-duration": n, "animation-timing-function": "linear", "animation-iteration-count": "infinite" }) } return r } function x(e) { return !isNaN(parseFloat(e)) && ("s" === e.slice(-1) || "ms" === e.slice(-2)) } function h(e) { return -1 < s.animations.indexOf(e) } function y(e) { return -1 < s.progressPosition.indexOf(e) } function w(e) { return !(!e || e < 0) && ("string" == typeof e && -1 < ["vmin", "vmax"].indexOf(e.slice(-4)) ? { fixed: !0, units: e.slice(-4), value: e.slice(0, -4) } : "string" == typeof e && -1 < ["rem"].indexOf(e.slice(-3)) ? { fixed: !0, units: e.slice(-3), value: e.slice(0, -3) } : "string" == typeof e && -1 < ["px", "em", "cm", "mm", "in", "pt", "pc", "vh", "vw"].indexOf(e.slice(-2)) ? { fixed: !0, units: e.slice(-2), value: e.slice(0, -2) } : { fixed: !1, units: "px", value: parseFloat(e) }) } g.LoadingOverlaySetup = function (e) { g.extend(!0, t, e) }, g.LoadingOverlay = function (e, s) { switch (e.toLowerCase()) { case "show": o("body", g.extend(!0, {}, t, s)); break; case "hide": r("body", s); break; case "resize": i("body"); break; case "text": l("body", s); break; case "progress": m("body", s) } }, g.fn.LoadingOverlay = function (e, s) { switch (e.toLowerCase()) { case "show": return this.each(function () { o(this, g.extend(!0, {}, t, s)) }); case "hide": return this.each(function () { r(this, s) }); case "resize": return this.each(function () { i(this) }); case "text": return this.each(function () { l(this, s) }); case "progress": return this.each(function () { m(this, s) }) } }, g(function () { g("head").append(["<style>", "@-webkit-keyframes loadingoverlay_animation__rotate_right {", "to {", "-webkit-transform : rotate(360deg);", "transform : rotate(360deg);", "}", "}", "@keyframes loadingoverlay_animation__rotate_right {", "to {", "-webkit-transform : rotate(360deg);", "transform : rotate(360deg);", "}", "}", "@-webkit-keyframes loadingoverlay_animation__rotate_left {", "to {", "-webkit-transform : rotate(-360deg);", "transform : rotate(-360deg);", "}", "}", "@keyframes loadingoverlay_animation__rotate_left {", "to {", "-webkit-transform : rotate(-360deg);", "transform : rotate(-360deg);", "}", "}", "@-webkit-keyframes loadingoverlay_animation__fadein {", "0% {", "opacity   : 0;", "-webkit-transform : scale(0.1, 0.1);", "transform : scale(0.1, 0.1);", "}", "50% {", "opacity   : 1;", "}", "100% {", "opacity   : 0;", "-webkit-transform : scale(1, 1);", "transform : scale(1, 1);", "}", "}", "@keyframes loadingoverlay_animation__fadein {", "0% {", "opacity   : 0;", "-webkit-transform : scale(0.1, 0.1);", "transform : scale(0.1, 0.1);", "}", "50% {", "opacity   : 1;", "}", "100% {", "opacity   : 0;", "-webkit-transform : scale(1, 1);", "transform : scale(1, 1);", "}", "}", "@-webkit-keyframes loadingoverlay_animation__pulse {", "0% {", "-webkit-transform : scale(0, 0);", "transform : scale(0, 0);", "}", "50% {", "-webkit-transform : scale(1, 1);", "transform : scale(1, 1);", "}", "100% {", "-webkit-transform : scale(0, 0);", "transform : scale(0, 0);", "}", "}", "@keyframes loadingoverlay_animation__pulse {", "0% {", "-webkit-transform : scale(0, 0);", "transform : scale(0, 0);", "}", "50% {", "-webkit-transform : scale(1, 1);", "transform : scale(1, 1);", "}", "100% {", "-webkit-transform : scale(0, 0);", "transform : scale(0, 0);", "}", "}", "</style>"].join(" ")) }) });;
/*
 *  Bootstrap TouchSpin - v4.3.0
 *  A mobile and touch friendly input spinner component for Bootstrap 3 & 4.
 *  http://www.virtuosoft.eu/code/bootstrap-touchspin/
 *
 *  Made by Istvn Ujj-Mszros
 *  Under Apache License v2.0 License
 */

!function (o) { "function" == typeof define && define.amd ? define(["jquery"], o) : "object" == typeof module && module.exports ? module.exports = function (t, n) { return void 0 === n && (n = "undefined" != typeof window ? require("jquery") : require("jquery")(t)), o(n), n } : o(jQuery) }(function (D) { "use strict"; var N = 0; D.fn.TouchSpin = function (k) { var C = { min: 0, max: 100, initval: "", replacementval: "", firstclickvalueifempty: null, step: 1, decimals: 0, stepinterval: 100, forcestepdivisibility: "round", stepintervaldelay: 500, verticalbuttons: !1, verticalup: "+", verticaldown: "-", verticalupclass: "", verticaldownclass: "", prefix: "", postfix: "", prefix_extraclass: "", postfix_extraclass: "", booster: !0, boostat: 10, maxboostedstep: !1, mousewheel: !0, buttondown_class: "btn btn-primary", buttonup_class: "btn btn-primary", buttondown_txt: "-", buttonup_txt: "+", callback_before_calculation: function (t) { return t }, callback_after_calculation: function (t) { return t } }, j = { min: "min", max: "max", initval: "init-val", replacementval: "replacement-val", firstclickvalueifempty: "first-click-value-if-empty", step: "step", decimals: "decimals", stepinterval: "step-interval", verticalbuttons: "vertical-buttons", verticalupclass: "vertical-up-class", verticaldownclass: "vertical-down-class", forcestepdivisibility: "force-step-divisibility", stepintervaldelay: "step-interval-delay", prefix: "prefix", postfix: "postfix", prefix_extraclass: "prefix-extra-class", postfix_extraclass: "postfix-extra-class", booster: "booster", boostat: "boostat", maxboostedstep: "max-boosted-step", mousewheel: "mouse-wheel", buttondown_class: "button-down-class", buttonup_class: "button-up-class", buttondown_txt: "button-down-txt", buttonup_txt: "button-up-txt" }; return this.each(function () { var i, o, s, u, p, a, t, n, e, r, c = D(this), l = c.data(), d = 0, f = !1; function b() { "" === i.prefix && (o = p.prefix.detach()), "" === i.postfix && (s = p.postfix.detach()) } function h() { var t, n, o; "" !== (t = i.callback_before_calculation(c.val())) ? 0 < i.decimals && "." === t || (n = parseFloat(t), isNaN(n) && (n = "" !== i.replacementval ? i.replacementval : 0), (o = n).toString() !== t && (o = n), null !== i.min && n < i.min && (o = i.min), null !== i.max && n > i.max && (o = i.max), o = function (t) { switch (i.forcestepdivisibility) { case "round": return (Math.round(t / i.step) * i.step).toFixed(i.decimals); case "floor": return (Math.floor(t / i.step) * i.step).toFixed(i.decimals); case "ceil": return (Math.ceil(t / i.step) * i.step).toFixed(i.decimals); default: return t.toFixed(i.decimals) } }(o), Number(t).toString() !== o.toString() && (c.val(o), c.trigger("change"))) : "" !== i.replacementval && (c.val(i.replacementval), c.trigger("change")) } function v() { if (i.booster) { var t = Math.pow(2, Math.floor(d / i.boostat)) * i.step; return i.maxboostedstep && t > i.maxboostedstep && (t = i.maxboostedstep, a = Math.round(a / t) * t), Math.max(i.step, t) } return i.step } function x() { return "number" == typeof i.firstclickvalueifempty ? i.firstclickvalueifempty : (i.min + i.max) / 2 } function g() { h(); var t, n = a = parseFloat(i.callback_before_calculation(p.input.val())); isNaN(a) ? a = x() : (t = v(), a += t), null !== i.max && a > i.max && (a = i.max, c.trigger("touchspin.on.max"), y()), p.input.val(i.callback_after_calculation(Number(a).toFixed(i.decimals))), n !== a && c.trigger("change") } function m() { h(); var t, n = a = parseFloat(i.callback_before_calculation(p.input.val())); isNaN(a) ? a = x() : (t = v(), a -= t), null !== i.min && a < i.min && (a = i.min, c.trigger("touchspin.on.min"), y()), p.input.val(i.callback_after_calculation(Number(a).toFixed(i.decimals))), n !== a && c.trigger("change") } function w() { y(), d = 0, f = "down", c.trigger("touchspin.on.startspin"), c.trigger("touchspin.on.startdownspin"), e = setTimeout(function () { t = setInterval(function () { d++, m() }, i.stepinterval) }, i.stepintervaldelay) } function _() { y(), d = 0, f = "up", c.trigger("touchspin.on.startspin"), c.trigger("touchspin.on.startupspin"), r = setTimeout(function () { n = setInterval(function () { d++, g() }, i.stepinterval) }, i.stepintervaldelay) } function y() { switch (clearTimeout(e), clearTimeout(r), clearInterval(t), clearInterval(n), f) { case "up": c.trigger("touchspin.on.stopupspin"), c.trigger("touchspin.on.stopspin"); break; case "down": c.trigger("touchspin.on.stopdownspin"), c.trigger("touchspin.on.stopspin") }d = 0, f = !1 } !function () { if (c.data("alreadyinitialized")) return; if (c.data("alreadyinitialized", !0), N += 1, c.data("spinnerid", N), !c.is("input")) return console.log("Must be an input."); i = D.extend({}, C, l, function () { var s = {}; return D.each(j, function (t, n) { var o = "bts-" + n; c.is("[data-" + o + "]") && (s[t] = c.data(o)) }), s }(), k), "" !== i.initval && "" === c.val() && c.val(i.initval), h(), function () { var t = c.val(), n = c.parent(); "" !== t && (t = i.callback_after_calculation(Number(t).toFixed(i.decimals))); c.data("initvalue", t).val(t), c.addClass("form-control"), n.hasClass("input-group") ? function (t) { t.addClass("bootstrap-touchspin"); var n, o, s = c.prev(), p = c.next(), a = '<span class="input-group-addon input-group-prepend bootstrap-touchspin-prefix input-group-prepend bootstrap-touchspin-injected"><span class="input-group-text">' + i.prefix + "</span></span>", e = '<span class="input-group-addon input-group-append bootstrap-touchspin-postfix input-group-append bootstrap-touchspin-injected"><span class="input-group-text">' + i.postfix + "</span></span>"; s.hasClass("input-group-btn") || s.hasClass("input-group-prepend") ? (n = '<button class="' + i.buttondown_class + ' bootstrap-touchspin-down bootstrap-touchspin-injected" type="button">' + i.buttondown_txt + "</button>", s.append(n)) : (n = '<span class="input-group-btn input-group-prepend bootstrap-touchspin-injected"><button class="' + i.buttondown_class + ' bootstrap-touchspin-down" type="button">' + i.buttondown_txt + "</button></span>", D(n).insertBefore(c)); p.hasClass("input-group-btn") || p.hasClass("input-group-append") ? (o = '<button class="' + i.buttonup_class + ' bootstrap-touchspin-up bootstrap-touchspin-injected" type="button">' + i.buttonup_txt + "</button>", p.prepend(o)) : (o = '<span class="input-group-btn input-group-append bootstrap-touchspin-injected"><button class="' + i.buttonup_class + ' bootstrap-touchspin-up" type="button">' + i.buttonup_txt + "</button></span>", D(o).insertAfter(c)); D(a).insertBefore(c), D(e).insertAfter(c), u = t }(n) : function () { var t, n = ""; c.hasClass("input-sm") && (n = "input-group-sm"); c.hasClass("input-lg") && (n = "input-group-lg"); t = i.verticalbuttons ? '<div class="input-group ' + n + ' bootstrap-touchspin bootstrap-touchspin-injected"><span class="input-group-addon input-group-prepend bootstrap-touchspin-prefix"><span class="input-group-text">' + i.prefix + '</span></span><span class="input-group-addon bootstrap-touchspin-postfix input-group-append"><span class="input-group-text">' + i.postfix + '</span></span><span class="input-group-btn-vertical"><button class="' + i.buttondown_class + " bootstrap-touchspin-up " + i.verticalupclass + '" type="button">' + i.verticalup + '</button><button class="' + i.buttonup_class + " bootstrap-touchspin-down " + i.verticaldownclass + '" type="button">' + i.verticaldown + "</button></span></div>" : '<div class="input-group bootstrap-touchspin bootstrap-touchspin-injected"><span class="input-group-btn input-group-prepend"><button class="' + i.buttondown_class + ' bootstrap-touchspin-down" type="button">' + i.buttondown_txt + '</button></span><span class="input-group-addon bootstrap-touchspin-prefix input-group-prepend"><span class="input-group-text">' + i.prefix + '</span></span><span class="input-group-addon bootstrap-touchspin-postfix input-group-append"><span class="input-group-text">' + i.postfix + '</span></span><span class="input-group-btn input-group-append"><button class="' + i.buttonup_class + ' bootstrap-touchspin-up" type="button">' + i.buttonup_txt + "</button></span></div>"; u = D(t).insertBefore(c), D(".bootstrap-touchspin-prefix", u).after(c), c.hasClass("input-sm") ? u.addClass("input-group-sm") : c.hasClass("input-lg") && u.addClass("input-group-lg") }() }(), p = { down: D(".bootstrap-touchspin-down", u), up: D(".bootstrap-touchspin-up", u), input: D("input", u), prefix: D(".bootstrap-touchspin-prefix", u).addClass(i.prefix_extraclass), postfix: D(".bootstrap-touchspin-postfix", u).addClass(i.postfix_extraclass) }, b(), c.on("keydown.touchspin", function (t) { var n = t.keyCode || t.which; 38 === n ? ("up" !== f && (g(), _()), t.preventDefault()) : 40 === n && ("down" !== f && (m(), w()), t.preventDefault()) }), c.on("keyup.touchspin", function (t) { var n = t.keyCode || t.which; 38 !== n && 40 !== n || y() }), c.on("blur.touchspin", function () { h(), c.val(i.callback_after_calculation(c.val())) }), p.down.on("keydown", function (t) { var n = t.keyCode || t.which; 32 !== n && 13 !== n || ("down" !== f && (m(), w()), t.preventDefault()) }), p.down.on("keyup.touchspin", function (t) { var n = t.keyCode || t.which; 32 !== n && 13 !== n || y() }), p.up.on("keydown.touchspin", function (t) { var n = t.keyCode || t.which; 32 !== n && 13 !== n || ("up" !== f && (g(), _()), t.preventDefault()) }), p.up.on("keyup.touchspin", function (t) { var n = t.keyCode || t.which; 32 !== n && 13 !== n || y() }), p.down.on("mousedown.touchspin", function (t) { p.down.off("touchstart.touchspin"), c.is(":disabled") || (m(), w(), t.preventDefault(), t.stopPropagation()) }), p.down.on("touchstart.touchspin", function (t) { p.down.off("mousedown.touchspin"), c.is(":disabled") || (m(), w(), t.preventDefault(), t.stopPropagation()) }), p.up.on("mousedown.touchspin", function (t) { p.up.off("touchstart.touchspin"), c.is(":disabled") || (g(), _(), t.preventDefault(), t.stopPropagation()) }), p.up.on("touchstart.touchspin", function (t) { p.up.off("mousedown.touchspin"), c.is(":disabled") || (g(), _(), t.preventDefault(), t.stopPropagation()) }), p.up.on("mouseup.touchspin mouseout.touchspin touchleave.touchspin touchend.touchspin touchcancel.touchspin", function (t) { f && (t.stopPropagation(), y()) }), p.down.on("mouseup.touchspin mouseout.touchspin touchleave.touchspin touchend.touchspin touchcancel.touchspin", function (t) { f && (t.stopPropagation(), y()) }), p.down.on("mousemove.touchspin touchmove.touchspin", function (t) { f && (t.stopPropagation(), t.preventDefault()) }), p.up.on("mousemove.touchspin touchmove.touchspin", function (t) { f && (t.stopPropagation(), t.preventDefault()) }), c.on("mousewheel.touchspin DOMMouseScroll.touchspin", function (t) { if (i.mousewheel && c.is(":focus")) { var n = t.originalEvent.wheelDelta || -t.originalEvent.deltaY || -t.originalEvent.detail; t.stopPropagation(), t.preventDefault(), (n < 0 ? m : g)() } }), c.on("touchspin.destroy", function () { !function () { var t = c.parent(); y(), c.off(".touchspin"), t.hasClass("bootstrap-touchspin-injected") ? (c.siblings().remove(), c.unwrap()) : (D(".bootstrap-touchspin-injected", t).remove(), t.removeClass("bootstrap-touchspin")); c.data("alreadyinitialized", !1) }() }), c.on("touchspin.uponce", function () { y(), g() }), c.on("touchspin.downonce", function () { y(), m() }), c.on("touchspin.startupspin", function () { _() }), c.on("touchspin.startdownspin", function () { w() }), c.on("touchspin.stopspin", function () { y() }), c.on("touchspin.updatesettings", function (t, n) { !function (t) { (function (t) { if (i = D.extend({}, i, t), t.postfix) { 0 === c.parent().find(".bootstrap-touchspin-postfix").length && s.insertAfter(c), c.parent().find(".bootstrap-touchspin-postfix .input-group-text").text(t.postfix) } if (t.prefix) { 0 === c.parent().find(".bootstrap-touchspin-prefix").length && o.insertBefore(c), c.parent().find(".bootstrap-touchspin-prefix .input-group-text").text(t.prefix) } b() })(t), h(); var n = p.input.val(); "" !== n && (n = Number(i.callback_before_calculation(p.input.val())), p.input.val(i.callback_after_calculation(Number(n).toFixed(i.decimals)))) }(n) }) }() }) } });;
/*! jQuery & Zepto Lazy v1.7.9 - http://jquery.eisbehr.de/lazy - MIT&GPL-2.0 license - Copyright 2012-2018 Daniel 'Eisbehr' Kern */
!function (t, e) { "use strict"; function r(r, a, i, u, l) { function f() { L = t.devicePixelRatio > 1, i = c(i), a.delay >= 0 && setTimeout(function () { s(!0) }, a.delay), (a.delay < 0 || a.combined) && (u.e = v(a.throttle, function (t) { "resize" === t.type && (w = B = -1), s(t.all) }), u.a = function (t) { t = c(t), i.push.apply(i, t) }, u.g = function () { return i = n(i).filter(function () { return !n(this).data(a.loadedName) }) }, u.f = function (t) { for (var e = 0; e < t.length; e++) { var r = i.filter(function () { return this === t[e] }); r.length && s(!1, r) } }, s(), n(a.appendScroll).on("scroll." + l + " resize." + l, u.e)) } function c(t) { var i = a.defaultImage, o = a.placeholder, u = a.imageBase, l = a.srcsetAttribute, f = a.loaderAttribute, c = a._f || {}; t = n(t).filter(function () { var t = n(this), r = m(this); return !t.data(a.handledName) && (t.attr(a.attribute) || t.attr(l) || t.attr(f) || c[r] !== e) }).data("plugin_" + a.name, r); for (var s = 0, d = t.length; s < d; s++) { var A = n(t[s]), g = m(t[s]), h = A.attr(a.imageBaseAttribute) || u; g === N && h && A.attr(l) && A.attr(l, b(A.attr(l), h)), c[g] === e || A.attr(f) || A.attr(f, c[g]), g === N && i && !A.attr(E) ? A.attr(E, i) : g === N || !o || A.css(O) && "none" !== A.css(O) || A.css(O, "url(/content/scripts/plugins/" + o + ")") } return t } function s(t, e) { if (!i.length) return void (a.autoDestroy && r.destroy()); for (var o = e || i, u = !1, l = a.imageBase || "", f = a.srcsetAttribute, c = a.handledName, s = 0; s < o.length; s++)if (t || e || A(o[s])) { var g = n(o[s]), h = m(o[s]), b = g.attr(a.attribute), v = g.attr(a.imageBaseAttribute) || l, p = g.attr(a.loaderAttribute); g.data(c) || a.visibleOnly && !g.is(":visible") || !((b || g.attr(f)) && (h === N && (v + b !== g.attr(E) || g.attr(f) !== g.attr(F)) || h !== N && v + b !== g.css(O)) || p) || (u = !0, g.data(c, !0), d(g, h, v, p)) } u && (i = n(i).filter(function () { return !n(this).data(c) })) } function d(t, e, r, i) { ++z; var o = function () { y("onError", t), p(), o = n.noop }; y("beforeLoad", t); var u = a.attribute, l = a.srcsetAttribute, f = a.sizesAttribute, c = a.retinaAttribute, s = a.removeAttribute, d = a.loadedName, A = t.attr(c); if (i) { var g = function () { s && t.removeAttr(a.loaderAttribute), t.data(d, !0), y(T, t), setTimeout(p, 1), g = n.noop }; t.off(I).one(I, o).one(D, g), y(i, t, function (e) { e ? (t.off(D), g()) : (t.off(I), o()) }) || t.trigger(I) } else { var h = n(new Image); h.one(I, o).one(D, function () { t.hide(), e === N ? t.attr(C, h.attr(C)).attr(F, h.attr(F)).attr(E, h.attr(E)) : t.css(O, "url(/content/scripts/plugins/" + h.attr(E) + "')"), t[a.effect](a.effectTime), s && (t.removeAttr(u + " " + l + " " + c + " " + a.imageBaseAttribute), f !== C && t.removeAttr(f)), t.data(d, !0), y(T, t), h.remove(), p() }); var m = (L && A ? A : t.attr(u)) || ""; h.attr(C, t.attr(f)).attr(F, t.attr(l)).attr(E, m ? r + m : null), h.complete && h.trigger(D) } } function A(t) { var e = t.getBoundingClientRect(), r = a.scrollDirection, n = a.threshold, i = h() + n > e.top && -n < e.bottom, o = g() + n > e.left && -n < e.right; return "vertical" === r ? i : "horizontal" === r ? o : i && o } function g() { return w >= 0 ? w : w = n(t).width() } function h() { return B >= 0 ? B : B = n(t).height() } function m(t) { return t.tagName.toLowerCase() } function b(t, e) { if (e) { var r = t.split(","); t = ""; for (var a = 0, n = r.length; a < n; a++)t += e + r[a].trim() + (a !== n - 1 ? "," : "") } return t } function v(t, e) { var n, i = 0; return function (o, u) { function l() { i = +new Date, e.call(r, o) } var f = +new Date - i; n && clearTimeout(n), f > t || !a.enableThrottle || u ? l() : n = setTimeout(l, t - f) } } function p() { --z, i.length || z || y("onFinishedAll") } function y(t, e, n) { return !!(t = a[t]) && (t.apply(r, [].slice.call(arguments, 1)), !0) } var z = 0, w = -1, B = -1, L = !1, T = "afterLoad", D = "load", I = "error", N = "img", E = "src", F = "srcset", C = "sizes", O = "background-image"; "event" === a.bind || o ? f() : n(t).on(D + "." + l, f) } function a(a, o) { var u = this, l = n.extend({}, u.config, o), f = {}, c = l.name + "-" + ++i; return u.config = function (t, r) { return r === e ? l[t] : (l[t] = r, u) }, u.addItems = function (t) { return f.a && f.a("string" === n.type(t) ? n(t) : t), u }, u.getItems = function () { return f.g ? f.g() : {} }, u.update = function (t) { return f.e && f.e({}, !t), u }, u.force = function (t) { return f.f && f.f("string" === n.type(t) ? n(t) : t), u }, u.loadAll = function () { return f.e && f.e({ all: !0 }, !0), u }, u.destroy = function () { return n(l.appendScroll).off("." + c, f.e), n(t).off("." + c), f = {}, e }, r(u, l, a, f, c), l.chainable ? a : u } var n = t.jQuery || t.Zepto, i = 0, o = !1; n.fn.Lazy = n.fn.lazy = function (t) { return new a(this, t) }, n.Lazy = n.lazy = function (t, r, i) { if (n.isFunction(r) && (i = r, r = []), n.isFunction(i)) { t = n.isArray(t) ? t : [t], r = n.isArray(r) ? r : [r]; for (var o = a.prototype.config, u = o._f || (o._f = {}), l = 0, f = t.length; l < f; l++)(o[t[l]] === e || n.isFunction(o[t[l]])) && (o[t[l]] = i); for (var c = 0, s = r.length; c < s; c++)u[r[c]] = t[0] } }, a.prototype.config = { name: "lazy", chainable: !0, autoDestroy: !0, bind: "load", threshold: 500, visibleOnly: !1, appendScroll: t, scrollDirection: "both", imageBase: null, defaultImage: "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==", placeholder: null, delay: -1, combined: !1, attribute: "data-src", srcsetAttribute: "data-srcset", sizesAttribute: "data-sizes", retinaAttribute: "data-retina", loaderAttribute: "data-loader", imageBaseAttribute: "data-imagebase", removeAttribute: !0, handledName: "handled", loadedName: "loaded", effect: "show", effectTime: 0, enableThrottle: !0, throttle: 250, beforeLoad: e, afterLoad: e, onError: e, onFinishedAll: e }, n(t).on("load", function () { o = !0 }) }(window);;
/**
 * Owl Carousel v2.3.4
 * Copyright 2013-2018 David Deutsch
 * Licensed under: SEE LICENSE IN https://github.com/OwlCarousel2/OwlCarousel2/blob/master/LICENSE
 */
!function(a,b,c,d){function e(b,c){this.settings=null,this.options=a.extend({},e.Defaults,c),this.$element=a(b),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},a.each(["onResize","onThrottledResize"],a.proxy(function(b,c){this._handlers[c]=a.proxy(this[c],this)},this)),a.each(e.Plugins,a.proxy(function(a,b){this._plugins[a.charAt(0).toLowerCase()+a.slice(1)]=new b(this)},this)),a.each(e.Workers,a.proxy(function(b,c){this._pipe.push({filter:c.filter,run:a.proxy(c.run,this)})},this)),this.setup(),this.initialize()}e.Defaults={items:3,loop:!1,center:!1,rewind:!1,checkVisibility:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:b,fallbackEasing:"swing",slideTransition:"",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},e.Width={Default:"default",Inner:"inner",Outer:"outer"},e.Type={Event:"event",State:"state"},e.Plugins={},e.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(a){a.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(a){var b=this.settings.margin||"",c=!this.settings.autoWidth,d=this.settings.rtl,e={width:"auto","margin-left":d?b:"","margin-right":d?"":b};!c&&this.$stage.children().css(e),a.css=e}},{filter:["width","items","settings"],run:function(a){var b=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,c=null,d=this._items.length,e=!this.settings.autoWidth,f=[];for(a.items={merge:!1,width:b};d--;)c=this._mergers[d],c=this.settings.mergeFit&&Math.min(c,this.settings.items)||c,a.items.merge=c>1||a.items.merge,f[d]=e?b*c:this._items[d].width();this._widths=f}},{filter:["items","settings"],run:function(){var b=[],c=this._items,d=this.settings,e=Math.max(2*d.items,4),f=2*Math.ceil(c.length/2),g=d.loop&&c.length?d.rewind?e:Math.max(e,f):0,h="",i="";for(g/=2;g>0;)b.push(this.normalize(b.length/2,!0)),h+=c[b[b.length-1]][0].outerHTML,b.push(this.normalize(c.length-1-(b.length-1)/2,!0)),i=c[b[b.length-1]][0].outerHTML+i,g-=1;this._clones=b,a(h).addClass("cloned").appendTo(this.$stage),a(i).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var a=this.settings.rtl?1:-1,b=this._clones.length+this._items.length,c=-1,d=0,e=0,f=[];++c<b;)d=f[c-1]||0,e=this._widths[this.relative(c)]+this.settings.margin,f.push(d+e*a);this._coordinates=f}},{filter:["width","items","settings"],run:function(){var a=this.settings.stagePadding,b=this._coordinates,c={width:Math.ceil(Math.abs(b[b.length-1]))+2*a,"padding-left":a||"","padding-right":a||""};this.$stage.css(c)}},{filter:["width","items","settings"],run:function(a){var b=this._coordinates.length,c=!this.settings.autoWidth,d=this.$stage.children();if(c&&a.items.merge)for(;b--;)a.css.width=this._widths[this.relative(b)],d.eq(b).css(a.css);else c&&(a.css.width=a.items.width,d.css(a.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(a){a.current=a.current?this.$stage.children().index(a.current):0,a.current=Math.max(this.minimum(),Math.min(this.maximum(),a.current)),this.reset(a.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var a,b,c,d,e=this.settings.rtl?1:-1,f=2*this.settings.stagePadding,g=this.coordinates(this.current())+f,h=g+this.width()*e,i=[];for(c=0,d=this._coordinates.length;c<d;c++)a=this._coordinates[c-1]||0,b=Math.abs(this._coordinates[c])+f*e,(this.op(a,"<=",g)&&this.op(a,">",h)||this.op(b,"<",g)&&this.op(b,">",h))&&i.push(c);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+i.join("), :eq(")+")").addClass("active"),this.$stage.children(".center").removeClass("center"),this.settings.center&&this.$stage.children().eq(this.current()).addClass("center")}}],e.prototype.initializeStage=function(){this.$stage=this.$element.find("."+this.settings.stageClass),this.$stage.length||(this.$element.addClass(this.options.loadingClass),this.$stage=a("<"+this.settings.stageElement+">",{class:this.settings.stageClass}).wrap(a("<div/>",{class:this.settings.stageOuterClass})),this.$element.append(this.$stage.parent()))},e.prototype.initializeItems=function(){var b=this.$element.find(".owl-item");if(b.length)return this._items=b.get().map(function(b){return a(b)}),this._mergers=this._items.map(function(){return 1}),void this.refresh();this.replace(this.$element.children().not(this.$stage.parent())),this.isVisible()?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass)},e.prototype.initialize=function(){if(this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading")){var a,b,c;a=this.$element.find("img"),b=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:d,c=this.$element.children(b).width(),a.length&&c<=0&&this.preloadAutoWidthImages(a)}this.initializeStage(),this.initializeItems(),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},e.prototype.isVisible=function(){return!this.settings.checkVisibility||this.$element.is(":visible")},e.prototype.setup=function(){var b=this.viewport(),c=this.options.responsive,d=-1,e=null;c?(a.each(c,function(a){a<=b&&a>d&&(d=Number(a))}),e=a.extend({},this.options,c[d]),"function"==typeof e.stagePadding&&(e.stagePadding=e.stagePadding()),delete e.responsive,e.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+d))):e=a.extend({},this.options),this.trigger("change",{property:{name:"settings",value:e}}),this._breakpoint=d,this.settings=e,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},e.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},e.prototype.prepare=function(b){var c=this.trigger("prepare",{content:b});return c.data||(c.data=a("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(b)),this.trigger("prepared",{content:c.data}),c.data},e.prototype.update=function(){for(var b=0,c=this._pipe.length,d=a.proxy(function(a){return this[a]},this._invalidated),e={};b<c;)(this._invalidated.all||a.grep(this._pipe[b].filter,d).length>0)&&this._pipe[b].run(e),b++;this._invalidated={},!this.is("valid")&&this.enter("valid")},e.prototype.width=function(a){switch(a=a||e.Width.Default){case e.Width.Inner:case e.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},e.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},e.prototype.onThrottledResize=function(){b.clearTimeout(this.resizeTimer),this.resizeTimer=b.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},e.prototype.onResize=function(){return!!this._items.length&&(this._width!==this.$element.width()&&(!!this.isVisible()&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))))},e.prototype.registerEventHandlers=function(){a.support.transition&&this.$stage.on(a.support.transition.end+".owl.core",a.proxy(this.onTransitionEnd,this)),!1!==this.settings.responsive&&this.on(b,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",a.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",function(){return!1})),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",a.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",a.proxy(this.onDragEnd,this)))},e.prototype.onDragStart=function(b){var d=null;3!==b.which&&(a.support.transform?(d=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","),d={x:d[16===d.length?12:4],y:d[16===d.length?13:5]}):(d=this.$stage.position(),d={x:this.settings.rtl?d.left+this.$stage.width()-this.width()+this.settings.margin:d.left,y:d.top}),this.is("animating")&&(a.support.transform?this.animate(d.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===b.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=a(b.target),this._drag.stage.start=d,this._drag.stage.current=d,this._drag.pointer=this.pointer(b),a(c).on("mouseup.owl.core touchend.owl.core",a.proxy(this.onDragEnd,this)),a(c).one("mousemove.owl.core touchmove.owl.core",a.proxy(function(b){var d=this.difference(this._drag.pointer,this.pointer(b));a(c).on("mousemove.owl.core touchmove.owl.core",a.proxy(this.onDragMove,this)),Math.abs(d.x)<Math.abs(d.y)&&this.is("valid")||(b.preventDefault(),this.enter("dragging"),this.trigger("drag"))},this)))},e.prototype.onDragMove=function(a){var b=null,c=null,d=null,e=this.difference(this._drag.pointer,this.pointer(a)),f=this.difference(this._drag.stage.start,e);this.is("dragging")&&(a.preventDefault(),this.settings.loop?(b=this.coordinates(this.minimum()),c=this.coordinates(this.maximum()+1)-b,f.x=((f.x-b)%c+c)%c+b):(b=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),c=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),d=this.settings.pullDrag?-1*e.x/5:0,f.x=Math.max(Math.min(f.x,b+d),c+d)),this._drag.stage.current=f,this.animate(f.x))},e.prototype.onDragEnd=function(b){var d=this.difference(this._drag.pointer,this.pointer(b)),e=this._drag.stage.current,f=d.x>0^this.settings.rtl?"left":"right";a(c).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==d.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(e.x,0!==d.x?f:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=f,(Math.abs(d.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",function(){return!1})),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},e.prototype.closest=function(b,c){var e=-1,f=30,g=this.width(),h=this.coordinates();return this.settings.freeDrag||a.each(h,a.proxy(function(a,i){return"left"===c&&b>i-f&&b<i+f?e=a:"right"===c&&b>i-g-f&&b<i-g+f?e=a+1:this.op(b,"<",i)&&this.op(b,">",h[a+1]!==d?h[a+1]:i-g)&&(e="left"===c?a+1:a),-1===e},this)),this.settings.loop||(this.op(b,">",h[this.minimum()])?e=b=this.minimum():this.op(b,"<",h[this.maximum()])&&(e=b=this.maximum())),e},e.prototype.animate=function(b){var c=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),c&&(this.enter("animating"),this.trigger("translate")),a.support.transform3d&&a.support.transition?this.$stage.css({transform:"translate3d("+b+"px,0px,0px)",transition:this.speed()/1e3+"s"+(this.settings.slideTransition?" "+this.settings.slideTransition:"")}):c?this.$stage.animate({left:b+"px"},this.speed(),this.settings.fallbackEasing,a.proxy(this.onTransitionEnd,this)):this.$stage.css({left:b+"px"})},e.prototype.is=function(a){return this._states.current[a]&&this._states.current[a]>0},e.prototype.current=function(a){if(a===d)return this._current;if(0===this._items.length)return d;if(a=this.normalize(a),this._current!==a){var b=this.trigger("change",{property:{name:"position",value:a}});b.data!==d&&(a=this.normalize(b.data)),this._current=a,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},e.prototype.invalidate=function(b){return"string"===a.type(b)&&(this._invalidated[b]=!0,this.is("valid")&&this.leave("valid")),a.map(this._invalidated,function(a,b){return b})},e.prototype.reset=function(a){(a=this.normalize(a))!==d&&(this._speed=0,this._current=a,this.suppress(["translate","translated"]),this.animate(this.coordinates(a)),this.release(["translate","translated"]))},e.prototype.normalize=function(a,b){var c=this._items.length,e=b?0:this._clones.length;return!this.isNumeric(a)||c<1?a=d:(a<0||a>=c+e)&&(a=((a-e/2)%c+c)%c+e/2),a},e.prototype.relative=function(a){return a-=this._clones.length/2,this.normalize(a,!0)},e.prototype.maximum=function(a){var b,c,d,e=this.settings,f=this._coordinates.length;if(e.loop)f=this._clones.length/2+this._items.length-1;else if(e.autoWidth||e.merge){if(b=this._items.length)for(c=this._items[--b].width(),d=this.$element.width();b--&&!((c+=this._items[b].width()+this.settings.margin)>d););f=b+1}else f=e.center?this._items.length-1:this._items.length-e.items;return a&&(f-=this._clones.length/2),Math.max(f,0)},e.prototype.minimum=function(a){return a?0:this._clones.length/2},e.prototype.items=function(a){return a===d?this._items.slice():(a=this.normalize(a,!0),this._items[a])},e.prototype.mergers=function(a){return a===d?this._mergers.slice():(a=this.normalize(a,!0),this._mergers[a])},e.prototype.clones=function(b){var c=this._clones.length/2,e=c+this._items.length,f=function(a){return a%2==0?e+a/2:c-(a+1)/2};return b===d?a.map(this._clones,function(a,b){return f(b)}):a.map(this._clones,function(a,c){return a===b?f(c):null})},e.prototype.speed=function(a){return a!==d&&(this._speed=a),this._speed},e.prototype.coordinates=function(b){var c,e=1,f=b-1;return b===d?a.map(this._coordinates,a.proxy(function(a,b){return this.coordinates(b)},this)):(this.settings.center?(this.settings.rtl&&(e=-1,f=b+1),c=this._coordinates[b],c+=(this.width()-c+(this._coordinates[f]||0))/2*e):c=this._coordinates[f]||0,c=Math.ceil(c))},e.prototype.duration=function(a,b,c){return 0===c?0:Math.min(Math.max(Math.abs(b-a),1),6)*Math.abs(c||this.settings.smartSpeed)},e.prototype.to=function(a,b){var c=this.current(),d=null,e=a-this.relative(c),f=(e>0)-(e<0),g=this._items.length,h=this.minimum(),i=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(e)>g/2&&(e+=-1*f*g),a=c+e,(d=((a-h)%g+g)%g+h)!==a&&d-e<=i&&d-e>0&&(c=d-e,a=d,this.reset(c))):this.settings.rewind?(i+=1,a=(a%i+i)%i):a=Math.max(h,Math.min(i,a)),this.speed(this.duration(c,a,b)),this.current(a),this.isVisible()&&this.update()},e.prototype.next=function(a){a=a||!1,this.to(this.relative(this.current())+1,a)},e.prototype.prev=function(a){a=a||!1,this.to(this.relative(this.current())-1,a)},e.prototype.onTransitionEnd=function(a){if(a!==d&&(a.stopPropagation(),(a.target||a.srcElement||a.originalTarget)!==this.$stage.get(0)))return!1;this.leave("animating"),this.trigger("translated")},e.prototype.viewport=function(){var d;return this.options.responsiveBaseElement!==b?d=a(this.options.responsiveBaseElement).width():b.innerWidth?d=b.innerWidth:c.documentElement&&c.documentElement.clientWidth?d=c.documentElement.clientWidth:console.warn("Can not detect viewport width."),d},e.prototype.replace=function(b){this.$stage.empty(),this._items=[],b&&(b=b instanceof jQuery?b:a(b)),this.settings.nestedItemSelector&&(b=b.find("."+this.settings.nestedItemSelector)),b.filter(function(){return 1===this.nodeType}).each(a.proxy(function(a,b){b=this.prepare(b),this.$stage.append(b),this._items.push(b),this._mergers.push(1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)},this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},e.prototype.add=function(b,c){var e=this.relative(this._current);c=c===d?this._items.length:this.normalize(c,!0),b=b instanceof jQuery?b:a(b),this.trigger("add",{content:b,position:c}),b=this.prepare(b),0===this._items.length||c===this._items.length?(0===this._items.length&&this.$stage.append(b),0!==this._items.length&&this._items[c-1].after(b),this._items.push(b),this._mergers.push(1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[c].before(b),this._items.splice(c,0,b),this._mergers.splice(c,0,1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[e]&&this.reset(this._items[e].index()),this.invalidate("items"),this.trigger("added",{content:b,position:c})},e.prototype.remove=function(a){(a=this.normalize(a,!0))!==d&&(this.trigger("remove",{content:this._items[a],position:a}),this._items[a].remove(),this._items.splice(a,1),this._mergers.splice(a,1),this.invalidate("items"),this.trigger("removed",{content:null,position:a}))},e.prototype.preloadAutoWidthImages=function(b){b.each(a.proxy(function(b,c){this.enter("pre-loading"),c=a(c),a(new Image).one("load",a.proxy(function(a){c.attr("src",a.target.src),c.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()},this)).attr("src",c.attr("src")||c.attr("data-src")||c.attr("data-src-retina"))},this))},e.prototype.destroy=function(){this.$element.off(".owl.core"),this.$stage.off(".owl.core"),a(c).off(".owl.core"),!1!==this.settings.responsive&&(b.clearTimeout(this.resizeTimer),this.off(b,"resize",this._handlers.onThrottledResize));for(var d in this._plugins)this._plugins[d].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.remove(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},e.prototype.op=function(a,b,c){var d=this.settings.rtl;switch(b){case"<":return d?a>c:a<c;case">":return d?a<c:a>c;case">=":return d?a<=c:a>=c;case"<=":return d?a>=c:a<=c}},e.prototype.on=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)},e.prototype.off=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent("on"+b,c)},e.prototype.trigger=function(b,c,d,f,g){var h={item:{count:this._items.length,index:this.current()}},i=a.camelCase(a.grep(["on",b,d],function(a){return a}).join("-").toLowerCase()),j=a.Event([b,"owl",d||"carousel"].join(".").toLowerCase(),a.extend({relatedTarget:this},h,c));return this._supress[b]||(a.each(this._plugins,function(a,b){b.onTrigger&&b.onTrigger(j)}),this.register({type:e.Type.Event,name:b}),this.$element.trigger(j),this.settings&&"function"==typeof this.settings[i]&&this.settings[i].call(this,j)),j},e.prototype.enter=function(b){a.each([b].concat(this._states.tags[b]||[]),a.proxy(function(a,b){this._states.current[b]===d&&(this._states.current[b]=0),this._states.current[b]++},this))},e.prototype.leave=function(b){a.each([b].concat(this._states.tags[b]||[]),a.proxy(function(a,b){this._states.current[b]--},this))},e.prototype.register=function(b){if(b.type===e.Type.Event){if(a.event.special[b.name]||(a.event.special[b.name]={}),!a.event.special[b.name].owl){var c=a.event.special[b.name]._default;a.event.special[b.name]._default=function(a){return!c||!c.apply||a.namespace&&-1!==a.namespace.indexOf("owl")?a.namespace&&a.namespace.indexOf("owl")>-1:c.apply(this,arguments)},a.event.special[b.name].owl=!0}}else b.type===e.Type.State&&(this._states.tags[b.name]?this._states.tags[b.name]=this._states.tags[b.name].concat(b.tags):this._states.tags[b.name]=b.tags,this._states.tags[b.name]=a.grep(this._states.tags[b.name],a.proxy(function(c,d){return a.inArray(c,this._states.tags[b.name])===d},this)))},e.prototype.suppress=function(b){a.each(b,a.proxy(function(a,b){this._supress[b]=!0},this))},e.prototype.release=function(b){a.each(b,a.proxy(function(a,b){delete this._supress[b]},this))},e.prototype.pointer=function(a){var c={x:null,y:null};return a=a.originalEvent||a||b.event,a=a.touches&&a.touches.length?a.touches[0]:a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:a,a.pageX?(c.x=a.pageX,c.y=a.pageY):(c.x=a.clientX,c.y=a.clientY),c},e.prototype.isNumeric=function(a){return!isNaN(parseFloat(a))},e.prototype.difference=function(a,b){return{x:a.x-b.x,y:a.y-b.y}},a.fn.owlCarousel=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a(this),f=d.data("owl.carousel");f||(f=new e(this,"object"==typeof b&&b),d.data("owl.carousel",f),a.each(["next","prev","to","destroy","refresh","replace","add","remove"],function(b,c){f.register({type:e.Type.Event,name:c}),f.$element.on(c+".owl.carousel.core",a.proxy(function(a){a.namespace&&a.relatedTarget!==this&&(this.suppress([c]),f[c].apply(this,[].slice.call(arguments,1)),this.release([c]))},f))})),"string"==typeof b&&"_"!==b.charAt(0)&&f[b].apply(f,c)})},a.fn.owlCarousel.Constructor=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoRefresh&&this.watch()},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={autoRefresh:!0,autoRefreshInterval:500},e.prototype.watch=function(){this._interval||(this._visible=this._core.isVisible(),this._interval=b.setInterval(a.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},e.prototype.refresh=function(){this._core.isVisible()!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},e.prototype.destroy=function(){var a,c;b.clearInterval(this._interval);for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoRefresh=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":a.proxy(function(b){if(b.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(b.property&&"position"==b.property.name||"initialized"==b.type)){var c=this._core.settings,e=c.center&&Math.ceil(c.items/2)||c.items,f=c.center&&-1*e||0,g=(b.property&&b.property.value!==d?b.property.value:this._core.current())+f,h=this._core.clones().length,i=a.proxy(function(a,b){this.load(b)},this);for(c.lazyLoadEager>0&&(e+=c.lazyLoadEager,c.loop&&(g-=c.lazyLoadEager,e++));f++<e;)this.load(h/2+this._core.relative(g)),h&&a.each(this._core.clones(this._core.relative(g)),i),g++}},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={lazyLoad:!1,lazyLoadEager:0},e.prototype.load=function(c){var d=this._core.$stage.children().eq(c),e=d&&d.find(".owl-lazy");!e||a.inArray(d.get(0),this._loaded)>-1||(e.each(a.proxy(function(c,d){var e,f=a(d),g=b.devicePixelRatio>1&&f.attr("data-src-retina")||f.attr("data-src")||f.attr("data-srcset");this._core.trigger("load",{element:f,url:g},"lazy"),f.is("img")?f.one("load.owl.lazy",a.proxy(function(){f.css("opacity",1),this._core.trigger("loaded",{element:f,url:g},"lazy")},this)).attr("src",g):f.is("source")?f.one("load.owl.lazy",a.proxy(function(){this._core.trigger("loaded",{element:f,url:g},"lazy")},this)).attr("srcset",g):(e=new Image,e.onload=a.proxy(function(){f.css({"background-image":'url(/content/scripts/plugins/'+g+')',opacity:"1"}),this._core.trigger("loaded",{element:f,url:g},"lazy")},this),e.src=g)},this)),this._loaded.push(d.get(0)))},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this._core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Lazy=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(c){this._core=c,this._previousHeight=null,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&"position"===a.property.name&&this.update()},this),"loaded.owl.lazy":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&a.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers),this._intervalId=null;var d=this;a(b).on("load",function(){d._core.settings.autoHeight&&d.update()}),a(b).resize(function(){d._core.settings.autoHeight&&(null!=d._intervalId&&clearTimeout(d._intervalId),d._intervalId=setTimeout(function(){d.update()},250))})};e.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},e.prototype.update=function(){var b=this._core._current,c=b+this._core.settings.items,d=this._core.settings.lazyLoad,e=this._core.$stage.children().toArray().slice(b,c),f=[],g=0;a.each(e,function(b,c){f.push(a(c).height())}),g=Math.max.apply(null,f),g<=1&&d&&this._previousHeight&&(g=this._previousHeight),this._previousHeight=g,this._core.$stage.parent().height(g).addClass(this._core.settings.autoHeightClass)},e.prototype.destroy=function(){var a,b;for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoHeight=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.video&&this.isInFullScreen()&&a.preventDefault()},this),"refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&"position"===a.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":a.proxy(function(b){if(b.namespace){var c=a(b.content).find(".owl-video");c.length&&(c.css("display","none"),this.fetch(c,a(b.content)))}},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",a.proxy(function(a){this.play(a)},this))};e.Defaults={video:!1,videoHeight:!1,videoWidth:!1},e.prototype.fetch=function(a,b){var c=function(){return a.attr("data-vimeo-id")?"vimeo":a.attr("data-vzaar-id")?"vzaar":"youtube"}(),d=a.attr("data-vimeo-id")||a.attr("data-youtube-id")||a.attr("data-vzaar-id"),e=a.attr("data-width")||this._core.settings.videoWidth,f=a.attr("data-height")||this._core.settings.videoHeight,g=a.attr("href");if(!g)throw new Error("Missing video URL.");if(d=g.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com|be\-nocookie\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),d[3].indexOf("youtu")>-1)c="youtube";else if(d[3].indexOf("vimeo")>-1)c="vimeo";else{if(!(d[3].indexOf("vzaar")>-1))throw new Error("Video URL not supported.");c="vzaar"}d=d[6],this._videos[g]={type:c,id:d,width:e,height:f},b.attr("data-video",g),this.thumbnail(a,this._videos[g])},e.prototype.thumbnail=function(b,c){var d,e,f,g=c.width&&c.height?"width:"+c.width+"px;height:"+c.height+"px;":"",h=b.find("img"),i="src",j="",k=this._core.settings,l=function(c){e='<div class="owl-video-play-icon"></div>',d=k.lazyLoad?a("<div/>",{class:"owl-video-tn "+j,srcType:c}):a("<div/>",{class:"owl-video-tn",style:"opacity:1;background-image:url(/content/scripts/plugins/+c+)"}),b.after(d),b.after(e)};if(b.wrap(a("<div/>",{class:"owl-video-wrapper",style:g})),this._core.settings.lazyLoad&&(i="data-src",j="owl-lazy"),h.length)return l(h.attr(i)),h.remove(),!1;"youtube"===c.type?(f="//img.youtube.com/vi/"+c.id+"/hqdefault.jpg",l(f)):"vimeo"===c.type?a.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){f=a[0].thumbnail_large,l(f)}}):"vzaar"===c.type&&a.ajax({type:"GET",url:"//vzaar.com/api/videos/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){f=a.framegrab_url,l(f)}})},e.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},e.prototype.play=function(b){var c,d=a(b.target),e=d.closest("."+this._core.settings.itemClass),f=this._videos[e.attr("data-video")],g=f.width||"100%",h=f.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),e=this._core.items(this._core.relative(e.index())),this._core.reset(e.index()),c=a('<iframe frameborder="0" allowfullscreen mozallowfullscreen webkitAllowFullScreen ></iframe>'),c.attr("height",h),c.attr("width",g),"youtube"===f.type?c.attr("src","//www.youtube.com/embed/"+f.id+"?autoplay=1&rel=0&v="+f.id):"vimeo"===f.type?c.attr("src","//player.vimeo.com/video/"+f.id+"?autoplay=1"):"vzaar"===f.type&&c.attr("src","//view.vzaar.com/"+f.id+"/player?autoplay=true"),a(c).wrap('<div class="owl-video-frame" />').insertAfter(e.find(".owl-video")),this._playing=e.addClass("owl-video-playing"))},e.prototype.isInFullScreen=function(){var b=c.fullscreenElement||c.mozFullScreenElement||c.webkitFullscreenElement;return b&&a(b).parent().hasClass("owl-video-frame")},e.prototype.destroy=function(){var a,b;this._core.$element.off("click.owl.video");for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Video=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this.core=b,this.core.options=a.extend({},e.Defaults,this.core.options),this.swapping=!0,this.previous=d,this.next=d,this.handlers={"change.owl.carousel":a.proxy(function(a){a.namespace&&"position"==a.property.name&&(this.previous=this.core.current(),this.next=a.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":a.proxy(function(a){a.namespace&&(this.swapping="translated"==a.type)},this),"translate.owl.carousel":a.proxy(function(a){a.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};e.Defaults={animateOut:!1,
animateIn:!1},e.prototype.swap=function(){if(1===this.core.settings.items&&a.support.animation&&a.support.transition){this.core.speed(0);var b,c=a.proxy(this.clear,this),d=this.core.$stage.children().eq(this.previous),e=this.core.$stage.children().eq(this.next),f=this.core.settings.animateIn,g=this.core.settings.animateOut;this.core.current()!==this.previous&&(g&&(b=this.core.coordinates(this.previous)-this.core.coordinates(this.next),d.one(a.support.animation.end,c).css({left:b+"px"}).addClass("animated owl-animated-out").addClass(g)),f&&e.one(a.support.animation.end,c).addClass("animated owl-animated-in").addClass(f))}},e.prototype.clear=function(b){a(b.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this.core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Animate=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._call=null,this._time=0,this._timeout=0,this._paused=!0,this._handlers={"changed.owl.carousel":a.proxy(function(a){a.namespace&&"settings"===a.property.name?this._core.settings.autoplay?this.play():this.stop():a.namespace&&"position"===a.property.name&&this._paused&&(this._time=0)},this),"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoplay&&this.play()},this),"play.owl.autoplay":a.proxy(function(a,b,c){a.namespace&&this.play(b,c)},this),"stop.owl.autoplay":a.proxy(function(a){a.namespace&&this.stop()},this),"mouseover.owl.autoplay":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"mouseleave.owl.autoplay":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()},this),"touchstart.owl.core":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"touchend.owl.core":a.proxy(function(){this._core.settings.autoplayHoverPause&&this.play()},this)},this._core.$element.on(this._handlers),this._core.options=a.extend({},e.Defaults,this._core.options)};e.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},e.prototype._next=function(d){this._call=b.setTimeout(a.proxy(this._next,this,d),this._timeout*(Math.round(this.read()/this._timeout)+1)-this.read()),this._core.is("interacting")||c.hidden||this._core.next(d||this._core.settings.autoplaySpeed)},e.prototype.read=function(){return(new Date).getTime()-this._time},e.prototype.play=function(c,d){var e;this._core.is("rotating")||this._core.enter("rotating"),c=c||this._core.settings.autoplayTimeout,e=Math.min(this._time%(this._timeout||c),c),this._paused?(this._time=this.read(),this._paused=!1):b.clearTimeout(this._call),this._time+=this.read()%c-e,this._timeout=c,this._call=b.setTimeout(a.proxy(this._next,this,d),c-e)},e.prototype.stop=function(){this._core.is("rotating")&&(this._time=0,this._paused=!0,b.clearTimeout(this._call),this._core.leave("rotating"))},e.prototype.pause=function(){this._core.is("rotating")&&!this._paused&&(this._time=this.read(),this._paused=!0,b.clearTimeout(this._call))},e.prototype.destroy=function(){var a,b;this.stop();for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.autoplay=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){"use strict";var e=function(b){this._core=b,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":a.proxy(function(b){b.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+a(b.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")},this),"added.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.dotsData&&this._templates.splice(a.position,0,this._templates.pop())},this),"remove.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.dotsData&&this._templates.splice(a.position,1)},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&"position"==a.property.name&&this.draw()},this),"initialized.owl.carousel":a.proxy(function(a){a.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))},this),"refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers)};e.Defaults={nav:!1,navText:['<span aria-label="Previous">&#x2039;</span>','<span aria-label="Next">&#x203a;</span>'],navSpeed:!1,navElement:'button type="button" role="presentation"',navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},e.prototype.initialize=function(){var b,c=this._core.settings;this._controls.$relative=(c.navContainer?a(c.navContainer):a("<div>").addClass(c.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=a("<"+c.navElement+">").addClass(c.navClass[0]).html(c.navText[0]).prependTo(this._controls.$relative).on("click",a.proxy(function(a){this.prev(c.navSpeed)},this)),this._controls.$next=a("<"+c.navElement+">").addClass(c.navClass[1]).html(c.navText[1]).appendTo(this._controls.$relative).on("click",a.proxy(function(a){this.next(c.navSpeed)},this)),c.dotsData||(this._templates=[a('<button role="button">').addClass(c.dotClass).append(a("<span>")).prop("outerHTML")]),this._controls.$absolute=(c.dotsContainer?a(c.dotsContainer):a("<div>").addClass(c.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","button",a.proxy(function(b){var d=a(b.target).parent().is(this._controls.$absolute)?a(b.target).index():a(b.target).parent().index();b.preventDefault(),this.to(d,c.dotsSpeed)},this));for(b in this._overrides)this._core[b]=a.proxy(this[b],this)},e.prototype.destroy=function(){var a,b,c,d,e;e=this._core.settings;for(a in this._handlers)this.$element.off(a,this._handlers[a]);for(b in this._controls)"$relative"===b&&e.navContainer?this._controls[b].html(""):this._controls[b].remove();for(d in this.overides)this._core[d]=this._overrides[d];for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},e.prototype.update=function(){var a,b,c,d=this._core.clones().length/2,e=d+this._core.items().length,f=this._core.maximum(!0),g=this._core.settings,h=g.center||g.autoWidth||g.dotsData?1:g.dotsEach||g.items;if("page"!==g.slideBy&&(g.slideBy=Math.min(g.slideBy,g.items)),g.dots||"page"==g.slideBy)for(this._pages=[],a=d,b=0,c=0;a<e;a++){if(b>=h||0===b){if(this._pages.push({start:Math.min(f,a-d),end:a-d+h-1}),Math.min(f,a-d)===f)break;b=0,++c}b+=this._core.mergers(this._core.relative(a))}},e.prototype.draw=function(){var b,c=this._core.settings,d=this._core.items().length<=c.items,e=this._core.relative(this._core.current()),f=c.loop||c.rewind;this._controls.$relative.toggleClass("disabled",!c.nav||d),c.nav&&(this._controls.$previous.toggleClass("disabled",!f&&e<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!f&&e>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!c.dots||d),c.dots&&(b=this._pages.length-this._controls.$absolute.children().length,c.dotsData&&0!==b?this._controls.$absolute.html(this._templates.join("")):b>0?this._controls.$absolute.append(new Array(b+1).join(this._templates[0])):b<0&&this._controls.$absolute.children().slice(b).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(a.inArray(this.current(),this._pages)).addClass("active"))},e.prototype.onTrigger=function(b){var c=this._core.settings;b.page={index:a.inArray(this.current(),this._pages),count:this._pages.length,size:c&&(c.center||c.autoWidth||c.dotsData?1:c.dotsEach||c.items)}},e.prototype.current=function(){var b=this._core.relative(this._core.current());return a.grep(this._pages,a.proxy(function(a,c){return a.start<=b&&a.end>=b},this)).pop()},e.prototype.getPosition=function(b){var c,d,e=this._core.settings;return"page"==e.slideBy?(c=a.inArray(this.current(),this._pages),d=this._pages.length,b?++c:--c,c=this._pages[(c%d+d)%d].start):(c=this._core.relative(this._core.current()),d=this._core.items().length,b?c+=e.slideBy:c-=e.slideBy),c},e.prototype.next=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!0),b)},e.prototype.prev=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!1),b)},e.prototype.to=function(b,c,d){var e;!d&&this._pages.length?(e=this._pages.length,a.proxy(this._overrides.to,this._core)(this._pages[(b%e+e)%e].start,c)):a.proxy(this._overrides.to,this._core)(b,c)},a.fn.owlCarousel.Constructor.Plugins.Navigation=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){"use strict";var e=function(c){this._core=c,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":a.proxy(function(c){c.namespace&&"URLHash"===this._core.settings.startPosition&&a(b).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":a.proxy(function(b){if(b.namespace){var c=a(b.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!c)return;this._hashes[c]=b.content}},this),"changed.owl.carousel":a.proxy(function(c){if(c.namespace&&"position"===c.property.name){var d=this._core.items(this._core.relative(this._core.current())),e=a.map(this._hashes,function(a,b){return a===d?b:null}).join();if(!e||b.location.hash.slice(1)===e)return;b.location.hash=e}},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers),a(b).on("hashchange.owl.navigation",a.proxy(function(a){var c=b.location.hash.substring(1),e=this._core.$stage.children(),f=this._hashes[c]&&e.index(this._hashes[c]);f!==d&&f!==this._core.current()&&this._core.to(this._core.relative(f),!1,!0)},this))};e.Defaults={URLhashListener:!1},e.prototype.destroy=function(){var c,d;a(b).off("hashchange.owl.navigation");for(c in this._handlers)this._core.$element.off(c,this._handlers[c]);for(d in Object.getOwnPropertyNames(this))"function"!=typeof this[d]&&(this[d]=null)},a.fn.owlCarousel.Constructor.Plugins.Hash=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){function e(b,c){var e=!1,f=b.charAt(0).toUpperCase()+b.slice(1);return a.each((b+" "+h.join(f+" ")+f).split(" "),function(a,b){if(g[b]!==d)return e=!c||b,!1}),e}function f(a){return e(a,!0)}var g=a("<support>").get(0).style,h="Webkit Moz O ms".split(" "),i={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},j={csstransforms:function(){return!!e("transform")},csstransforms3d:function(){return!!e("perspective")},csstransitions:function(){return!!e("transition")},cssanimations:function(){return!!e("animation")}};j.csstransitions()&&(a.support.transition=new String(f("transition")),a.support.transition.end=i.transition.end[a.support.transition]),j.cssanimations()&&(a.support.animation=new String(f("animation")),a.support.animation.end=i.animation.end[a.support.animation]),j.csstransforms()&&(a.support.transform=new String(f("transform")),a.support.transform3d=j.csstransforms3d())}(window.Zepto||window.jQuery,window,document);;
//<!-- Google Analytics -->
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', $('#SessionAnalyticsId').val(), 'auto');
ga('require', 'ec');
ga('set', 'currencyCode', 'INR'); // Set tracker currency to rupees.
ga('send', 'pageview');

function ga_addToCart(product) {
    ga('ec:addProduct', {
        'id': product.ProductCode,
        'name': product.ProductName,
        'price': product.MRP,
        'quantity': product.Quantity
    });
    ga('ec:setAction', 'add');
    ga('send', 'event', 'UX', 'click', 'add to cart'); 
}

function ga_showProductDetail(product) {
    ga('ec:addProduct', {
        'id': product.ProductCode,
        'name': product.ProductName,
    });
    ga('ec:setAction', 'detail');
    ga('send', 'pageview');      
}

function ga_checkout(selfCartManager) {
    if (selfCartManager.Step().length == 0)
        _ga_addProducts(selfCartManager);
    ga('ec:setAction', 'checkout', {
        'step': selfCartManager.Step().length == 0 ? 1 : (selfCartManager.Step() == "address" ? 2 : 3),
        'option': selfCartManager.PaymentType()
    });
    ga('send', 'pageview');
}


function ga_onCheckoutComplete(selfCartManager, orderNo) {
    _ga_addProducts(selfCartManager);
    ga('ec:setAction', 'purchase', {
        'id': orderNo,
        'revenue': selfCartManager.ProductsValueSalePrice(),
        'shipping': selfCartManager.DeliveryCharge() + selfCartManager.CashOnDeliveryCharge() + selfCartManager.ProcessingCharge(),
        'coupon': selfCartManager.CouponCode()
    });

    ga('send', 'pageview');

    if ($('#SessionGoogleAdsConversionId').val().length > 0) {
        gtag('event', 'conversion', {
            'send_to': $('#SessionGoogleAdsConversionId').val(),//'AW-685740064/t65_COu2scgBEKCg_sYC',
            'transaction_id': orderNo
        });
    }
}

function _ga_addProducts(selfCartManager) {
    ko.utils.arrayForEach(selfCartManager.CartItems(), function (item, index) {
        ga('ec:addProduct', {
            'id': item.ProductCode(),
            'name': item.ProductName(),
            'price': item.SalePrice(),
            'quantity': item.Quantity()
        });
    });
}   

function ga_cancelOrder(orderNo) {
    ga('ec:setAction', 'refund', {
        'id': orderNo
    });
    ga('send', 'pageview');
}

if ($('#SessionGoogleAdsId').val().length > 0) {
    var imported = document.createElement('script');
    imported.src = 'https://www.googletagmanager.com/gtag/js?id=' + $('#SessionGoogleAdsId').val();
    document.head.appendChild(imported);
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', $('#SessionGoogleAdsId').val());
};
